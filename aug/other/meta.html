<!DOCTYPE HTMP PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>File metadata</title>
    <link rel="stylesheet" href=../ab.css />
    <link rel="stylesheet" href=../ppi.css />
    <meta http-equiv="Content-Type" content="text/html"; charset=iso-8859-15 />
    <meta name="robots" contents="all" />
  </head>

  <body>
    <div class=topbar>
  <div class=navbar>
  <a class=navhead href="../index.html">The Athena Users' Guide</a>
  <table class=navtable>
    <tr>
      <td align=left>
        &laquo;<a class=navtable href="http://bruceravel.github.io/demeter/"><span class=programlink>DEMETER</span></a>&raquo; &nbsp;
        &laquo;<a class=navtable href="https://github.com/newville/ifeffit"><span class=programlink>IFEFFIT</span></a>&raquo; &nbsp;
        <!-- [&nbsp;<a class=navtable href="http://leonardo.phys.washington.edu/feff/wiki/index.php?title=FEFF_Documentation"></a>&nbsp;] &nbsp; -->
        &laquo;<a class=navtable href="http://xafs.org">xafs.org</a>&raquo; &nbsp;
	<!-- [&nbsp;<a class=navtable href="../demeter.pdf">PDF&nbsp;doc</a>&nbsp;] -->
      </td>
      <td align=right>
        &nbsp;&nbsp;
        Up: <a class=navtable href="../other/index.html" class="menu">Other main window chores</a> &nbsp;&nbsp;
        Next: <a class=navtable href="../other/journal.html" class="menu">Project journal</a>      </td>
    </tr>
  </table>
  </div>
</div>

<div class=sidebar>
  <a href="../pallas.html"><img src=../../images/pallas_athene_thumb.jpg
    width=90% border=0 alt='[Athena logo]'></a>
  <br />
  <a href="../index.html"  class="menu">Home</a><br />
<a href="../forward.html"  class="menu">Forward</a><br />
<a href="../intro.html"  class="menu">Introduction</a><br />
<a href="../import/index.html"  class="menu">Importing Data</a><br />
<a href="../bkg/index.html"  class="menu">Background Removal</a><br />
<a href="../plot/index.html"  class="menu">Plotting</a><br />
<a href="../ui/index.html"  class="menu">User Interface</a><br />
<a href="../params/index.html"  class="menu">Setting parameter values</a><br />
<a href="../output/index.html"  class="menu">Output files</a><br />
<a href="../process/index.html"  class="menu">Data processing</a><br />
<a href="../analysis/index.html"  class="menu">Data analysis</a><br />
<a href="../other/index.html"  class="menuselect">Other main window chores</a><br />
&nbsp;&#8618;&nbsp;<span style="font-style: italic;">File metadata</span><br />
&nbsp;&#8618;&nbsp;<a href="../other/journal.html"  class="menu">Project journal</a><br />
&nbsp;&#8618;&nbsp;<a href="../other/plugin.html"  class="menu">Filetype plugins</a><br />
&nbsp;&#8618;&nbsp;<a href="../other/prefs.html"  class="menu">Setting preferences</a><br /><a href="../examples/index.html"  class="menu">Worked examples</a><br />
<a href="../hephaestus.html"  class="menu">Hephaestus</a><br />
</div>

<div class=contentarea>


<h1>
  File metadata
</h1>
<h2>
  Tracking the data about your data 
</h2>

<p>
 
Since version 0.9.21, <span class=program>ATHENA</span> has supported import and export of
metadata using the <a href="https://github.com/XraySpectroscopy/XAS-Data-Interchange">XAS Data Interchange
(XDI) specification</a>.
</p>

<p>
When metadata can be gleaned from the file you import, it will be
stored in the <span class=program>ATHENA</span> project file and used to make the header
portion of any output files written by <span class=program>ATHENA</span>.
</p>

<p>
There are three categories of information displayed in
<span class=program>ATHENA</span>'s metadata display tool.  At the top is versioning
information about the XDI specification as well versioning information
for any data acquisition or analysis software that has touched the
data.
</p>

<p>
Below that is a tree of metadata grouped into families of sensible,
widely understood, semantic groupings of data.  Some of these items
are defined in the XDI dictionary, while others are associated with
the software that has touched the data.
</p>

<p>
Finally, there is a section of user comments.  This is any information
associated with the file that has meaning to the user but which does
not fit neatly into semantic groupings.
</p>



<div class=figure style="max-width: 834px; min-width: 7em;">
<a name=metadata>
<img src=../../images/metadata.png width=100%>
</a>
<p align=center>
<span class=program>ATHENA</span>'s metadata display tool.
</p>
</div>

<p>
 
If the input data file is in the XDI format, all metadata and all user
comments will be stored by <span class=program>ATHENA</span> and displayed in t his tool.
</p>

<p>
Because XDI is a new standard that has not yet been widely adopted,
<span class=program>ATHENA</span> provides a plugin mechanism whereby an input data file can
be parsed for metadata as it is imported.  This parsing is a
beamline-specific chore, thus plugins are written which are tailored
to the data files written as particular beamlines.  The selection of
beamline plugins is limited at this time.  <span class=program>DEMETER</span> ships with one
plugin for several XAS beamlines at NSLS (many of the XAS beamlines at
NSLS use the same data acquisition software) and another for the
beamlines at Sector 10 at the APS.
</p>

<p>
The image above shows an example of the NSLS beamline plugin.  The
data displayed in that image are from NSLS beamline X23A2.  The
metadata was either gleaned from the data file or from a small
database of facility and beamline metadata that comes with
<span class=program>DEMETER</span>.
</p>

<p>
Two pieces of metadata will always be displayed in the metadata
viwewer, <tt>Element.symbol</tt> and <tt>Element.edge</tt>.  These are two pieces of metadata that
are required elements of the XDI specification.  The periodic table is
replete with examples of atoms that have absorption edges with very
similar edge energies.  For example, the tabulated values of the Cr K
edge and the Ba L<sub>I</sub> edge are both 5989 eV.  Without identification of
the species of the absorbing atom and of the absorption edge measured,
some data cannot cannot be unambiguously identified.
</p>

<p>
Since <span class=program>ATHENA</span> always attempts to determine those two pieces of
information for any data, those two are always available for display
in the viewer.
</p>


<hr class=hide />
<a name="interactingwiththemetadata">
<p>&nbsp;</p>
</a>

<h2>  Interacting with the metadata</h2>

<p>
 
This tool is not particularly interactive.  Metadata is typically
inserted into a file by a data acquisition or analysis program and is
not intended to be altered by the user.  The one exception is the user
comments area.  In <span class=program>ATHENA</span>, this is a normal text editing control
into which you can type whatever you want.  The contents of this
control will be saved as user comments when the 
&ldquo;Save comments&rdquo; button is pressed.
</p>


<hr class=hide />
<a name="beamlineplugins">
<p>&nbsp;</p>
</a>

<h2>  Beamline plugins</h2>

<p>
 
Metadata can extracted from any data file so long as a beamline plugin
has been written.  The plugin is contained in a 
<span class=file>.pm</span> file in the
<span class=file>Plugins/Beamlines/</span> folder of the
<span class=program>DEMETER</span> installation.  This is a piece of perl code 
which performs the following chores:
</p>


<ol>
  
<li><p>
Very quickly recognize whether a file comes from the beamline.
Speed is essential as every file will be checked sequentially against
every beamline plugin.  If a beamline plugin is slow to determine
this, then the use of Athena or other applications will be noticeably
affected.
</p></li>
<li><p>
Recognize semantic content from the file header.  Where possible, map
this content onto defined XDI headers.  Other semantic content is
placed into extension headers.  In the example above, metadata from
the XDAC data acquisition program is placed into the XDAC familym
which other metadata is placed into families defined in the XDI
specification. 
</p></li>
<li><p>
Add versioning information for the data acquisition program into the
XDI extra_version attribute.  In the example above, the data file was
collected using version 1.4 of XDAC, so the string 
&ldquo;XDAC/1.4&rdquo; is placed among the applications.
</p></li>
</ol>

<p>
 
<span class=program>DEMETER</span> also has a small database of metadata related to specific
beamlines.  This is found in the
<span class=file>share/xdi/</span> folder of the
<span class=program>DEMETER</span> installation.  Each of the files in that folder is a short 
<span class=file>.ini</span> file containined common information
about facilities and beamlines.  Much of the metadata shown above
actually came from the <span class=file>.ini</span> file for NSLS
beamline X23A2.
</p>

<p>
To add new beamlines to this part of <span class=program>ATHENA</span>, it is necessary to
write the plugin and the corresponding 
<span class=file>.ini</span> file.
</p>

</div>

<br />
<hr class=hide />
<hr class=bottomdivider />

<div class=bottombar>
  <div class=copyright>
  <table>
    <tr>
      <td colspan=2>
        <span class=program>DEMETER</span> is copyright &copy; 2009-2014 Bruce Ravel
        &mdash;
        This document is copyright &copy; 2014 Bruce Ravel
        <br />
      </td>
    </tr>
    <tr valign=middle>
      <td> 
           <a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="../../images/somerights20.png" width="88" height="31" alt="" border="0" /></a> &nbsp;&nbsp;&nbsp;
      </td>
      <td>
  	This document is licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/">
  	The Creative Commons Attribution-ShareAlike License</a>.
  	<br />
  	If <span class=program>DEMETER</span> and this document are useful to you, please consider
  	<a href="http://creativecommons.org/support/">supporting The Creative Commons</a>.
      </td>
    </tr>
  </table>
</div>
</div>
  </body>
</html>