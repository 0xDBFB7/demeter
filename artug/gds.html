<!DOCTYPE HTMP PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>The GDS window</title>
    <link rel="stylesheet" href=./ab.css />
    <link rel="stylesheet" href=./ppi.css />
    <meta http-equiv="Content-Type" content="text/html"; charset=iso-8859-15 />
    <meta name="robots" contents="all" />
  </head>

  <body>
    <div class=topbar>
  <div class=navbar>
  <table class=navtable>
    <tr>
      <td align=left>
        [&nbsp;<a class=navtable href="./index.html">Home</a>&nbsp;] &nbsp;&nbsp;
        [&nbsp;<a class=navtable href="http://bruceravel.github.com/demeter/"><span class=programlink>DEMETER</span></a>&nbsp;] &nbsp;&nbsp;
        <!-- [&nbsp;<a class=navtable href="http://cars9.uchicago.edu/iffwiki/Ifeffit"><span class=programlink>IFEFFIT</span></a>&nbsp;] &nbsp;&nbsp;
        [&nbsp;<a class=navtable href="http://leonardo.phys.washington.edu/feff/wiki/index.php?title=FEFF_Documentation"><span class=programlink>FEFF</span></a>&nbsp;] &nbsp;&nbsp; -->
        [&nbsp;<a class=navtable href="http://xafs.org">xafs.org</a>&nbsp;] &nbsp;&nbsp;
	<!-- [&nbsp;<a class=navtable href="./demeter.pdf">PDF&nbsp;doc</a>&nbsp;] -->
      </td>
      <td align=right>
        Back: <a class=navtable href="./path/index.html" class="menu">The Path page</a> &nbsp;&nbsp;
        Next: <a class=navtable href="./fit/index.html" class="menu">Running a fit</a>      </td>
    </tr>
  </table>
  </div>
</div>

<div class=sidebar>
  <a href="./diana.html"><img src=./../images/Artemis_logo.jpg
    width=90% border=0 alt='[Demeter logo]'></a>
  <br />
  <a href="./index.html"  class="menu">Home</a><br />
<a href="./intro.html"  class="menu">Introduction</a><br />
<a href="./startup/index.html"  class="menu">Starting Artemis</a><br />
<a href="./data.html"  class="menu">The Data window</a><br />
<a href="./feff/index.html"  class="menu">The Atoms/Feff window</a><br />
<a href="./path/index.html"  class="menu">The Path page</a><br />
<span style="font-style: italic;">The GDS window</span><br />
<a href="./fit/index.html"  class="menu">Running a fit</a><br />
<a href="./plot/index.html"  class="menu">The Plot window</a><br />
<a href="./logjournal.html"  class="menu">The Log & Journal windows</a><br />
<a href="./history.html"  class="menu">The History window</a><br />
<a href="./monitor.html"  class="menu">Monitoring things</a><br />
<a href="./prefs.html"  class="menu">Managing preferences</a><br />
<a href="./examples/index.html"  class="menu">Worked examples</a><br />
<a href="./extended/index.html"  class="menu">Extended topics</a><br />
</div>

<div class=contentarea>


<h1>
  The GDS window
</h1>

<p>

This is the big trick in  <span class=program>ARTEMIS</span>: <p class=premise>
    The parameters of the EXAFS equation are not the parameters of the
    fit.  The parameters of the EXAFS equation are written <em>in terms
    of</em> the parameters of the fit.
</p> As
a consequence, path parameter values are <em>math
expressions</em>.  These math expressions are functions of the actual
fitting parameters.
</p>

<p>
Some of these math expressions are quite simple.  For example, in the
gold metal example in the previous chapter, the math expressions for
 S&sup2;&#8320;  and  E&#8320;  were simple function of a single parameter.  The
math expression for  &Delta;R , however, was a function of 
<tt>alpha</tt> and <tt>reff</tt>,
while the  &sigma;&sup2;  math expression used the 
<tt>debye</tt> function and two parameters.
</p>

<p>
All of these parameters must be defined in the GDS window.  This
window contains a grid with a series of buttons down the right side.
It is displayed and hidden using the GDS button on the left side of
the Main window.  Here are the contents of the GDS window from the
gold metal example.  The four variable parameters in the fit along
with the fixed sample temperature needed by the 
<tt>debye</tt> function are shown.  A new variable
parameter is being defined in line 6.
</p>

<p>
The second, third, and fourth columns in the grid are filled by simple
text boxes.  The first column contains a drop down menu from which the
parameter types can be chosen.
</p>


<a href="../images/gds.png" target=_blank><img src="../images/gds.png" alt="
The  <span class=program>ARTEMIS</span> GDS window.
"></a>


<a name="parametertypes">

<h2>  Parameter types</h2>
</a>

<p>
Every parameter of any type used in any math expression must be
defined on the GDS widow.  Any variable parameter defined on the GDS
window must be used in a math expression.
</p>

<p>
There are 9 types of parameters in  <span class=program>ARTEMIS</span>.  They are color coded
in the grid to give you a visual indication of each parameter's 
type. 
<dl>
  
<dt>
  guess
</dt>
<dd>
(<span style="color:#a300a3; background-color:white">purple</span>) This is a
parameter of the fit.  Its value will be adjusted 
to find the best fit of the model to your data.
  <br />
  <br />
</dd>
<dt>
  def
</dt>
<dd>
(<span style="color:#008b00; background-color:white">green</span>) This is a
parameter that is defined as a math expression 
dependent upon other guess, def, or set parameters.  Its value is
updated throughout the fit.  As discussed below, sophisticated use of
def parameters is key to successful model building and effective use
of  <span class=program>ARTEMIS</span>. 
  <br />
  <br />
</dd>
<dt>
  set
</dt>
<dd>
(<span style="color:#000000; background-color:white">black</span>) A set parameter
is one that is evaluated at the beginning of 
the fit, but not evaluated subsequently.  Although a set parameter can
take a math expression as its value, it is more typically used to
represent a constant value used elsewhere in the fitting model.
  <br />
  <br />
</dd>
<dt>
  lguess
</dt>
<dd>
(<span style="color:#3E1C8F; background-color:white">dark purple</span>) An lguess
parameter is tool used to simplify model 
creation for a multiple data set fit.  It can be used in math
expressions for two or more data sets.  When the fit started, an
actual guess parameter will be created for each data set in which the
lguess is used.  As an example, suppose your multiple data set fit
includes data on a series of binary alloys.  If <tt>x</tt> is a mixing parameter between the two alloys and is different
for each sample, you might then use math expressions containing <tt>x</tt> and <tt>(1-x)</tt> for
 S&sup2;&#8320;  parameters of paths representing the two metallic species in
each fit.  With  <tt>x</tt> an lguess parameter,
independent mixing parameters will be floated for each data set.  The
point, then, of an lguess is to facilitate the chore of editing path
parameter math expressions using  <span class=program>ARTEMIS</span>'  tools for pushing
path parameter values across paths.
  <br />
  <br />
</dd>
<dt>
  skip
</dt>
<dd>
(<span style="color:#b2b2b2; background-color:white">gray</span>) A skip parameter
is one that is not used in any capacity in the 
fit, but which you do not want to discard from your fitting project.
  <br />
  <br />
</dd>
<dt>
  restrain
</dt>
<dd>
(<span style="color:#cd9b1d; background-color:white">dark yellow</span>) A restraint
is a math expression that is evaluated and 
added in quadrature to  &chi;&sup2;  to evaluate the fit.  That is, the
fit is optimized in the presence of the restraint.  The point of this
is to add prior knowledge to a fit.  Restraints will be discussed in
more detail later in this document.
  <br />
  <br />
</dd>
<dt>
  after
</dt>
<dd>
(<span style="color:#4a708b; background-color:white">blue</span>) An after parameter
is very similar to a def parameter in that 
it takes a math expression that depends on other parameters.  It is
not, however, used in any way in the fit.  Instead, it is evaluated at
the end of the fit and reported to the log file.  This is used to make
interesting calculations based on other parameters as part of the
record of the fit.
  <br />
  <br />
</dd>
<dt>
  penalty
</dt>
<dd>
(<span style="color:#8b5a2b; background-color:white">brown</span>) This takes a math
expression representing a user defined 
penalty to the happiness calculation.  This feature has not yet been
implemented in  <span class=program>ARTEMIS</span>.
  <br />
  <br />
</dd>
<dt>
  merge
</dt>
<dd>
(<span style="color:#ffffff; background-color:ee0000">white on
red</span>) A merge parameter is a parameter which has been 
multiply defined under the same name as part of combining fitting
projects or importing structural units.  A fit cannot proceed with any
parameters in this state.  This feature has not yet been implemented
in  <span class=program>ARTEMIS</span>.
  <br />
  <br />
</dd>
</dl> 
</p>

<p>
<p class=todo>
<strong>On the to do list:</strong>&nbsp;&nbsp;
Implement penalty and merge parameters.
</p>
</p>



<a name="userinteraction">

<h2>  User interaction</h2>
</a>

<a name="buttonbar">

<h3>  Button bar</h3>
</a>

<p>
The stack of buttons on the right side of the GDS window contains many
of the main functions of the GDS window.  The 
&ldquo;Use best fit&rdquo; button makes the most recent
best fit value into the initial guess for every guess parameter in the
grid.  The &ldquo;Reset all&rdquo; button tells
 <span class=program>IFEFFIT</span> to reset all parameters to their initial values.  The 
&ldquo;Highlight&rdquo; button prompts you for a
string.  All parameters with names or math expressions which match the
string provided will be highlighted with a yellow background.  This
feature is particularly useful for large fitting models with many
parameters. 
</p>

<p>
The next two buttons are used to import or export a simple text file
showing the definitions of all the parameters.  The
&ldquo;Discard all&rdquo; button does just that, after
prompting to be sure that is what you want to do.  Finally, the 
&ldquo;Add a site&rdquo; button appends a blank row to
the end of the grid.
</p>


<a name="keyboardshortcuts">

<h3>  Keyboard shortcuts</h3>
</a>

<p>
When one or more rows are selected, you can use the following keyboard
shortcuts to change the parameter type of that set of parameters.
</p>

<ul>
  
<li>
<tt>Alt-g</tt>: turn to guess
</li>
<li>
<tt>Alt-d</tt>: turn to def
</li>
<li>
<tt>Alt-s</tt>: turn to set
</li>
<li>
<tt>Alt-l</tt>: turn to lguess
</li>
<li>
<tt>Alt-k</tt>: turn to skip
</li>
<li>
<tt>Alt-r</tt>: turn to restrain
</li>
<li>
<tt>Alt-a</tt>: turn to after
</li>
<li>
<tt>Alt-p</tt>: turn to penalty
</li>
</ul> 


<a name="contextmenu">

<h3>  Context menu</h3>
</a>

<p>

</td>
<td width=210>
<a class=floatright href="../images/gds.menu.png" target=_blank><img border=0 src="../images/gds.menu.png" alt="gds.menu.png"></a>
Clicking on a line in the grid selects the entire line.  Control
clicking of a line adds that line to the selection.  Shift clicking
adds all lines between the selected and clicked upon lines.
</p>

<p>
Right clicking on any line in the grid, including the label containing
the line number, will post the menu shown on the right.  The top three
items in the menu are used to copy, cut, and paste entire lines.  The
cut function is one way of discarding a parameter.  The other is to
simply delete the name.
</p>

<p>
The insertion options complement the &ldquo;Add a site&rdquo;
button by adding blank rows to the middle of the grid.  The 
&ldquo;Change selected&rdquo; sub-menu is yet another way
of changing the parameter type of the selected lines of the grid.
The &ldquo;Grab best fit&rdquo; option makes the most
recent best fit of the parameters in the selected lines into their
initial guesses.
</p>

<p>
The &ldquo;Build restraint&rdquo; option posts a dialog
that helps you name and define a restraint based upon the value of the
parameter in the line clicked upon.  The &ldquo;Annotate&rdquo;
option prompts you for a text string describing the parameter in the
line clicked upon.  This annotation is displayed in the GDS window's 
status bar when that line is selected.
</p>

<p>
The &ldquo;Find&rdquo; option posts a small window with
a text box reporting all GDS parameters and path parameters which have
math expressions containing the parameter in the line clicked upon.
</p>

<p>
The &ldquo;Change globally&rdquo; options allows you to
rename a parameter and have its new name inserted every place in the
fit where that parameter is used.
</p>

<p>
Finally, the &ldquo;Explain&rdquo; submenu writes a
short text to the status bar explaining the various parameter types.
</p>

</div>

<br />
<hr class=bottomdivider />

<div class=bottombar>
  <div class=copyright>
  <table>
    <tr>
      <td colspan=2>
         <span class=program>DEMETER</span> is copyright &copy; 2009-2012 Bruce Ravel
        &mdash;
        This document is copyright &copy; 2012 Bruce Ravel
        <br />
      </td>
    </tr>
    <tr valign=middle>
      <td> 
           <a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="../images/somerights20.png" width="88" height="31" alt="" border="0" /></a> &nbsp;&nbsp;&nbsp;
      </td>
      <td>
  	This document is licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/">
  	The Creative Commons Attribution-ShareAlike License</a>.
  	<br />
  	If  <span class=program>DEMETER</span> and this document are useful to you, please consider
  	<a href="http://creativecommons.org/support/">supporting The Creative Commons</a>.
      </td>
    </tr>
  </table>
</div>
</div>
  </body>
</html>