<!DOCTYPE HTMP PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Running a fit</title>
    <link rel="stylesheet" href=../artug.css />
    <link rel="stylesheet" href=../ppi.css />
    <meta http-equiv="Content-Type" content="text/html"; charset=iso-8859-15 />
    <meta name="robots" contents="all" />
  </head>

  <body>
    <div class=topbar>
  <div class=navbar>
  <a class=navhead href="../index.html">The Artemis Users' Guide</a>
  <table class=navtable>
    <tr>
      <td align=left>
        &laquo;<a class=navtable href="http://bruceravel.github.io/demeter/"><span class=programlink>DEMETER</span></a>&raquo; &nbsp;
        &laquo;<a class=navtable href="http://cars9.uchicago.edu/iffwiki/Ifeffit"><span class=programlink>IFEFFIT</span></a>&raquo; &nbsp;
        <!-- [&nbsp;<a class=navtable href="http://leonardo.phys.washington.edu/feff/wiki/index.php?title=FEFF_Documentation"><span class=programlink>FEFF</span></a>&nbsp;] &nbsp; -->
        &laquo;<a class=navtable href="http://xafs.org">xafs.org</a>&raquo; &nbsp;
	<!-- [&nbsp;<a class=navtable href="../demeter.pdf">PDF&nbsp;doc</a>&nbsp;] -->
      </td>
      <td align=right>
        Back: <a class=navtable href="../gds.html" class="menu">The GDS window</a> &nbsp;&nbsp;
        Down: <a class=navtable href="../fit/sanity.html" class="menu">Sanity checking your model</a>
        &nbsp;&nbsp;
        Next: <a class=navtable href="../plot/index.html" class="menu">The Plot window</a>      </td>
    </tr>
  </table>
  </div>
</div>

<div class=sidebar>
  <a href="../diana.html"><img src=../../images/Artemis_logo.jpg
    width=90% border=0 alt='[Artemis logo]'></a>
  <br />
  <a href="../index.html"  class="menu">Home</a><br />
<a href="../intro.html"  class="menu">Introduction</a><br />
<a href="../startup/index.html"  class="menu">Starting Artemis</a><br />
<a href="../data.html"  class="menu">The Data window</a><br />
<a href="../feff/index.html"  class="menu">The Atoms/Feff window</a><br />
<a href="../path/index.html"  class="menu">The Path page</a><br />
<a href="../gds.html"  class="menu">The GDS window</a><br />
<span style="font-style: italic;">Running a fit</span><br />
&nbsp;&#8618;&nbsp;<a href="../fit/sanity.html"  class="menu">Sanity checking your model</a><br />
&nbsp;&#8618;&nbsp;<a href="../fit/happiness.html"  class="menu">The happiness parameter</a><br />
&nbsp;&#8618;&nbsp;<a href="../fit/pathlike.html"  class="menu">Using path-like objects</a><br /><a href="../plot/index.html"  class="menu">The Plot window</a><br />
<a href="../logjournal.html"  class="menu">The Log & Journal windows</a><br />
<a href="../history.html"  class="menu">The History window</a><br />
<a href="../monitor.html"  class="menu">Monitoring things</a><br />
<a href="../prefs.html"  class="menu">Managing preferences</a><br />
<a href="../examples/index.html"  class="menu">Worked examples</a><br />
<a href="../atoms/index.html"  class="menu">Crystallography for EXAFS</a><br />
<a href="../extended/index.html"  class="menu">Extended topics</a><br />
</div>

<div class=contentarea>


<h1>
  Running a fit
</h1>

<p>
<span class=program>ARTEMIS</span> is, admittedly, a complex and non-intuitive program.
There are good reasons for <span class=program>ARTEMIS</span> being the way it is, although
those reasons may not be clear if you are coming to the program for
the first time.  While it is important that easy things be easy in
<span class=program>ARTEMIS</span>, letting hard things be possible is central to the intent
of the program.
</p>

<p>
Most of the complexity revolves around the central premise in
<span class=program>IFEFFIT</span> and <span class=program>ARTEMIS</span>: <p class=premise>
    The parameters of the EXAFS equation are not the parameters of the
    fit.  The parameters of the EXAFS equation are written <em>in terms
    of</em> the parameters of the fit.
</p>
</p>

<p>
As a consequence, we have the GDS window where the parameters of the
fit are <em>defined</em> and the various Path pages
where those parameters are <em>used</em>.
</p>

<p>
It is instructive to understand a little bit about how the fitting
model is structured internally.  The basic definition of a fit
consists of three things: (1) a list of one or more GDS parameters,
(2) a list of one or more data sets, and (3) a list of one or more
paths.  To make a fit, all three of those lists must somehow be
defined.
</p>

<p>
The list of data sets is taken from the Data list in the Main window.
All data sets in the Data list which have the 
&ldquo;Include in fit&rdquo; button checked on will be
used in the fit.
</p>

<p>
Each data set has a list of one or more paths associated with it.  In
<span class=program>ARTEMIS</span> a path is associated with a data set by dragging and
dropping it onto a data set's  path list.  The contrapositive is
also true.  All paths used in a fit must be associated with a Data
set.
</p>

<p>
Paths typically come from a <span class=program>FEFF</span> calculation explicitly initiated
by the user.  That is, the user imports an <span class=program>ATOMS</span> input file, a
<span class=program>FEFF</span> input file, or a CIF file.  <span class=program>FEFF</span> is run and the
interpretation list is displayed in the <span class=program>FEFF</span> window.  Paths are
dragged from that list and dropped on a Data set.  Thus paths are not
only associated with a Data set, they are also associated with a
specific <span class=program>FEFF</span> calculation.
</p>

<p>
Each path must have its path parameters set in some manner, even if
they are merely set to 0 or some other constant.  Typically, path
parameters are set to math expressions which depend functionally upon
one or more parameters from the GDS page.  Every GDS parameter used in
a path parameter math expression must be defined on the GDS window.
Similarly, every guess or def parameter from the GDS window must be
used in at least one math expression in your fitting model.
</p>

<p>
All paths which have their &ldquo;Include in fit&rdquo;
button checked on will be used in the fit.
</p>

<p>
When the fit begins, <span class=program>ARTEMIS</span> digs through all the windows, finding
all data sets, paths, and GDS parameters.  It runs a number of sanity
checks to avoid certain obvious situations which will result in an
unsuccessful fit.  It then makes sure that all of <span class=program>IFEFFIT</span>'s 
data structure are up to date with respect to your current settings in
<span class=program>ARTEMIS</span>.  The fit is run.  Statistics, including error bars and
correlations, are calculated.  A log file is written, a plot is made,
and the various colored buttons are set according to the fit happiness.
</p>

<p>
That's  a fit!
</p>

<p>
There are some details of the fitting process that are 
<a href="../prefs.html">configurable</a>.
For instance, the log file can be displayed in either the Log
window or in the History window after the fit finishes.  You can also
choose not to have it display automatically.  This is set by
<span class=pref>&diams;Artemis&nbsp;&rarr;&nbsp;show_after_fit</span>.
</p>

<p>
The plot that is made upon completion of the fit is also configurable.
The default is to have <a href="../data.html#thermrplot">an Rmr plot</a> made containing
the data and the fit.  Any of the five plot types from the Data window
can be chosen as the after-fit plot.  You may also choose to have the
contents of the plotting list plotted in k-, R-, or q-space.  This
adds value to the &ldquo;Plot after fit&rdquo; buttons
on the Data window and Path pages.  You may also choose to have no
plot displayed automatically after the fit.  This is set by <span class=pref>&diams;Artemis&nbsp;&rarr;&nbsp;plot_after_fit</span>.
</p>

<p>
The fit name and fit description text boxes from the Main window are
also useful for customizing your fit as well as the course of a
fitting project.  The fit name is used in many places &ndash; most notably
in the legends of plots.  Thus you may find it useful to select
descriptive names for each of your fits.  The fit description is
written to every log file and can be used to document features of
your current fitting model and how it relates to the development of
your fitting project.
</p>

</div>

<br />
<hr class=hide />
<hr class=bottomdivider />

<div class=bottombar>
  <div class=copyright>
  <table>
    <tr>
      <td colspan=2>
        <span class=program>DEMETER</span> is copyright &copy; 2009-2014 Bruce Ravel
        &mdash;
        This document is copyright &copy; 2014 Bruce Ravel
        <br />
      </td>
    </tr>
    <tr valign=middle>
      <td> 
           <a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="../../images/somerights20.png" width="88" height="31" alt="" border="0" /></a> &nbsp;&nbsp;&nbsp;
      </td>
      <td>
  	This document is licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/">
  	The Creative Commons Attribution-ShareAlike License</a>.
  	<br />
  	If <span class=program>DEMETER</span> and this document are useful to you, please consider
  	<a href="http://creativecommons.org/support/">supporting The Creative Commons</a>.
      </td>
    </tr>
  </table>
</div>
</div>
  </body>
</html>