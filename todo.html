<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Demeter/Athena/Artemis To Do List</title>
<!-- 2015-03-10 Tue 14:07 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Bruce Ravel" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="stylesheets/orgstyle.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/orgtocstyle.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/javascript" src="http://orgmode.org/mathjax/MathJax.js"></script>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
    MathJax.Hub.Config({
        // Only one of the two following lines, depending on user settings
        // First allows browser-native MathML display, second forces HTML/CSS
        //  config: ["MMLorHTML.js"], jax: ["input/TeX"],
            jax: ["input/TeX", "output/HTML-CSS"],
        extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js",
                     "TeX/noUndefined.js"],
        tex2jax: {
            inlineMath: [ ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"], ["\\begin{displaymath}","\\end{displaymath}"] ],
            skipTags: ["script","noscript","style","textarea","pre","code"],
            ignoreClass: "tex2jax_ignore",
            processEscapes: false,
            processEnvironments: true,
            preview: "TeX"
        },
        showProcessingMessages: true,
        displayAlign: "center",
        displayIndent: "2em",

        "HTML-CSS": {
             scale: 100,
             availableFonts: ["STIX","TeX"],
             preferredFont: "TeX",
             webFont: "TeX",
             imageFont: "TeX",
             showMathMenu: true,
        },
        MMLorHTML: {
             prefer: {
                 MSIE:    "MML",
                 Firefox: "MML",
                 Opera:   "HTML",
                 other:   "HTML"
             }
        }
    });
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Demeter/Athena/Artemis To Do List</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. top priorities</a>
<ul>
<li><a href="#sec-1-1">1.1. small things</a></li>
<li><a href="#sec-1-2">1.2. big things</a></li>
</ul>
</li>
<li><a href="#sec-2">2. larch chores</a>
<ul>
<li><a href="#sec-2-1">2.1. Larch v. Ifeffit problem areas</a></li>
</ul>
</li>
<li><a href="#sec-3">3. perl modules to evaluate</a></li>
<li><a href="#sec-4">4. things that need doing</a>
<ul>
<li><a href="#sec-4-1">4.1. Moose issues</a></li>
<li><a href="#sec-4-2">4.2. wx issues</a></li>
<li><a href="#sec-4-3">4.3. installation issues <code>[2/2]</code></a></li>
<li><a href="#sec-4-4">4.4. Demeter bugs, shortcomings, missing features  <code>[5/20]</code> <code>[25%]</code></a></li>
<li><a href="#sec-4-5">4.5. Athena</a></li>
<li><a href="#sec-4-6">4.6. raw data and plugins</a></li>
<li><a href="#sec-4-7">4.7. Windows issues <code>[4/9]</code> <code>[44%]</code></a></li>
<li><a href="#sec-4-8">4.8. Artemis</a></li>
<li><a href="#sec-4-9">4.9. Hephaestus</a></li>
<li><a href="#sec-4-10">4.10. Other object types <code>[0/3]</code></a></li>
</ul>
</li>
<li><a href="#sec-5">5. Atoms and Feff</a>
<ul>
<li><a href="#sec-5-1">5.1. CIF <code>[0/3]</code> <code>[0%]</code></a></li>
<li><a href="#sec-5-2">5.2. Atoms <code>[7/10]</code> <code>[70%]</code></a></li>
<li><a href="#sec-5-3">5.3. Feff</a></li>
</ul>
</li>
<li><a href="#sec-6">6. Ifeffit</a></li>
<li><a href="#sec-7">7. Weird stuff I'd prefer not to implement unless demanded</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> top priorities</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> small things</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li><code>[&#xa0;]</code> Dispersive algorithm, include in Athena
</li>
<li><code>[X]</code> S02 display issue
</li>
<li><code>[&#xa0;]</code> clone data sets and path lists in Artemis
</li>
<li><code>[X]</code> Artemis history improvments
</li>
<li><code>[X]</code> xkcd style plots, see
<a href="http://tex.stackexchange.com/questions/74878/create-xkcd-style-diagram-in-tex">http://tex.stackexchange.com/questions/74878/create-xkcd-style-diagram-in-tex</a>
and <a href="http://rfonseca.github.io/xkcd-gnuplot/">http://rfonseca.github.io/xkcd-gnuplot/</a> and
<a href="http://antiyawn.com/uploads/humorsans.html">http://antiyawn.com/uploads/humorsans.html</a>
</li>
<li><code>[&#xa0;]</code> plot key for neg part of envelope is incorrect
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> big things</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li><code>[X]</code> fuzzy over sites
</li>
<li><code>[&#xa0;]</code> switch .prj to json
</li>
<li><code>[&#xa0;]</code> 5 and 6 legged paths
</li>
<li><code>[&#xa0;]</code> PCA improvements
</li>
<li><code>[&#xa0;]</code> feff8.5L
</li>
<li><code>[&#xa0;]</code> persistance of analysis methods in Athena
This can be implemented in the same way I implemented XDI
persistance &#x2013; for each group, serialize a blessed scalar and
write that to the record
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> larch chores</h2>
<div class="outline-text-2" id="text-2">
<ul class="org-ul">
<li><code>[X]</code> XDI headers and saving current with larch
</li>
<li><code>[X]</code> finsh Athena templates, including recently added ones (e.g. MEE templates, pixel)
</li>
<li><code>[&#xa0;]</code> start work on Artemis-related templates
</li>
<li><code>[&#xa0;]</code> kaiser vs. kaiser-bessel
</li>
<li><code>[&#xa0;]</code> use of stddev array in LCF is slightly incorrect, needs to be sensitive to the sapce in which the merge was made.
</li>
<li><code>[&#xa0;]</code> <del>command line in command buffer in A&amp;A</del> &amp; capture feedback from server
</li>
<li><code>[X]</code> testing of Larch + XDI &amp; of Larch - XDI
</li>
<li><code>[&#xa0;]</code> empirical standard generation in Athena
</li>
</ul>
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Larch v. Ifeffit problem areas</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li>Xray/Absorption/CL.pm &#x2013; this needs to be refactored
</li>
<li>t/ tests need to be tested with Larch
</li>
<li>in particular, need a t/001<sub>larch</sub>.t test (with an appropriate SKIP in case of no server)
</li>
<li>"nergy": XDAC vs. Ifeffit.  Larch will see "energy".
<ul class="org-ul">
<li>Perhaps a larch or ifeffit configuration attribute
</li>
<li>ack-ing for '\bnergy\b' yields:
<pre class="example">
examples/recipes/MultiChannel/mc2prj
54:  #my @energy    = $mc-&gt;get_array('nergy');

lib/Demeter/Plugins/10BMMultiChannel.pm
53:    my @energy = $mc-&gt;get_array('nergy');

lib/Demeter/Plugins/X23A2MED.pm
324:becomes "nergy".  Go figure.

lib/Demeter/Plugins/x23a2med.demeter_conf
10:default=nergy
</pre>
</li>
</ul>
</li>
<li>Need to add Larch copyright statement throughout
<pre class="example">
##             Larch is copyright (c) 2013 Matt Newville, Tom Trainer
##                                 http://xraypy.github.io/xraylarch/
</pre>
</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> perl modules to evaluate</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li>Path:Tiny to replace <a href=":Spec">:Spec</a>
</li>
<li>Test::Class and Test::Class::Moose
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> things that need doing</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> Moose issues</h3>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> wx issues</h3>
<div class="outline-text-3" id="text-4-2">
<ul class="org-ul">
<li><code>[X]</code> why does Wx::FileDialog with <code>wxFD_OVERWRITE_PROMPT</code> style not work correctly?
see <a href="https://bugzilla.gnome.org/show_bug.cgi?id=631908">https://bugzilla.gnome.org/show_bug.cgi?id=631908</a> and 
<a href="https://bugs.launchpad.net/ubuntu/+source/gtk+2.0/+bug/558674">https://bugs.launchpad.net/ubuntu/+source/gtk+2.0/+bug/558674</a> for more info
Turns out this is a gtk problem &#x2013; I can make the same thing happen with Firefox!
<b>This is now deprecated.</b>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> installation issues <code>[2/2]</code></h3>
<div class="outline-text-3" id="text-4-3">
<ul class="org-ul">
<li><code>[X]</code> Relocation needs testing on Windows, need to make sure that
the executables can all be found,
</li>
<li><code>[X]</code> also need to be able to find all of Ifeffit CL and CAPS files.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> Demeter bugs, shortcomings, missing features  <code>[5/20]</code> <code>[25%]</code></h3>
<div class="outline-text-3" id="text-4-4">
<ul class="org-ul">
<li><code>[&#xa0;]</code> in <code>Demeter::Data::IO::save_many</code>, why doesn't updating in n specifying "background" not work to bring data up to date?  (fft, i.e. doing autobk, does work)
</li>
<li><code>[&#xa0;]</code> tie multiple groups together (e.g. MED data with reference)
</li>
<li><code>[&#xa0;]</code> add a record to an existing Athena project file
</li>
<li><code>[&#xa0;]</code> clnorm + Julia and Jingen's MBACK replacement
</li>
<li><code>[&#xa0;]</code> Data object should note that datatype is xanes and not compute fbkg since the bkg array does not exist
</li>
<li><code>[&#xa0;]</code> cannot specify title for stddev and variance plots
</li>
<li><code>[&#xa0;]</code> Demeter command backend needs lots of polishing
</li>
<li><code>[&#xa0;]</code> 3rd derivative
</li>
<li><code>[&#xa0;]</code> SDK: better documentation for freeze/thaw//serialize/deserialize
</li>
<li><code>[&#xa0;]</code> error check deserialization for all objects, verify that it is a yaml or whatnot, return 0 if not
</li>
<li><code>[&#xa0;]</code> OpenBabel interface, tied into Feff
</li>
<li><code>[&#xa0;]</code> MRU lists and unicode, unicode-y file paths fail the -e test at Demeter::MRU line 77
</li>
<li><code>[&#xa0;]</code> Feff8 integration
</li>
<li><code>[&#xa0;]</code> Use PDL in pathfinder
</li>
<li><code>[&#xa0;]</code> background groups for AXAFS
</li>
<li><code>[X]</code> Add tests to Path ranking framework (Karine Provost's idea, implemented in Demeter)
</li>
<li><code>[X]</code> serialize VPath, put VPath into dpj and fpj files
</li>
<li><code>[X]</code> set E0 to peak of white line
</li>
<li><code>[X]</code> need to disable indicators during the Rk plot.  Indicators (as implemented) are not consistent with multiplot
</li>
<li><code>[X]</code> Plucking from gnuplot really sucks
</li>
</ul>
</div>
</div>



<div id="outline-container-sec-4-5" class="outline-3">
<h3 id="sec-4-5"><span class="section-number-3">4.5</span> Athena</h3>
<div class="outline-text-3" id="text-4-5">
</div><div id="outline-container-sec-4-5-1" class="outline-4">
<h4 id="sec-4-5-1"><span class="section-number-4">4.5.1</span> needs testing <code>[/]</code></h4>
</div>

<div id="outline-container-sec-4-5-2" class="outline-4">
<h4 id="sec-4-5-2"><span class="section-number-4">4.5.2</span> Tools <code>[22/25]</code> <code>[88%]</code></h4>
<div class="outline-text-4" id="text-4-5-2">
<ol class="org-ol">
<li><code>[X]</code> main
</li>
<li><code>[X]</code> calibrate
</li>
<li><code>[X]</code> align
</li>
<li><code>[X]</code> deglitch
</li>
<li><code>[X]</code> <i>smooth with Savitsky-Golay filter</i> <a href="notes/sgolay.m">Matlab routine for SG filter</a>; <del>smooth with boxcar average <a href="http://comments.gmane.org/gmane.comp.lang.perl.pdl.general/6333">See this</a></del>
</li>
<li><code>[X]</code> truncate
</li>
<li><code>[X]</code> rebin
</li>
<li><code>[X]</code> convolution and noise
</li>
<li><code>[&#xa0;]</code> <i>deconvolution</i>
</li>
<li><code>[X]</code> self absorption
</li>
<li><code>[X]</code> copy series
</li>
<li><code>[X]</code> data summation
</li>

<li><code>[&#xa0;]</code> dispersive
</li>
<li><code>[X]</code> multi-electron removal
</li>

<li><code>[X]</code> LCF
</li>
<li><code>[X]</code> <i>PCA</i> <a href="http://mailman.jach.hawaii.edu/pipermail/perldl/2006-August/000588.html">PCA from PDL mail archives</a>
</li>
<li><code>[X]</code> Peak fit
</li>
<li><code>[X]</code> log ratio
</li>
<li><code>[X]</code> difference
</li>

<li><code>[&#xa0;]</code> explain FT
</li>
<li><code>[X]</code> disk watcher
</li>
<li><code>[X]</code> XDI
</li>
<li><code>[X]</code> journal
</li>
<li><code>[X]</code> plugins
</li>
<li><code>[X]</code> preference 
</li>
</ol>
</div>

<ol class="org-ol"><li>Requires PDL<br  /><div class="outline-text-5" id="text-4-5-2-1">
<ol class="org-ol">
<li>smoothing by S-G (done with Larch)
</li>
<li>deconvolution
</li>
<li><del>PCA</del>
</li>
<li><del>boxcar average</del>
</li>
</ol>
</div>
</li></ol>
</div>

<div id="outline-container-sec-4-5-3" class="outline-4">
<h4 id="sec-4-5-3"><span class="section-number-4">4.5.3</span> needs doing <code>[4/15]</code> <code>[26%]</code></h4>
<div class="outline-text-4" id="text-4-5-3">
<ul class="org-ul">
<li><code>[&#xa0;]</code> beter error handling in plugins &#x2013; specifically need to do a
better job of trapping errors in the <code>fix</code> method.  Perhaps
<code>fix</code> should always be called within an <code>eval</code>?
</li>
<li><code>[X]</code> report to a text dialog on values of a particular parameter for all/marked groups
</li>
<li><code>[&#xa0;]</code> implement megamerge in Athena
</li>
<li><code>[X]</code> links to documentation on each tool
</li>
<li><code>[X]</code> <b>Main window</b> <code>[3/3]</code> <code>[100%]</code>
<ul class="org-ul">
<li><code>[X]</code> <del>SpinCtrl for use with Rbkg</del>, event handler triggered twice on first use (found work-around)
</li>
<li><code>[X]</code> <del>SpinCtrl for use with bkg<sub>spl1</sub>/2 (I find this to be a much worse idea)</del> (not implemented)
</li>
<li><code>[X]</code> push bkg<sub>e0</sub> <i>algorithm</i> onto marked/all groups and recalculate
</li>
</ul>
</li>
<li><code>[&#xa0;]</code> <b>Convolve/noise tool</b>
<ul class="org-ul">
<li>add noise to chi data
</li>
</ul>
</li>
<li><code>[&#xa0;]</code> <b>Difference tool</b> <code>[0/1]</code>
<ul class="org-ul">
<li><code>[&#xa0;]</code> difference in k
</li>
</ul>
</li>
<li><code>[&#xa0;]</code> <b>LCF tool</b> <code>[0/4]</code>
<ul class="org-ul">
<li><code>[&#xa0;]</code> persistance of LCF results &#x2013; <i>use serialized blessed scalar, like XDI</i>
</li>
<li><code>[&#xa0;]</code> satisfying both inclusive and unity can be trouble for
poorly normalized data and/or poor standard selection
(see email from Jack Hitch)
</li>
<li><code>[&#xa0;]</code> compute R-factor in k or R using fit from energy.  (see
mail from Scott 7 January 2012)
</li>
<li><code>[&#xa0;]</code> boundary on E0 shift.  See email from Dean Hesterburg from 30 May, 2014
</li>
</ul>
</li>
<li><code>[-]</code> <b>PCA tool</b> <code>[2/11]</code>
<ul class="org-ul">
<li><code>[&#xa0;]</code> test setection against analysis space.  do the right thing
with xanes data and chi(k) analysis or chi(k) data and energy
analysis
</li>
<li><code>[&#xa0;]</code> persistance &#x2013; what's the value of persistance for PCA?
</li>
<li><code>[&#xa0;]</code> manual entry of component coefficients (??)
</li>
<li><code>[&#xa0;]</code> cluster analysis, select two components and plot the
associations of each data with those two in a scatter plot.
</li>
<li><code>[&#xa0;]</code> worry about "def group.tt" line being too long in tt template
</li>
<li><code>[&#xa0;]</code> plotting in pgplot
</li>
<li><code>[&#xa0;]</code> error analysis, RET, SPOIL, etc, determination of number
of components, validity of TT, etc
</li>
<li><code>[&#xa0;]</code> specialized file headers for reconstruction and tt save files
</li>
<li><code>[&#xa0;]</code> pluck buttons for analysis range don't work
</li>
<li><code>[X]</code> save eigenvectors to a file
</li>
<li><code>[X]</code> if the marked groups are changed after performing the PCA
but before reconstructing data, the plot will fail with
and exception.  need to save the list of data that went
into the PCA and check against that rather than the
current list of marked groups
</li>
</ul>
</li>
<li><code>[-]</code> <b>Peakfit tool</b> <code>[7/12]</code>
<ul class="org-ul">
<li><code>[&#xa0;]</code> persistance &#x2013; <i>use serialized blessed scalar, like XDI</i>
</li>
<li><code>[&#xa0;]</code> verify that fit is sensible (ndata/ninfo vs nparam)
</li>
<li><code>[&#xa0;]</code> broken using XES
</li>
<li><code>[&#xa0;]</code> explicitly state ninfo and epsilon
</li>
<li><code>[&#xa0;]</code> for Larch, bounds on parameters
</li>
<li><code>[X]</code> implement pseudovoight
</li>
<li><code>[X]</code> verify that all centroids are within (or near) fit range
</li>
<li><code>[X]</code> behavior when changing data
</li>
<li><code>[X]</code> pluck fit ranges
</li>
<li><code>[X]</code> <del>ndata is full data range rather than fit range with Fityk backend</del> (igoring this)
</li>
<li><code>[X]</code> <del>explicitly set title of plot</del> (i can live with this)
</li>
<li><code>[X]</code> sequence over marked groups
</li>
</ul>
</li>
<li><code>[&#xa0;]</code> <b>Data watcher</b>
</li>
<li><code>[-]</code> <b>MEE tool</b> <code>[1/3]</code>
<ul class="org-ul">
<li><code>[X]</code> arctan removal
</li>
<li><code>[&#xa0;]</code> other algorithms from the literature
</li>
<li><code>[&#xa0;]</code> good guesses for parameters &#x2013; at least a pluck button for shift
</li>
</ul>
</li>
<li><code>[&#xa0;]</code> <b>Plot menu</b>
<ul class="org-ul">
<li>zoom/unzoom/cursor for pgplot
</li>
</ul>
</li>
<li><code>[X]</code> <b>metadata tool</b>
</li>
<li><code>[&#xa0;]</code> <b>Data summer</b>
<ul class="org-ul">
<li>push<sub>values</sub> method needs to update menus to reflect changes in group list
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-4-6" class="outline-3">
<h3 id="sec-4-6"><span class="section-number-3">4.6</span> raw data and plugins</h3>
<div class="outline-text-3" id="text-4-6">
<ul class="org-ul">
<li>Need to expand the filetype system by examining data from <b>all</b> the XAS beamlines in the world.  Yes &#x2026; all of them.
</li>
<li>solicit help from the facility representatives
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4-7" class="outline-3">
<h3 id="sec-4-7"><span class="section-number-3">4.7</span> Windows issues <code>[4/9]</code> <code>[44%]</code></h3>
<div class="outline-text-3" id="text-4-7">
<ul class="org-ul">
<li><code>[X]</code> parameter group context menus don't get posted (see
<a href="http://www.nntp.perl.org/group/perl.wxperl.users/2011/03/msg7929.html">http://www.nntp.perl.org/group/perl.wxperl.users/2011/03/msg7929.html</a>)
</li>
<li><code>[&#xa0;]</code> the frickin' Gnuplot error logs seem to remain open and locked
on Windows when a crash happens
</li>
<li><code>[&#xa0;]</code> status bar does not get color for wait or error messages
<i>this may be unfixable, see</i>
<a href="http://www.nntp.perl.org/group/perl.wxperl.users/2011/04/msg7943.html">http://www.nntp.perl.org/group/perl.wxperl.users/2011/04/msg7943.html</a>
</li>
<li><code>[&#xa0;]</code> The atoms panel background color is too light.  Which window
needs its BackgroundColour set to wxNullColour?
</li>
<li><code>[&#xa0;]</code> clampbox does not get enabled/disabled explicitly, is this
another aspect of StaticBox that is different on Windows? (see
link above)
</li>
<li><code>[&#xa0;]</code> Need to test that paths with (parens|commas|quotes) get
followed correctly in all situations
</li>
<li><code>[X]</code> Initial initialization of gnuplot and feff executable
locations in the situation where the package has been moved or
reinstalled such that and old demeter.ini still exists
</li>
<li><code>[X]</code> relocation of Strawberry leaves Ifeffit unable to find phase
shift and CL tables (use an ENV variable?)
</li>
<li><code>[X]</code> The Strawberry+Demeter package does not coexist at all with
ActivePerl.  Best solution is to generate ppd for Demeter
armed with all dependencies.  Would need to compile wrapper
and somehow get gnuplot on the machine. <b>Solved by explicitly
calling Strawberry in the .bat files</b>
</li>
</ul>
</div>
</div>


<div id="outline-container-sec-4-8" class="outline-3">
<h3 id="sec-4-8"><span class="section-number-3">4.8</span> Artemis</h3>
<div class="outline-text-3" id="text-4-8">
</div><div id="outline-container-sec-4-8-1" class="outline-4">
<h4 id="sec-4-8-1"><span class="section-number-4">4.8.1</span> Artemis bugs and missing features <code>[0/8]</code>  <code>[0%]</code></h4>
<div class="outline-text-4" id="text-4-8-1">
<ul class="org-ul">
<li><code>[&#xa0;]</code> More work on history, see Anthony Ardizzi's issue
</li>
<li><code>[&#xa0;]</code> Reorganize lists, move individual items up and down, move
blocks up and down, Path list, <del>Plot list</del>
</li>
<li><code>[&#xa0;]</code> do SSPaths get serialized and deserialized with the pointers
to the feff calculation set correctly and no additional
folders being created in stash (as was the case for FSPath)?
</li>
<li><code>[&#xa0;]</code> implementing derivative of phase plotting would require
proper handling of this signal in the bkg, residual, and
running R-factor plots.  Also probably want to disallow it
for R123 plots.
</li>
<li><code>[&#xa0;]</code> better way of moving an empirical standard from Athena to
Artemis &#x2013; should be able to import it directly from the
athena project file.
</li>
<li><code>[&#xa0;]</code> Display of S02 glyph on some Windows is broken, breaking S02 context menu
</li>
<li><code>[&#xa0;]</code> Eric says: "if u use the automatic choice of parameters for
the paths, in combination with a few quick first shell models
and an imported feff.inp the whole thing runs in trouble. I
don't really expect name collisions, but it seems to loose
track between all the feff runs."  <i>This is a bit unclear&#x2026;</i>
</li>
<li><code>[&#xa0;]</code> Path drag and drop <code>[0/3]</code>
<ul class="org-ul">
<li><code>[&#xa0;]</code> DND of an SSPath does not work correctly
</li>
<li><code>[&#xa0;]</code> DND of FPath also broken
</li>
<li><code>[&#xa0;]</code> DND of selection (currently only one at a time)
</li>
</ul>
</li>
</ul>
</div>

<ol class="org-ol"><li>Project <code>[2/4]</code><br  /><div class="outline-text-5" id="text-4-8-1-1">
<ul class="org-ul">
<li><code>[X]</code> VPaths to/from project file
</li>
<li><code>[X]</code> SSPaths not saved/restored properly?
</li>
<li><code>[&#xa0;]</code> Indicators to/from project file
</li>
<li><code>[&#xa0;]</code> GDS objects get created with same groupname over and over as
they are used in fits in the history
</li>
</ul>
</div>
</li>

<li>Advanced fitting<br  /><ol class="org-ol"><li>MFC <code>[0/1]</code><br  /><div class="outline-text-6" id="text-4-8-1-2-1">
<ul class="org-ul">
<li><code>[&#xa0;]</code> Balance interstitial energies for MFC fits
</li>
</ul>
</div>
</li>
<li>MDS &amp; Fit Sequence <code>[0/4]</code><br  /><div class="outline-text-6" id="text-4-8-1-2-2">
<ul class="org-ul">
<li><code>[&#xa0;]</code> Import mutiple data sets from an Athena project file
</li>
<li><code>[&#xa0;]</code> feffit.inp import: needs testing; MDS that is not merely MKW
</li>
<li><code>[&#xa0;]</code> Clone data sets such that the path list gets replicated efficiently (i.e. for MDS fits)
</li>
<li><code>[&#xa0;]</code> Clone all/marked paths between data sets
</li>
</ul>
</div>
</li></ol>
</li></ol>
</div>


<div id="outline-container-sec-4-8-2" class="outline-4">
<h4 id="sec-4-8-2"><span class="section-number-4">4.8.2</span> Histograms <code>[12/14]</code> <code>[85%]</code></h4>
<div class="outline-text-4" id="text-4-8-2">
<ul class="org-ul">
<li><code>[X]</code> Triangle object
<ul class="org-ul">
<li>yields a DS path and a TS path
</li>
<li>by R and theta
</li>
<li><del>by a trio of Cartesian coordinates</del>
</li>
</ul>
</li>
<li><code>[&#xa0;]</code> triangle histogram
</li>
<li><code>[-]</code> <b>Error checking</b> in Artemis, e.g. check that there is at least one bin in the supplied range(s)
<ul class="org-ul">
<li><code>[X]</code> SS
</li>
<li><code>[&#xa0;]</code> ncl
</li>
<li><code>[&#xa0;]</code> thru
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-4-9" class="outline-3">
<h3 id="sec-4-9"><span class="section-number-3">4.9</span> Hephaestus</h3>
<div class="outline-text-3" id="text-4-9">
<p>
More standards!!
</p>
</div>
</div>

<div id="outline-container-sec-4-10" class="outline-3">
<h3 id="sec-4-10"><span class="section-number-3">4.10</span> Other object types <code>[0/3]</code></h3>
<div class="outline-text-3" id="text-4-10">
<ul class="org-ul">
<li><code>[&#xa0;]</code> Structural Units
<ul class="org-ul">
<li>Extension of VPath
</li>
<li>Store GDS, feff, and path objects in a zip file.
</li>
<li>On import, mark GDS parameters as merge if in conflict
</li>
</ul>
</li>
<li><code>[&#xa0;]</code> MSPaths
<ul class="org-ul">
<li>Much like SSPath, make an arbitrary n-legged path
</li>
</ul>
</li>
<li><code>[&#xa0;]</code> Nearly collinear paths, ThreeBody
<ul class="org-ul">
<li>Extension of VPath
</li>
<li>need to worry about load order in Demeter.pm
</li>
<li>Define a three body configuration, generate its 4-legged path and a sequence of three-legged paths along with a mixing parameter.
</li>
<li>It will take a single set of path parameters that are pushed onto the generated Path objects, except for the amplitude, which will be computed from the mixing parameter.
</li>
<li>This is a single object for the user to interact with which expands into 2 or 3 3-legged paths and a single 4-legged path
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Atoms and Feff</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> CIF <code>[0/3]</code> <code>[0%]</code></h3>
<div class="outline-text-3" id="text-5-1">
<ul class="org-ul">
<li><code>[&#xa0;]</code> CIF issue: CIF file with "<sub>eof</sub>" token at end of file, as in <a href="notes/H16PW12O46.cif">this cif file</a>
</li>
<li><code>[&#xa0;]</code> Handle CIF import problems more gracefully (See Shelly's other email from 17 June 2011)
</li>
<li><code>[&#xa0;]</code> CIF errors are not handled gracefully (e.g. multiple occupancy)
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2"><span class="section-number-3">5.2</span> Atoms <code>[7/10]</code> <code>[70%]</code></h3>
<div class="outline-text-3" id="text-5-2">
<ul class="org-ul">
<li><code>[X]</code> Setting of Ba2Co9O14 (Chanapa Kongmark), also some problem with ZnFe2O4
</li>
<li><code>[X]</code> should be a way to insert tabulated shift vector, if it exists
</li>
<li><code>[X]</code> handle ": setting" notation: <code>:R</code>, <code>:H</code>, <code>:1</code>, <code>:2</code> <a href="http://research.cems.umn.edu/morse/code/svn/pscf/doc/man/sec.php?section=Appendix:%2520Space%2520Groups&">(for example)</a>
<ul class="org-ul">
<li><code>:1</code> and <code>:2</code> seem to have to do with whether the shift vector should be used, see <a href="examples/atoms/ZnFe2O4.cif">ZnFe2O4.cif</a> and use the shift vector
</li>
<li><code>:R</code>, <code>:H</code> specify rhombohedral or tri/hexagonal setting
</li>
</ul>
</li>
<li><code>[X]</code> Lepidocrocite issue (amam gets changed to cmcm)
</li>
<li><code>[&#xa0;]</code> 2 sites at the same position with occupancies &lt;1.  see file above for an example
</li>
<li><code>[&#xa0;]</code> George Sterbinsky's <a href="http://millenia.cars.aps.anl.gov/pipermail/ifeffit/2011-May/009936.html">mailing list post</a> that turned out to be about 
atoms' sphere and rhomboid in a non-orthogonal group
</li>
<li><code>[&#xa0;]</code> very confusing error message when core is not a tag
</li>
<li><code>[X]</code> Shell tags in the feff.inp ATOMS list
</li>
<li><code>[X]</code> Rhombic groups seem not be handled properly.  This example fails to generate a subshell of 3 atoms at ~1.9A
<pre class="example">
title name:     Fe2O3  hematite
space  R -3 c
a    = 5.0380   b    = 5.0380   c    = 13.7720
rmax = 6.00     core = Fe1
atom
  Fe     0.00000   0.00000   0.35530  Fe1
  O      0.30590   0.00000   0.25000  O1
</pre>
</li>
<li><code>[X]</code> This input data fails
<pre class="example">
title formula:  LaCoO3
title refer1:  PRB V. 66 P. 094408 (2002)
title notes:   T = 300 K
space  r -3 c
a = 5.44864       c = 13.1035
rmax = 6.00       core = Co1
atom
  Co     0.00000   0.00000   0.00000  Co1
  La     0.00000   0.00000   0.25000  La1
  O      0.55032   0.00000   0.25000  O1
</pre>
</li>
</ul>
</div>
</div>


<div id="outline-container-sec-5-3" class="outline-3">
<h3 id="sec-5-3"><span class="section-number-3">5.3</span> Feff</h3>
<div class="outline-text-3" id="text-5-3">
</div><div id="outline-container-sec-5-3-1" class="outline-4">
<h4 id="sec-5-3-1"><span class="section-number-4">5.3.1</span> Feff8 is unsupported except as an Atoms output type</h4>
<div class="outline-text-4" id="text-5-3-1">
<p>
<a href="https://github.com/xraypy/feff85exafs">https://github.com/xraypy/feff85exafs</a>
</p>
</div>
</div>

<div id="outline-container-sec-5-3-2" class="outline-4">
<h4 id="sec-5-3-2"><span class="section-number-4">5.3.2</span> Polarization and ellipticity</h4>
</div>

<div id="outline-container-sec-5-3-3" class="outline-4">
<h4 id="sec-5-3-3"><span class="section-number-4">5.3.3</span> Five and six legged paths</h4>
<div class="outline-text-4" id="text-5-3-3">
<ol class="org-ol">
<li><a href="examples/h12213.cif">This CIF file</a> is an example of a structure that has five and six
legged nearly collinear scattering paths at around 4 Angstroms.  It
has metal atoms bridged by cyanide (CN), like Prussian Blue (see for
instance <a href="http://dx.doi.org/10.1021/ic50177a008">http://dx.doi.org/10.1021/ic50177a008</a>)
</li>

<li>Another example: 1-4 dibromo benzene has Br scatterers across a
benzene ring which can be seen at about 6 Angstroms, along with
3s, 4s, 5s, and 6s:
<pre class="example">
       C-C
      /   \
Br - C     C - Br
      \   /
       C-C
</pre>
</li>

<li>In fact, any benzene ligand has important 5s and 6s going around
the ring.  There are various Abs-C-C 3s, 4s, 5s, and 6s.
<pre class="example">
        C-C
       /   \
Abs - C     C 
       \   /
        C-C
</pre>
</li>

<li>Metals out to 8 Angstroms require 5s and 6s
</li>
</ol>
</div>
</div>
</div>
</div>



<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Ifeffit</h2>
<div class="outline-text-2" id="text-6">
<p>
In file <code>src/lib/iff_show.f</code>, change line 431 from 
</p>

<pre class="example">
character*(*) s, t , messg*256
</pre>

<p>
to
</p>

<pre class="example">
character*(*) s, t , messg*1024
</pre>

<p>
<del>Also need to specify locations of CL data and phase shift tables via an ENV variable</del>
</p>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> Weird stuff I'd prefer not to implement unless demanded</h2>
<div class="outline-text-2" id="text-7">
<ol class="org-ol">
<li>xfit output (only used by women who glow and men who plunder)
</li>
<li>csv and text report (excel <b>is</b> implemented)
</li>
<li>point finder (this was Shelly's request)
</li>
<li>session defaults (did anyone but me actually use these?)
</li>
<li>set to standard (i.e. the one that is marked) &#x2013; confusing and
little used
</li>
<li>tie relative energy value to changes in E0 (this was something
Jeremy requested originally)
</li>
<li><del>set e0 by algorithm for all and marked &#x2013; also confusing and little used</del> (implemented)
</li>
<li><del>plot margin lines for deglitching, deglitch many points (this was something that was most useful for a timing problem at 10ID that no longer exists)</del>
    (implemented)
</li>
<li>preprocessing truncation and deglitching (truncation might be
worth implementing)
</li>
</ol>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Bruce Ravel</p>
<p class="date">Created: 2015-03-10 Tue 14:07</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.1 (<a href="http://orgmode.org">Org</a> mode 8.2.7c)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
