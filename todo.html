<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
lang="en" xml:lang="en">
<head>
<title>Demeter To Do List (also Athena and Artemis)</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2011-05-03 17:39:55 EDT"/>
<meta name="author" content="Bruce Ravel"/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color:lightblue; font-weight:normal }
  .target { }
  .timestamp { color: grey }
  .timestamp-kwd { color: CadetBlue }
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*/-->
</script>
</head><body>
<h1 class="title">Demeter To Do List (also Athena and Artemis)</h1>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 things that need doing </a>
<ul>
<li><a href="#sec-1.1">1.1 wx issues </a></li>
<li><a href="#sec-1.2">1.2 installation issues [1/1] </a></li>
<li><a href="#sec-1.3">1.3 Demeter bugs and shortcomings  [4/17] [23%] </a></li>
<li><a href="#sec-1.4">1.4 Athena </a></li>
<li><a href="#sec-1.5">1.5 Windows issues [7/14]</a></li>
<li><a href="#sec-1.6">1.6 Artemis </a></li>
<li><a href="#sec-1.7">1.7 Hephaestus [1/1] </a></li>
<li><a href="#sec-1.8">1.8 Other object types [1/3] </a></li>
<li><a href="#sec-1.9">1.9 Windows</a></li>
</ul>
</li>
<li><a href="#sec-2">2 Weird stuff I'd prefer not to implement unless demanded </a></li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">1 things that need doing </h2>
<div id="text-1">



</div>

<div id="outline-container-1.1" class="outline-3">
<h3 id="sec-1.1">1.1 wx issues </h3>
<div id="text-1.1">

<ul>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> why does Wx::FileDialog with <code>wxFD_OVERWRITE_PROMPT</code> style not work correctly?
see <a href="https://bugzilla.gnome.org/show_bug.cgi?id=631908">https://bugzilla.gnome.org/show_bug.cgi?id=631908</a> and 
<a href="https://bugs.launchpad.net/ubuntu/+source/gtk+2.0/+bug/558674">https://bugs.launchpad.net/ubuntu/+source/gtk+2.0/+bug/558674</a> for more info
Turns out this is a gtk problem &ndash; I can make the same thing happen with Firefox!

</li>
</ul>
</div>

</div>

<div id="outline-container-1.2" class="outline-3">
<h3 id="sec-1.2">1.2 installation issues [1/1] </h3>
<div id="text-1.2">

<ul>
<li>
<b>[X]</b> jpg needs to be a Module::Build <code>build_element</code>, but there are too many such files in the distro .. not all serve a purpose

</li>
</ul>
</div>

</div>

<div id="outline-container-1.3" class="outline-3">
<h3 id="sec-1.3">1.3 Demeter bugs and shortcomings  [4/17] [23%] </h3>
<div id="text-1.3">

<ul>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> in <code>Demeter::Data::IO::save_many</code>, why doesn't updating in n specifying "background" not work to bring data up to date?  (fft, i.e. doing autobk, does work)
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> <del>serialize VPath</del>, put VPath into <del>dpj and</del> fpj files
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> tie multiple groups together
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> add a record to an existing Athena project file
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> set E0 to peak of white line
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> clnorm + Julia and Jingen's MXAN replacement
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> Data object should note that datatype is xanes and not compute fbkg since the bkg array does not exist
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> cannot specify title for stddev and variance plots
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> Demeter command backend needs polishing
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> we seem not to have a normalized group (i.e. plot the same as mu or norm)
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> 3rd derivative
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> SDK: better documentation for freeze/thaw//serialize/deserialize
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> error check deserialization for all objects, verify that it is a yaml or whatnot, return 0 if not
</li>
<li>
<b>[X]</b> SDK: "It  seems that if you use the old fashioned GSD string you can have capitals
in your variable names but if you use the fancy simpleGDS you can not.
</li>
<li>
<b>[X]</b> SDK: something like <code>find_path</code> method, but which find the path closest to some R value
</li>
<li>
<b>[X]</b> autogenerate workspace for Feff objects (i.e. something in stashdir)
</li>
<li>
<b>[X]</b> better detection of chi ascii data in case of 
<code>$data = Demeter::Data-&gt;new(file=&gt;"foo.chi");</code>



</li>
</ul>
</div>

</div>

<div id="outline-container-1.4" class="outline-3">
<h3 id="sec-1.4">1.4 Athena </h3>
<div id="text-1.4">


<ul>
<li id="sec-1.4.1">Tools [16/23] [69%] <br/>
<ul>
<li>
<b>[X]</b> main
</li>
<li>
<b>[X]</b> calibrate
</li>
<li>
<b>[X]</b> align
</li>
<li>
<b>[X]</b> deglitch
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> <i>smooth with Savitsky-Golay filter</i> <a href="notes/sgolay.m">Matlab routine for SG filter</a> 
</li>
<li>
<b>[X]</b> truncate
</li>
<li>
<b>[X]</b> rebin
</li>
<li>
<b>[X]</b> convolution and noise
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> <i>deconvolution</i>
</li>
<li>
<b>[X]</b> self absorption
</li>
<li>
<b>[X]</b> copy series

</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> dispersive
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> multi-electron removal

</li>
<li>
<b>[X]</b> LCF
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> <i>PCA</i> <a href="http://mailman.jach.hawaii.edu/pipermail/perldl/2006-August/000588.html">PCA from PDL mail archives</a>
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> Peak fit
</li>
<li>
<b>[X]</b> log ratio
</li>
<li>
<b>[X]</b> difference

</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> explain FT
</li>
<li>
<b>[X]</b> XDI
</li>
<li>
<b>[X]</b> journal
</li>
<li>
<b>[X]</b> plugins
</li>
<li>
<b>[X]</b> preference 

</li>
<li id="sec-1.4.1.1">Requires PDL &nbsp;&nbsp;&nbsp;<span class="tag">PDL</span><br/>
<ol>
<li>
smoothing
</li>
<li>
deconvolution
</li>
<li>
PCA

</li>
</ol>
</li>
</ul>
</li>
<li id="sec-1.4.2">needs testing [0/2] <br/>
<ul>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> reference of another edge
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> keV data

</li>
</ul>
</li>
<li id="sec-1.4.3">needs doing [4/15] [26%] <br/>
<ul>
<li>
<b>[X]</b> deglitching crashes with gnuplot                                       :HUH:
</li>
<li>
<b>[X]</b> in project selection dialog, controls for entering a periodic
subset (i.e. every Nth record starting with the Jth record)
this would be useful for QXAS or dispersive data files with
many measurements.  regexp matching against names would also
be nice
</li>
<li>
<b>[X]</b> replot upon group selection, space is configurable (E, k, R, q, quad, k123, r123, i0/signal, none)
</li>
<li>
<b>[X]</b> column selection dialog is not remembering data numerator and
denominator selection
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> implement frozen groups
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> links to documentation on each tool
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> fix edge step button is not working
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> test preprocessing (I had a crash with all three preproc options selected for data with a reference):
<code>Can't call method "GetSelection" on an undefined value at /home/bruce/git/demeter/lib/Demeter/UI/Athena/IO.pm line 423.</code>
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> <b>Pluck buttons</b> [0/2]
<ul>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> implement everywhere needed
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> figure out cause of spurious error on Windows <code>failed to get data from the clipboard error -2147221040 openClipboard failed</code>
</li>
</ul>
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> <b>Convolve/noise tool</b>
<ul>
<li>
add noise to chi data
</li>
</ul>
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> <b>Difference tool</b> [0/3]
<ul>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> plot diff for marked groups
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> plot areas from marked groups
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> make difference groups from marked groups
</li>
</ul>
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> <b>LCF tool</b> [0/4]
<ul>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> make data group from fit (use InsertData method)
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> marked groups automation, display in fourth tab, excel output
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> plot in R for fit in k
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> persistance of LCF results
</li>
</ul>
</li>
<li>
[-] <b>Group list</b> [2/3]
<ul>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> reorganize list, keystroke | DnD
</li>
<li>
<b>[X]</b> left click on groups list should post group menu (others?)
</li>
<li>
<b>[X]</b> it needs to be impossible to select nothing in the group list
</li>
</ul>
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> <b>Plot menu</b>
<ul>
<li>
zoom/unzoom/cursor for pgplot
</li>
</ul>
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> <b>Help menu</b> [0/3]
<ul>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> demos
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> document
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> memory usage

</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

</div>

<div id="outline-container-1.5" class="outline-3">
<h3 id="sec-1.5">1.5 Windows issues [7/14] &nbsp;&nbsp;&nbsp;<span class="tag">Windows</span></h3>
<div id="text-1.5">

<ul>
<li>
<b>[X]</b> parameter group context menus don't get posted (see <a href="http://www.nntp.perl.org/group/perl.wxperl.users/2011/03/msg7929.html">http://www.nntp.perl.org/group/perl.wxperl.users/2011/03/msg7929.html</a>)
</li>
<li>
<b>[X]</b> ugly background colors on command and status buffer frames (particularly at bottom, also a problem in Artemis)
</li>
<li>
<b>[X]</b> raised text with data name in data frame
</li>
<li>
<b>[X]</b> InitialPage in path list does not get hidden properly
</li>
<li>
<b>[X]</b> colors missing in log file text
</li>
<li>
<b>[X]</b> log frame not displayed/refreshed properly after a fit
</li>
<li>
<b>[X]</b> Artemis key accellerators
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> spurious message from clipboard
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> the frickin' Gnuplot error logs seem to remain locked on Windows when a crash happens
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> status bar does not get color for wait or error messages <i>this may be unfixable, see</i> <a href="http://www.nntp.perl.org/group/perl.wxperl.users/2011/04/msg7943.html">http://www.nntp.perl.org/group/perl.wxperl.users/2011/04/msg7943.html</a>
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> ifeffit is currently compiled not knowing where to find the feff tables, so PC transforms are not possible.
in general, the compilation of Ifeffit needs to be better integrated into Strawberry.
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> The atoms panel background color is too light.  Which window needs its BackgroundColour set to wxNullColour?
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> clampbox does not get enabled/disabled explicitly, is this another aspect of StaticBox that is different on Windows? (see link above)
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> fpj file on Win seems to not get unpacked correctly     :Project:


</li>
</ul>
</div>

</div>

<div id="outline-container-1.6" class="outline-3">
<h3 id="sec-1.6">1.6 Artemis </h3>
<div id="text-1.6">

<ul>
<li id="sec-1.6.1">Artemis bugs and missing features [8/14]  [57%] <br/>
<ul>
<li>
<b>[X]</b> use text buffers as in Athena for TextEntryDialogs
</li>
<li>
<b>[X]</b> import an FPath from a yaml or from a project file, pathlist start page link for doing so
</li>
<li>
<b>[X]</b> should I clear out unfitted fit folders from project upon import?
</li>
<li>
<b>[X]</b> update pods for <code>Demeter::Feff::Histogram</code> and <code>Demeter::Feff::DL_POLY</code>
</li>
<li>
<b>[X]</b> Rename VPaths in VPath right click menu
</li>
<li>
<b>[X]</b> sending Ifeffit feedback to the buffer makes it unavailable for other purposes.  the big problem
is that correlations don't get written to the log file in Artemis (or in a script with <code>set_mode(screen=&gt;1)</code>,
for that matter&hellip;)
</li>
<li>
<b>[X]</b> fit history plotting tool is broken &ndash; it seems that previous
fits are not saved, instead current fit is plotted repeatedly
</li>
<li>
<b>[X]</b> fit numbering is wrong, should not increment if previous fit has fitted=0
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> what is the purpose of regenerate in fit deserialization?  in any case, need to fix group values <b>inside</b> yaml files
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> rename Atoms/Feff
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> Reorganize lists, move individual items up and down, move blocks up and down, Path list, <del>Plot list</del>
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> discarding last page and returning to initial page has an undefined value problem   :HUH:
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> status messages in Atoms/Feff frame do not get posted in Artemis status buffer
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> do SSPaths get serialized and deserialized with the pointers
to the feff calculation set correctly and no additional
folders being created in stash (as was the case for FSPath)?

</li>
<li id="sec-1.6.1.1">Project [0/2] <br/>
<ul>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> VPaths to project file
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> Indicators to project file

</li>
</ul>
</li>
<li id="sec-1.6.1.2">Advanced fitting &nbsp;&nbsp;&nbsp;<span class="tag">Advanced</span><br/>
<ul>
<li id="sec-1.6.1.2.1">MFC [0/1] <br/>
<ul>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> Balance interstitial energies for MFC fits
</li>
</ul>
</li>
<li id="sec-1.6.1.2.2">MDS &amp; Fit Sequence [0/3] <br/>
<ul>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> Import mutiple data sets from an Athena project file
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> feffit.inp import: needs testing; MDS that is not merely MKW
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> Clone data sets such that the path list gets replicated efficiently (i.e. for MDS fits)


</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li id="sec-1.6.2">Histograms [9/11] [81%] <br/>
<ul>
<li>
<b>[X]</b> sum histogram bins into a single chi(k) file
</li>
<li>
<b>[X]</b> convert chi(k) data to a mock feffNNNN.dat file
</li>
<li>
<b>[X]</b> Triangle object
<ul>
<li>
yields a DS path and a TS path
</li>
<li>
by R and theta
</li>
<li>
<del>by a trio of Cartesian coordinates</del>
</li>
</ul>
</li>
<li>
<b>[X]</b> bin nealy colinear configurations by R and theta and sum into a single chi(k)
</li>
<li>
<b>[X]</b> turn SS histogram into a rattle TS histogram
</li>
<li>
<b>[X]</b> three-body histogram from X &ndash; [+] &ndash; X configurations
</li>
<li>
<b>[X]</b> error check numbers before making histograms in Artemis.  it is possible to have value like "3.3."
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> check that there is at least one bin in the supplied range(s)
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> ipot=1 is hardwired in many places &ndash; generalize&hellip;.
</li>
<li>
<b>[X]</b> scatter plot of ncl distribution
</li>
<li>
<b>[X]</b> factor out DLPOLY dependence into a role so that other MD packages can be added more easily

</li>
</ul>
</li>
</ul>
</div>

</div>

<div id="outline-container-1.7" class="outline-3">
<h3 id="sec-1.7">1.7 Hephaestus [1/1] </h3>
<div id="text-1.7">

<ul>
<li>
<b>[X]</b> need to open prefs with root in place so they display correctly on windows as well

</li>
</ul>
</div>

</div>

<div id="outline-container-1.8" class="outline-3">
<h3 id="sec-1.8">1.8 Other object types [1/3] </h3>
<div id="text-1.8">

<ul>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> Structural Units
<ul>
<li>
Extension of VPath.  
</li>
<li>
Store GDS, feff, and path objects in a zip file.
</li>
<li>
On import, mark GDS parameters as merge if in conflict
</li>
</ul>
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> MSPaths
<ul>
<li>
Much like SSPath, make an arbitrary n-legged path
</li>
</ul>
</li>
<li>
<b>[X]</b> Nearly collinear paths
<ul>
<li>
Define a three body configuration, generate its 4-legged path and a sequence of three-legged paths along with a mixing parameter.
</li>
<li>
It will take a single set of path parameters that are pushed onto the generated Path objects, except for the amplitude, which will be computed from the mixing parameter.
</li>
<li>
This is a single object for the user to interact with which expands into 2 or 3 3-legged paths and a single 4-legged path



</li>
</ul>
</li>
</ul>
</div>

</div>

<div id="outline-container-1.9" class="outline-3">
<h3 id="sec-1.9">1.9 Windows &nbsp;&nbsp;&nbsp;<span class="tag">Windows</span></h3>
<div id="text-1.9">

<ul>
<li id="sec-1.9.1"><span class="done">DONE</span> non-ascii symbols <br/>
</li>
<li id="sec-1.9.2"><span class="done">DONE</span> Fix <a href="lib/Demeter/UI/Wx/CheckListBook.pm">CheckListBook</a> <br/>
The solution is shown at the end of Athena.pm.  Define new methods for
CheckBoxList which maintain an indexed list of groups rather than relying
upon client data, which simply doesn't work on Windows.




</li>
</ul>
</div>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">2 Weird stuff I'd prefer not to implement unless demanded </h2>
<div id="text-2">

<ol>
<li>
xfit output (only used by women who glow and men who plunder)
</li>
<li>
csv and text report (excel <b>is</b> implemented)
</li>
<li>
point finder (this was Shelly's request)
</li>
<li>
session defaults (did anyone but me actually use these?)
</li>
<li>
set to standard (i.e. the one that is marked) &ndash; confusing and
little used
</li>
<li>
tie relative energy value to changes in E0 (this was something
Jeremy requested originally)
</li>
<li>
set e0 by algorithm for all and marked &ndash; also confusing and
little used
</li>
<li>
plot margin lines for deglitching, deglitch many points (this was
something that was most useful for a timing problem at 10ID that
no longer exists)
</li>
<li>
preprocessing truncation and deglitching (truncation might be
worth implementing)

</li>
</ol>
</div>
</div>
<div id="postamble"><p class="author"> Author: Bruce Ravel
<a href="mailto:bravel AT bnl DOT gov">&lt;bravel AT bnl DOT gov&gt;</a>
</p>
<p class="date"> Date: 2011-05-03 17:39:55 EDT</p>
<p>HTML generated by org-mode 6.21b in emacs 23</p>
</div></body>
</html>
