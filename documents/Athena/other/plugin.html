<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>11.3. File type plugins &mdash; Athena 0.9.26 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.26',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/wheat.ico"/>
    <link rel="top" title="Athena 0.9.26 documentation" href="../index.html" />
    <link rel="up" title="11. Other main window chores" href="index.html" />
    <link rel="next" title="11.4. Configuring ATHENA to work for you" href="prefs.html" />
    <link rel="prev" title="11.2. Project journal" href="journal.html" />

    <link rel="stylesheet" type="text/css" href="../_static/demeter.css" />
    <link rel="stylesheet" type="text/css" href="../_static/keys.css" />
    <link rel="stylesheet" type="text/css" href="../_static/program.css" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="prefs.html" title="11.4. Configuring ATHENA to work for you"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="journal.html" title="11.2. Project journal"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Athena 0.9.26 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">11. Other main window chores</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="file-type-plugins">
<h1>11.3. File type plugins<a class="headerlink" href="#file-type-plugins" title="Permalink to this headline">¶</a></h1>
<div class="section" id="extending-athena-to-read-new-file-types">
<h2>11.3.1. Extending ATHENA to read new file types<a class="headerlink" href="#extending-athena-to-read-new-file-types" title="Permalink to this headline">¶</a></h2>
<p><img alt="bend" title="This is difficult material" src="../_static/bend.png" hspace="3"></a> <font size=-1 color="#8C4112">ATHENA</font> uses <font size=-1 color="#8C4112">IFEFFIT</font>'s <a class="reference external" href="http://cars9.uchicago.edu/~ifeffit/refman/node99.html">read_data()</a> function or
<font size=-1 color="#8C4112">LARCH</font>'s <a class="reference external" href="http://xraypy.github.io/xraylarch/data/index.html">read_ascii()</a> function to
import data. This means that <font size=-1 color="#8C4112">ATHENA</font>'s notion of what is an
acceptable data format is completely identical to <font size=-1 color="#8C4112">IFEFFIT</font>'s
(or <font size=-1 color="#8C4112">LARCH</font>'s) notion. The contrapositive is also true – if
<font size=-1 color="#8C4112">IFEFFIT</font> (or <font size=-1 color="#8C4112">LARCH</font>) can read a data file, so can
<font size=-1 color="#8C4112">ATHENA</font>.</p>
<p>In practice, this works great. <font size=-1 color="#8C4112">IFEFFIT</font> is able to read the
data files generated by many of the world's XAS beamlines. And so,
consequently, is <font size=-1 color="#8C4112">ATHENA</font>. Sadly, there are many beamlines
that use a format that confounds <font size=-1 color="#8C4112">IFEFFIT</font> and
<font size=-1 color="#8C4112">ATHENA</font>. <font size=-1 color="#8C4112">LARCH</font> is rather more intelligent, but
still unable to read some of the wackier file types. There are two
obvious ways that I could deal with data from those beamline:</p>
<ol class="arabic simple">
<li>Refuse to deal with them and require the user to transform the data
into a form that <font size=-1 color="#8C4112">IFEFFIT</font> can handle.</li>
<li>Hard-wire code into <font size=-1 color="#8C4112">ATHENA</font> to deal with each new data
format as I become aware of it.</li>
</ol>
<p>Neither of those are particularly user-friendly. <font size=-1 color="#8C4112">ATHENA</font>
instead relies on a plugin architecture allowing <font size=-1 color="#8C4112">ATHENA</font> to
be extended on the fly to deal well with new data formats without
having to change the underlying code.</p>
<p>This page documents the plugin architecture so that
<font size=-1 color="#8C4112">ATHENA</font>'s users can write their own file type plugins.</p>
</div>
<div class="section" id="overview-of-how-plugins-work">
<h2>11.3.2. Overview of how plugins work<a class="headerlink" href="#overview-of-how-plugins-work" title="Permalink to this headline">¶</a></h2>
<p>In simple language, a perl module is a short file containing special
perl code placed in a special location. <font size=-1 color="#8C4112">ATHENA</font> uses the
code contained in that file to recognize and pre-process data files so
that they can be imported properly using <font size=-1 color="#8C4112">IFEFFIT</font> or
<font size=-1 color="#8C4112">LARCH</font>.</p>
<p>In somewhat more technical language, a plugin is just <a class="reference external" href="http://perldoc.perl.org/perlmod.html">a perl module</a> placed on your computer in a
place where it can be found. This file is used when <font size=-1 color="#8C4112">ATHENA</font>
starts and its methods are available when data are imported.</p>
<p>When a plugin is available for use, it is invoked every time a file is
imported into <font size=-1 color="#8C4112">ATHENA</font> using the Open file function. The new
file is checked using one of the plugin's methods to ascertain if the
file is of the sort serviced by the plugin. If the file is recognized,
another method in the plugin transforms the original data file into a
form that is readable by <font size=-1 color="#8C4112">IFEFFIT</font> or <font size=-1 color="#8C4112">LARCH</font>. This
transformation is done in a way that leaves the original data file
unchanged.</p>
<p>If the transformation is successful, the user is presented with
<font size=-1 color="#8C4112">ATHENA</font>'s column selection dialog and can import data in the
normal manner.  Ideally, a plugin is written in a way that makes the
import of the data into <font size=-1 color="#8C4112">ATHENA</font> a completely transparent
process for the user.</p>
</div>
<div class="section" id="example-plugin">
<h2>11.3.3. Example plugin<a class="headerlink" href="#example-plugin" title="Permalink to this headline">¶</a></h2>
<p>Here is a complete example of a functional plugin taken from the
<font size=-1 color="#8C4112">DEMETER</font> distribution. This plugin allows <font size=-1 color="#8C4112">ATHENA</font>
to import files from NSLS beamline X10C. As you can see, the plugin is
quite short. The following sections of this page will explain this
example in detail.</p>
<div class="highlight-perl"><div class="highlight"><pre><span></span><span class="nb">package</span> <span class="nn">Demeter::Plugins::</span><span class="n">X10C</span><span class="p">;</span>

<span class="k">use</span> <span class="n">Moose</span><span class="p">;</span>
<span class="n">extends</span> <span class="s">&#39;Demeter::Plugins::FileType&#39;</span><span class="p">;</span>

<span class="n">has</span> <span class="s">&#39;+is_binary&#39;</span>    <span class="o">=&gt;</span> <span class="p">(</span><span class="n">default</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">has</span> <span class="s">&#39;+description&#39;</span>  <span class="o">=&gt;</span> <span class="p">(</span><span class="n">default</span> <span class="o">=&gt;</span> <span class="s">&quot;NSLS beamline X10C&quot;</span><span class="p">);</span>
<span class="n">has</span> <span class="s">&#39;+version&#39;</span>      <span class="o">=&gt;</span> <span class="p">(</span><span class="n">default</span> <span class="o">=&gt;</span> <span class="mf">0.1</span><span class="p">);</span>
<span class="n">has</span> <span class="s">&#39;+metadata_ini&#39;</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="n">default</span> <span class="o">=&gt;</span>
                        <span class="nn">File::</span><span class="n">Spec</span><span class="o">-&gt;</span><span class="n">catfile</span><span class="p">(</span><span class="nn">File::Basename::</span><span class="n">dirname</span><span class="p">(</span><span class="nv">$INC</span><span class="p">{</span><span class="s">&#39;Demeter.pm&#39;</span><span class="p">}),</span>
                                            <span class="s">&#39;Demeter&#39;</span><span class="p">,</span> <span class="s">&#39;share&#39;</span><span class="p">,</span> <span class="s">&#39;xdi&#39;</span><span class="p">,</span> <span class="s">&#39;x10c.ini&#39;</span><span class="p">));</span>

<span class="k">sub </span><span class="nf">is</span> <span class="p">{</span>
  <span class="k">my</span> <span class="p">(</span><span class="nv">$self</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
  <span class="nb">open</span> <span class="n">D</span><span class="p">,</span> <span class="nv">$self</span><span class="o">-&gt;</span><span class="n">file</span> <span class="ow">or</span> <span class="nv">$self</span><span class="o">-&gt;</span><span class="n">Croak</span><span class="p">(</span><span class="s">&quot;could not open &quot;</span> <span class="o">.</span> <span class="nv">$self</span><span class="o">-&gt;</span><span class="n">file</span> <span class="o">.</span> <span class="s">&quot; as data (X10C)\n&quot;</span><span class="p">);</span>
  <span class="k">my</span> <span class="nv">$first</span> <span class="o">=</span> <span class="sr">&lt;D&gt;</span><span class="p">;</span>
  <span class="nb">close</span> <span class="n">D</span><span class="p">,</span> <span class="k">return</span> <span class="mi">0</span> <span class="k">unless</span> <span class="p">(</span><span class="nb">uc</span><span class="p">(</span><span class="nv">$first</span><span class="p">)</span> <span class="o">=~</span><span class="sr"> /^EXAFS/</span><span class="p">);</span>
  <span class="k">my</span> <span class="nv">$lines</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">(</span><span class="sr">&lt;D&gt;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">close</span> <span class="n">D</span><span class="p">,</span> <span class="k">return</span> <span class="mi">1</span> <span class="k">if</span> <span class="p">(</span><span class="nb">uc</span><span class="p">(</span><span class="nv">$first</span><span class="p">)</span> <span class="o">=~</span><span class="sr"> /^\s+DATA START/</span><span class="p">);</span>
    <span class="o">++</span><span class="nv">$lines</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nb">close</span> <span class="n">D</span><span class="p">;</span>
<span class="p">};</span>


<span class="k">sub </span><span class="nf">fix</span> <span class="p">{</span>
  <span class="k">my</span> <span class="p">(</span><span class="nv">$self</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
  <span class="k">my</span> <span class="nv">$new</span> <span class="o">=</span> <span class="nn">File::</span><span class="n">Spec</span><span class="o">-&gt;</span><span class="n">catfile</span><span class="p">(</span><span class="nv">$self</span><span class="o">-&gt;</span><span class="n">stash_folder</span><span class="p">,</span> <span class="nv">$self</span><span class="o">-&gt;</span><span class="n">filename</span><span class="p">);</span>
  <span class="p">(</span><span class="nv">$new</span> <span class="o">=</span> <span class="nn">File::</span><span class="n">Spec</span><span class="o">-&gt;</span><span class="n">catfile</span><span class="p">(</span><span class="nv">$self</span><span class="o">-&gt;</span><span class="n">stash_folder</span><span class="p">,</span> <span class="s">&quot;toss&quot;</span><span class="p">))</span> <span class="k">if</span> <span class="p">(</span><span class="nb">length</span><span class="p">(</span><span class="nv">$new</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">127</span><span class="p">);</span>
  <span class="nb">open</span> <span class="n">D</span><span class="p">,</span> <span class="nv">$self</span><span class="o">-&gt;</span><span class="n">file</span> <span class="ow">or</span> <span class="nb">die</span> <span class="s">&quot;could not open &quot;</span> <span class="p">,</span> <span class="nv">$self</span><span class="o">-&gt;</span><span class="n">file</span> <span class="o">.</span> <span class="s">&quot; as data (fix in X10C)\n&quot;</span><span class="p">;</span>
  <span class="nb">open</span> <span class="n">N</span><span class="p">,</span> <span class="s">&quot;&gt;&quot;</span><span class="o">.</span><span class="nv">$new</span> <span class="ow">or</span> <span class="nb">die</span> <span class="s">&quot;could not write to $new (fix in X10C)\n&quot;</span><span class="p">;</span>
  <span class="k">my</span> <span class="nv">$header</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">my</span> <span class="nv">$null</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="s">&#39;+&#39;</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">(</span><span class="sr">&lt;D&gt;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$_</span> <span class="o">=~</span> <span class="sr">s/$null//g</span><span class="p">;</span>             <span class="c1"># clean up nulls</span>
    <span class="k">print</span> <span class="n">N</span> <span class="s">&quot;# &quot;</span> <span class="o">.</span> <span class="nv">$_</span> <span class="k">if</span> <span class="nv">$header</span><span class="p">;</span> <span class="c1"># comment headers</span>
    <span class="p">(</span><span class="nv">$header</span> <span class="o">=</span> <span class="mi">0</span><span class="p">),</span> <span class="k">next</span> <span class="k">if</span> <span class="p">(</span><span class="nb">uc</span><span class="p">(</span><span class="nv">$_</span><span class="p">)</span> <span class="o">=~</span><span class="sr"> /^\s+DATA START/</span><span class="p">);</span>
    <span class="k">next</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$header</span><span class="p">);</span>
    <span class="nv">$_</span> <span class="o">=~</span> <span class="sr">s/([eE][-+]\d{1,2})-/$1 -/g</span><span class="p">;</span> <span class="c1"># clean up 5th column</span>
    <span class="k">print</span> <span class="n">N</span> <span class="nv">$_</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nb">close</span> <span class="n">N</span><span class="p">;</span>
  <span class="nb">close</span> <span class="n">D</span><span class="p">;</span>
  <span class="nv">$self</span><span class="o">-&gt;</span><span class="n">fixed</span><span class="p">(</span><span class="nv">$new</span><span class="p">);</span>
  <span class="k">return</span> <span class="nv">$new</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">sub </span><span class="nf">suggest</span> <span class="p">{</span>
  <span class="k">my</span> <span class="p">(</span><span class="nv">$self</span><span class="p">,</span> <span class="nv">$which</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
  <span class="nv">$which</span> <span class="o">||=</span> <span class="s">&#39;transmission&#39;</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nv">$which</span> <span class="ow">eq</span> <span class="s">&#39;transmission&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">energy</span>      <span class="o">=&gt;</span> <span class="s">&#39;$1&#39;</span><span class="p">,</span>
            <span class="n">numerator</span>   <span class="o">=&gt;</span> <span class="s">&#39;$4&#39;</span><span class="p">,</span>
            <span class="n">denominator</span> <span class="o">=&gt;</span> <span class="s">&#39;$6&#39;</span><span class="p">,</span>
            <span class="n">ln</span>          <span class="o">=&gt;</span>  <span class="mi">1</span><span class="p">,);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">();</span>
  <span class="p">};</span>
<span class="p">};</span>


<span class="n">__PACKAGE__</span><span class="o">-&gt;</span><span class="n">meta</span><span class="o">-&gt;</span><span class="n">make_immutable</span><span class="p">;</span>
<span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="namespace">
<h2>11.3.4. Namespace<a class="headerlink" href="#namespace" title="Permalink to this headline">¶</a></h2>
<p>The module must be in a particular namespace. The namespace is defined
by the package function on line 1 of the example. The package must be
below the <code class="docutils literal"><span class="pre">Demeter::Plugins</span></code> namespace and should have a name that
is descriptive of what format it is made for. In the case of the
example, the plugin is intended to transform files from NSLS beamline
X10C, so the full namespace of the module is
<code class="docutils literal"><span class="pre">Demeter::Plugins::X10C</span></code>. Lines 3, 4, 62, and 63 are some requisite
boilerplate which allow this module to work properly with
<font size=-1 color="#8C4112">DEMETER</font> and <font size=-1 color="#8C4112">ATHENA</font>.</p>
</div>
<div class="section" id="required-methods-and-variables">
<h2>11.3.5. Required methods and variables<a class="headerlink" href="#required-methods-and-variables" title="Permalink to this headline">¶</a></h2>
<p>The plugin must supply three methods and must set several attributes of
the Plugin object.</p>
<div class="section" id="required-attributes">
<h3>11.3.5.1. required attributes<a class="headerlink" href="#required-attributes" title="Permalink to this headline">¶</a></h3>
<p>Lines 12-14 define the two required variables in a way that allows them
to be accessed outside the scope of this module.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">is_binary</span></code></dt>
<dd>(Line 6) A boolean that tells <font size=-1 color="#8C4112">ATHENA</font> whether the input file format
is in a text or binary format. <font size=-1 color="#8C4112">ATHENA</font> handles binary files slightly
differently in the column selection dialog.</dd>
<dt><code class="docutils literal"><span class="pre">description</span></code></dt>
<dd>(Line 7) A short text string describing the purpose of this plugin.
This string will be displayed in the plugin registry. This
description should be no more than a few dozen characters.</dd>
<dt><code class="docutils literal"><span class="pre">version</span></code></dt>
<dd>(Line 8) This is a numeric version of the plugin.</dd>
<dt><code class="docutils literal"><span class="pre">metadata_ini</span></code></dt>
<dd>The file in <code class="docutils literal"><span class="pre">share/xdi/</span></code> folder that contains metadata common to the
beamline and facility.</dd>
<dt><code class="docutils literal"><span class="pre">headers</span></code></dt>
<dd>A reference to a hash containing additional metadata related to the
work done by the plugin.</dd>
</dl>
</div>
<div class="section" id="the-is-method">
<h3>11.3.5.2. the <code class="docutils literal"><span class="pre">is</span></code> method<a class="headerlink" href="#the-is-method" title="Permalink to this headline">¶</a></h3>
<p>Lines 12-23 show the <code class="docutils literal"><span class="pre">is</span></code> method. This method is called by
<font size=-1 color="#8C4112">ATHENA</font> to try to recognize an input data file as being of a
particular format. In the case of this example, the X10C file is
recognized by some of the text in the first few lines of the
files. When the file is recognized, this method returns a true
value. If the test fails, it returns 0. When <font size=-1 color="#8C4112">ATHENA</font> sees
the true return value, it applies the fix method to transform the data
file into an <font size=-1 color="#8C4112">IFEFFIT</font>- or <font size=-1 color="#8C4112">LARCH</font>-friendly format.</p>
<p>It is quite important that the is method be fast. It is possible that a
data file will have to be tested against a large number of plugins. If
the is method is slow, file import will be slow.</p>
</div>
<div class="section" id="the-fix-method">
<h3>11.3.5.3. the <code class="docutils literal"><span class="pre">fix</span></code> method<a class="headerlink" href="#the-fix-method" title="Permalink to this headline">¶</a></h3>
<p>Lines 26-46 show the <code class="docutils literal"><span class="pre">fix</span></code> method. This method is called when the is
method returns true. In some manner it makes a copy of the original
data file and transforms that copy into a form that can be read by
<font size=-1 color="#8C4112">IFEFFIT</font> or <font size=-1 color="#8C4112">LARCH</font>. This method needs to follow a
number of strict rules, however within those rules there is a lot of
flexibility about how the transformation is accomplished and the scope
of what that transformation does to the data.</p>
<p>First and most important, never alter the original data! Either work
on the contaents of the original file in memory or make a copy of the
data, preferably in the stash folder (a folder known to
<font size=-1 color="#8C4112">DEMETER</font> as a place for writing scratch files). At line 29,
we see that file is opened in the stash folder for holding the
transformed data. As the data is processed, the output is written to
that file (see lines 36 and 40).</p>
<p>Do whatever chore needs doing to transform the portion of the original
data file that needs attention. Afterwords close both the input and
output files. It is esential that the files be closed, particularly on
Windows, which locks opened files from other uses.</p>
<p>Finally set the <code class="docutils literal"><span class="pre">fixed</span></code> attribute of the object to the path and name
of the transformed file and return that same string.</p>
<p>In the example given on this page, the first thing the <code class="docutils literal"><span class="pre">fix</span></code> method
does is to create a file name in the stash directory for the
transformed file. Line 28 tells <font size=-1 color="#8C4112">ATHENA</font> to give the stash
file the same name as the original file (before calling this method,
<font size=-1 color="#8C4112">ATHENA</font> sets the <code class="docutils literal"><span class="pre">filename</span></code> attribute appropriately) but
in the stash directory (the catfile method builds a fully resolved
filename in a platform transparent manner). Line 29 checks the length
of the fully resolved filename to avoid running into one of
<font size=-1 color="#8C4112">IFEFFIT</font>'s internal limitations.</p>
<p>Three things are done to transform an X10C file. The header is
stripped of null characters, the header is commented out by putting
<code class="docutils literal"><span class="pre">#</span></code> characters in the first column, and a formatting problem in some
files involving a lack of white space between columns is
resolved. Each line of the original file is read, operated on, and
written to the transformed file in the stash directory. The while loop
starting at line 34 reads through the file line-by-line and performs
the operations.</p>
<p>Lines 42 and 43 close the original and new file handles. The filter
should always close the file handles. This is not such a huge issue
under unix, but Windows places a lock on any open file handle. If you
fail to close one, for as long as <font size=-1 color="#8C4112">ATHENA</font> is running no other process
will be able to do anything with that file.</p>
<p>At line 45, the method returns with the fully resolved name of the
transformed file. At no point was the original file altered. When <font size=-1 color="#8C4112">ATHENA</font>
exits, it will clean up the stash directory, thus avoiding a pile up of
unnecessary data files.</p>
<p><font size=-1 color="#8C4112">DEMETER</font> ships with a number of differnt kinds of plugins. Some of them
perform simple, linear transofrmations (like this one). Others interpret
binary data. A couple export project files rather than data files. One
even performs an on-the-fly deadtime correction for data from an energy
dispersive detector. Examine them for hints about how to create your own
plugins.</p>
</div>
<div class="section" id="the-suggest-method">
<h3>11.3.5.4. the <code class="docutils literal"><span class="pre">suggest</span></code> method<a class="headerlink" href="#the-suggest-method" title="Permalink to this headline">¶</a></h3>
<p>Lines 48-59 show the <code class="docutils literal"><span class="pre">suggest</span></code> method. This provides feedback for use
by the <a class="reference external" href="../import/columns.html">column selection dialog</a> is selecting
initial guesses for the columns containing the numerator and denominator
of the data. In this case, the method suggests columns for transmission
data butmakes no suggestions of fluorescence data.</p>
</div>
</div>
<div class="section" id="athena-s-plugin-registry">
<h2>11.3.6. ATHENA's plugin registry<a class="headerlink" href="#athena-s-plugin-registry" title="Permalink to this headline">¶</a></h2>
<p>Because there might be a large number of file type plugins, it is
possible for the user to turn the checks for the file types on and
off.  In the main menu, you will find the <span class="guilabel">Plugin
Registry</span>. This is a simple list of all plugins found in the system
and user directories. The check buttons enable and disable the
plugins. The value of the <code class="docutils literal"><span class="pre">description</span></code> attribute is displayed in
the list (so be sure to choose a suitable and suitably short value for
that variable).</p>
<div class="figure align-center" id="id1">
<span id="fig-plugin"></span><a class="reference external image-reference" href="../_images/import_plugin.png"><img alt="../_images/import_plugin.png" src="../_images/import_plugin.png" /></a>
<p class="caption"><span class="caption-number">Fig. 11.4 </span><span class="caption-text">The plugin registry.</span></p>
</div>
<p>Note that the order in which the plugins are displayed above is the same
order in which files are checked against the plugins. User plugins are
checked before system plugins. After that the plugins are ordered
alphabetically. If you want your system plugins to be checked against
the data first, choose a name that comes early in the alphabetical
sense.</p>
<p>Right-clicking <img alt="rightclick" title="Right mouse button" src="../_static/rightclick.png" hspace="3"></a> on an item in the registry posts the
context menu shown in the figure above. All such context menus have at
least one item for reading the documentation contained in the plugin
source code file. Some plugins, such as the one shown, also provide a
way of configuring the behavior of the plugin.</p>
</div>
<div class="section" id="system-plugins-and-user-plugins">
<h2>11.3.7. System plugins and user plugins<a class="headerlink" href="#system-plugins-and-user-plugins" title="Permalink to this headline">¶</a></h2>
<p><font size=-1 color="#8C4112">ATHENA</font> looks in two different places for these plugins. One place is in
<font size=-1 color="#8C4112">ATHENA</font>'s installation location where it finds the plugins that come with
the horae distribution. The other is in the user's space (on Windows
plugins are located in <code class="docutils literal"><span class="pre">C:\\Program</span> <span class="pre">File\\Ifeffit\\horae\\Ifeffit\\Plugins\\Filetype\\Athena\\</span></code>, on unix
<code class="docutils literal"><span class="pre">$HOME/.horae/Ifeffit/Plugins/Filetype/Athena/)</span></code>. In both places, it reads
the contents of the plugin directory and attempts to import the files
which end in .pm.</p>
</div>
<div class="section" id="miscellaneous-advice-on-plugins">
<h2>11.3.8. Miscellaneous advice on plugins<a class="headerlink" href="#miscellaneous-advice-on-plugins" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Cut-n-paste is an excellent way to get started on a new plugin. Make
a copy of a plugin for a file that is similar to your own file and
use that as the basis for your new plugin.</li>
<li><code class="docutils literal"><span class="pre">X15B.pm</span></code> is an example of a plugin for a binary format.</li>
<li>You can use any module that you need, thus you have all of CPAN
available to you when designing your plugin. If you need to do any
seriously heavy lifting, check out the <code class="docutils literal"><span class="pre">Math::Pari</span></code> module or the
<a class="reference external" href="http://pdl.perl.org">Perl Data Language</a></li>
<li>Although a well-tested, robust plugin should be your goal, one of the
nice features of the plugin architecture is that a “good-enough”
plugin is easy to write and can quickly get you over a hurdle.</li>
</ol>

<br>

<br>
<hr class="docutils" />
<p><font size=-1 color="#8C4112">DEMETER</font> is copyright © 2009-2016 Bruce Ravel – This document is
copyright © 2016 Bruce Ravel</p>
<p>This document is licensed under <a class="reference external" href="http://creativecommons.org/licenses/by-sa/3.0/">The Creative Commons Attribution-ShareAlike License</a>.</p>
<p>If <font size=-1 color="#8C4112">DEMETER</font> and this document are useful to you, please
consider <a class="reference external" href="http://creativecommons.org/support/">supporting The Creative Commons</a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/pallas_athene_thumb.png" alt="Logo"/>
            </a></p>
<h3><a href="../index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../forward.html">1. Forward</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">2. Introduction to ATHENA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../import/index.html">3. Data import</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bkg/index.html">4. Normalization and background removal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plot/index.html">5. Plotting Your Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ui/index.html">6. User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../params/index.html">7. Setting parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../output/index.html">8. Data export</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">9. Data processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analysis/index.html">10. Data analysis</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">11. Other main window chores</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="meta.html">11.1. File metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="journal.html">11.2. Project journal</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">11.3. File type plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="prefs.html">11.4. Configuring ATHENA to work for you</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">12. Worked examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hephaestus.html">13. Hephaestus</a></li>
</ul>
<h3>Helpful Links</h3>
<p>Current version: <b>0.9.26</b></p>

<ul>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.io/demeter/">Demeter homepage</a>
  <li>&nbsp; &nbsp; <a href="https://github.com/bruceravel/demeter/">Demeter @ github</a>
  <li>&nbsp; &nbsp; <a href="http://cars9.uchicago.edu/mailman/listinfo/ifeffit/">Ifeffit mailing list</a>
  <li>&nbsp; &nbsp; <a href="http://xraypy.github.io/xraylarch/">Larch homepage</a>
  <li>&nbsp; &nbsp; <a href="https://github.com/newville/ifeffit">Ifeffit @ github</a>
  <li>&nbsp; &nbsp; <a href="http://xafs.org/">xafs.org</a>
</ul>
<ul>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.io/demeter/documents/Athena/index.html">Athena manual</a>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.io/demeter/documents/Artemis/index.html">Artemis manual</a>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.io/demeter/documents/SinglePage/bugs.html">Bug reporting hints</a>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.io/demeter/documents/SinglePage/help.html">How to ask a good question</a>
</ul>
<p>
<h3>Translations</h3>
<ul>
  <li>&nbsp; &nbsp; <a href="http://www.moleng.kyoto-u.ac.jp/~moleng_04/asakura/ja/others/aug/index.html">日本語 (Japanese)</a>
</ul>
<p>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/other/plugin.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="prefs.html" title="11.4. Configuring ATHENA to work for you"
             >next</a></li>
        <li class="right" >
          <a href="journal.html" title="11.2. Project journal"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Athena 0.9.26 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >11. Other main window chores</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Bruce Ravel.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.3.
    </div>
  </body>
</html>