<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>10.4. The non-statistical happiness metric &mdash; Demeter Programming Guide 0.9.26 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.26',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/wheat.ico"/>
    <link rel="top" title="Demeter Programming Guide 0.9.26 documentation" href="../index.html" />
    <link rel="up" title="10. Fitting EXAFS data" href="index.html" />
    <link rel="next" title="11. Using perl to structure a fit" href="../perl.html" />
    <link rel="prev" title="10.3. After a fit" href="after.html" />

    <link rel="stylesheet" type="text/css" href="../_static/demeter.css" />
    <link rel="stylesheet" type="text/css" href="../_static/keys.css" />
    <link rel="stylesheet" type="text/css" href="../_static/program.css" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../perl.html" title="11. Using perl to structure a fit"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="after.html" title="10.3. After a fit"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Demeter Programming Guide 0.9.26 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">10. Fitting EXAFS data</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="the-non-statistical-happiness-metric">
<h1>10.4. The non-statistical happiness metric<a class="headerlink" href="#the-non-statistical-happiness-metric" title="Permalink to this headline">¶</a></h1>
<p>The “happiness” is a non-statistical metric that evaluates the
fit in a semantic sense.  As explained elsewhere, <font size=-1 color="#8C4112">IFEFFIT</font>
uses a Levenberg-Marquardt fitting algorithm and applies Gaussian
statistics to the EXAFS analysis problem.  For a host of reasons, the
application of Gaussian statistics is troublesome for EXAFS.  The most
striking result is that the reduced χ<sup>2</sup> of a good fit is
rarely close to 1, as one would expect for a properly conceived
Gaussian problem.  Even for a very good fit to a metallic standard
which returns very sensible parameter values, the reduced χ<sup>2</sup> is likely to be in the 10s or 100s.</p>
<p>Although the Gaussian problem is ill-posed, years of experience
fitting EXAFS data has taught us much about what constitutes as a good
fit.  We expect that the R-factor is small.  We expect that S<sup>2</sup><sub>0</sub> and σ<sup>2</sup> are non-negative.  We expact
neither ΔR nor E<sub>0</sub> will be too large.  We know that we
should not use too many of the independent points contained in the
data.</p>
<p>All of those are things that we consider when examining the results of
a fit. When one or more of those things does not hold for a fit, we
are unhappy and thus wary of the fit.  If, however, all of them hold
true, then we might have confidence in the fit, thus making us happy.</p>
<div class="section" id="a-semantic-parameter">
<h2>10.4.1. A semantic parameter<a class="headerlink" href="#a-semantic-parameter" title="Permalink to this headline">¶</a></h2>
<p><font size=-1 color="#8C4112">DEMETER</font> has a simple mechanism for parameterizing the
results of the fit to evaluate a semantic assessment of the fit. Each
fit starts with a score of 100. Each of those semantic evaluations of
the fit are subjected to the simple algorithm. Each such evaluation is
a penalty which is subtracted from the score. A fit with a score near
100 is “happy”, which a fit with a score of 60 or below is
“unhappy”. It is, therefore, a tool to help you evaluate the
result of your fit.</p>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">The word “happiness” was chosen for this
parameter because it is silly. This is an ad-hoc, semantic metric.
It has no basis in formal statistics. It is, therefore, meaningless
and should <strong>never</strong> be published.</p>
</div>
</div>
<div class="section" id="how-the-happiness-is-calculated">
<h2>10.4.2. How the happiness is calculated<a class="headerlink" href="#how-the-happiness-is-calculated" title="Permalink to this headline">¶</a></h2>
<p>The fit's happiness is computed using a bunch of <a class="reference external" href="../highlevel/config.html">configuration
parameters</a> from the <code class="docutils literal"><span class="pre">happiness</span></code>
configuration group.  Here is a summary of how the happiness is
calculated.  All numbers given in the following descriptions can be
set using the configuration system.</p>
<ol class="arabic simple">
<li>It should have a small R-factor. An R-factor below 0.2 gives no
penalty.  An R-factor above 0.6 gives a penalty of 40.  R-factors
between those values scale linearly between 0 and 40.</li>
<li>If the number of guess parameters is fewer than 2/3 of the number
of independent points, no penalty is given.  As the number of guess
parameters approaches the number of independent points, the penalty
grows.</li>
<li>A penalty of 2 is given for each Path with a negative σ<sup>2</sup> or σ<sup>2</sup> value.</li>
<li>A penalty of 2 is given for each E<sub>0</sub>, ΔR, or
σ<sup>2</sup> path parameter of each Path that is too big.</li>
<li>For each restraint that evaluates to something non-zero, a penalty is
given that is proportional to the value of the restraint divided by
the value of χ<sup>2</sup>.</li>
</ol>
<p>The Fit object's <code class="docutils literal"><span class="pre">happiness</span></code> attribute is set to the evaluation of
the happiness metric.  A color is also computed based on this value
for use as a semantic indicator in a GUI or web program. The idea
behind the color is to serve as a sort of “environmental
indicator” providing immediate feedback as to the state of the most
recent fit.  For instance, a fit that looks good in the sense that the
red line plots nicely over the blue line but which displays the
unhappy color will induce the user to explore the problem making the
fit unhappy.  Without that environmental indication, one might see a
nice plot and assume that the fit is, in fact, a good one.</p>
<p>The default values of the configuration parameters related to the
happiness calculation seems to be reasonable, but you are certainly
encouraged to tune those values to give you results that are more
useful for your experience.  If you do so, please share your work with
Bruce so that your experience can be folded back into
<font size=-1 color="#8C4112">DEMETER</font>.</p>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">In a future version of <font size=-1 color="#8C4112">DEMETER</font> it will be
possible to define a <span class="penalty">penalty</span> parameter, which is a
special kind of GDS object. It will be like an after parameter in
the sense that it is evaluated at the end of the fit. Its
evaluation will be used as an additional, user-defined subtraction
from the happiness. This will give a dynamic, aspect to the
happiness evaluation which is specific to the fitting model.</p>
</div>
</div>
<div class="section" id="happiness-is-not-a-real-statistical-parameter">
<h2>10.4.3. Happiness is not a real statistical parameter<a class="headerlink" href="#happiness-is-not-a-real-statistical-parameter" title="Permalink to this headline">¶</a></h2>
<p>One final note about the happiness metric. Use it to evaluate your
progress through a fitting project, but don't publish it.  Really. If
you do publish it, we will both look like twits.</p>

<br>

<br>
<hr class="docutils" />
<p><font size=-1 color="#8C4112">DEMETER</font> is copyright © 2009-2016 Bruce Ravel – This document is
copyright © 2016 Bruce Ravel</p>
<p>This document is licensed under <a class="reference external" href="http://creativecommons.org/licenses/by-sa/3.0/">The Creative Commons Attribution-ShareAlike License</a>.</p>
<p>If <font size=-1 color="#8C4112">DEMETER</font> and this document are useful to you, please
consider <a class="reference external" href="http://creativecommons.org/support/">supporting The Creative Commons</a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/Isis-Sothis-Demeter_sm.jpg" alt="Logo"/>
            </a></p>
<h3><a href="../index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data/index.html">2. The basics of data processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mue/index.html">3. Processing μ(E) data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../highlevel/index.html">4. High level actions of the object model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../xanes/index.html">5. Analysis of XANES data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../atoms.html">6. Atoms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../feff/index.html">7. Feff</a></li>
<li class="toctree-l1"><a class="reference internal" href="../paths/index.html">8. Scattering paths</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gds.html">9. Guess/Def/Set Parameters</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">10. Fitting EXAFS data</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="collection.html">10.1. Setting up a fit</a></li>
<li class="toctree-l2"><a class="reference internal" href="sanity.html">10.2. Sanity checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="after.html">10.3. After a fit</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">10.4. The non-statistical happiness metric</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../perl.html">11. Using perl to structure a fit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lgcv.html">12. Local guess parameters and the characteristic value</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pathlike/index.html">13. Path-like objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ui.html">14. User interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../output.html">15. Output formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">16. Full examples</a></li>
</ul>
<h3>Helpful Links</h3>
<p>Current version: <b>0.9.26</b></p>

<ul>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.io/demeter/">Demeter homepage</a>
  <li>&nbsp; &nbsp; <a href="https://github.com/bruceravel/demeter/">Demeter @ github</a>
  <li>&nbsp; &nbsp; <a href="http://cars9.uchicago.edu/mailman/listinfo/ifeffit/">Ifeffit mailing list</a>
  <li>&nbsp; &nbsp; <a href="http://xraypy.github.io/xraylarch/">Larch homepage</a>
  <li>&nbsp; &nbsp; <a href="https://github.com/newville/ifeffit">Ifeffit @ github</a>
  <li>&nbsp; &nbsp; <a href="http://xafs.org/">xafs.org</a>
</ul>
<ul>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.io/demeter/documents/Athena/index.html">Athena manual</a>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.io/demeter/documents/Artemis/index.html">Artemis manual</a>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.io/demeter/documents/SinglePage/bugs.html">Bug reporting hints</a>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.io/demeter/documents/SinglePage/help.html">How to ask a good question</a>
</ul>
<p>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/fit/happiness.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../perl.html" title="11. Using perl to structure a fit"
             >next</a></li>
        <li class="right" >
          <a href="after.html" title="10.3. After a fit"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Demeter Programming Guide 0.9.26 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >10. Fitting EXAFS data</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Bruce Ravel.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.3.
    </div>
  </body>
</html>