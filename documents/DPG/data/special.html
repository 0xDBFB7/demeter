<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2.6. Special data types &mdash; Demeter Programming Guide 0.9.24 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.24',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/wheat.ico"/>
    <link rel="top" title="Demeter Programming Guide 0.9.24 documentation" href="../index.html" />
    <link rel="up" title="2. The basics of data processing" href="index.html" />
    <link rel="next" title="2.7. Handling arbitrary data" href="other.html" />
    <link rel="prev" title="2.5. Multichannel data files" href="mc.html" />

    <link rel="stylesheet" type="text/css" href="../_static/demeter.css" />
    <link rel="stylesheet" type="text/css" href="../_static/keys.css" />
    <link rel="stylesheet" type="text/css" href="../_static/program.css" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="other.html" title="2.7. Handling arbitrary data"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="mc.html" title="2.5. Multichannel data files"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Demeter Programming Guide 0.9.24 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">2. The basics of data processing</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="special-data-types">
<h1>2.6. Special data types<a class="headerlink" href="#special-data-types" title="Permalink to this headline">¶</a></h1>
<p>Some beamlines write out data in a form that <font size=-1 color="#8C4112">IFEFFIT</font> is not
capable of reading without help. To address this problem,
<font size=-1 color="#8C4112">DEMETER</font> offers a simple plugin architecture. A plugin is a
bit of perl code which transformed the problematic file into a form
that <font size=-1 color="#8C4112">IFEFFIT</font> can handle. Plugins are small and hopefully
quick and easy to write.</p>
<div class="section" id="filetype-plugins">
<h2>2.6.1. Filetype plugins<a class="headerlink" href="#filetype-plugins" title="Permalink to this headline">¶</a></h2>
<p>NSLS beamline X15B uses an antiquated data acquisition system which
saves data in a quirky binary format. One of the plugins for file type
conversion that ships with <font size=-1 color="#8C4112">DEMETER</font> knows how to interpret
this quirky format. Here is how data from that beamline are imported
into a <font size=-1 color="#8C4112">DEMETER</font> program:</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="c1">#!/usr/bin/perl</span>
<span class="k">use</span> <span class="n">Demeter</span><span class="p">;</span>

<span class="k">my</span> <span class="nv">$filetype</span> <span class="o">=</span> <span class="nn">Demeter::Plugins::</span><span class="n">X15B</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span><span class="n">file</span><span class="o">=&gt;</span><span class="s">&#39;file_from_x15b.001&#39;</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$filetype</span><span class="o">-&gt;</span><span class="n">is</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">my</span> <span class="nv">$converted</span> <span class="o">=</span> <span class="nv">$filetype</span><span class="o">-&gt;</span><span class="n">fix</span><span class="p">;</span>
    <span class="k">my</span> <span class="nv">$data</span> <span class="o">=</span> <span class="nn">Demeter::</span><span class="n">Data</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span><span class="n">file</span> <span class="o">=&gt;</span> <span class="nv">$converted</span><span class="p">,</span>
                                  <span class="nv">$filetype</span> <span class="o">-&gt;</span> <span class="n">suggest</span><span class="p">(</span><span class="s">&quot;fluorescence&quot;</span><span class="p">)</span>
                                 <span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
<p>At line 4, a new Plugin object is made and pointed at the problematic
file.  At line 4, a check is made to verify that the file actually is
of the X15B type. When recognized as such, the problematic file is
converted into an <font size=-1 color="#8C4112">IFEFFIT</font> friendly form at line 6.  A normal
Data object is then created at line 7 and 8 using the converted file
and the Plugin's suggestion for how to form fluorescence data from the
columns in the converted file.</p>
<p>Every plugin must offer three methods:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">is</span></code></dt>
<dd>This method identifies a file as being of that type and returns a
boolean value. It is quite important that this method be fast. A
program might need to check a file against many different plugins.
If this method is slow, than any program using it will seem
unresponsive to the user.</dd>
<dt><code class="docutils literal"><span class="pre">fix</span></code></dt>
<dd>This method transforms the file into a form easily imported by
<font size=-1 color="#8C4112">IFEFFIT</font> and writes the transformed data to a transitional file. This
transitional file is usually placed in the stash directory (link to
section explaining the stash directory), but that is not a strict
requirement. The fully resolved name of the transitional file is
returned. This method can use any tools available, ranging from
straight perl to <font size=-1 color="#8C4112">IFEFFIT</font> to serious math packages such as <a class="reference external" href="https://metacpan.org/pod/PDL">the perl
data language</a> or <a class="reference external" href="https://metacpan.org/pod/distribution/Math-Cephes/lib/Math/Cephes.pod">the Cephes
library</a>.</dd>
<dt><code class="docutils literal"><span class="pre">suggest</span></code></dt>
<dd>This method returns an array of suggestions for forming transmission
or fluorescence data from the transformed file. Specifically, this
returns an array containing the <code class="docutils literal"><span class="pre">energy</span></code>, <code class="docutils literal"><span class="pre">numerator</span></code>,
<code class="docutils literal"><span class="pre">denominator</span></code>, and <code class="docutils literal"><span class="pre">ln</span></code> attributes. See <a class="reference external" href="columns.html">the section on column
data</a>.</dd>
</dl>
</div>
<div class="section" id="plugins-that-ship-with-demeter">
<h2>2.6.2. Plugins that ship with Demeter<a class="headerlink" href="#plugins-that-ship-with-demeter" title="Permalink to this headline">¶</a></h2>
<p>This is an incomplete list.</p>
<dl class="docutils">
<dt><strong>X10C</strong></dt>
<dd>Convert files from NSLS beamline X10C. These files have headers
which confuse <font size=-1 color="#8C4112">IFEFFIT</font> and sometimes fail to have white space
separating numbers among the data columns. The plugin comments out
the headers and corrects the problem with white space between
columns.</dd>
<dt><strong>X15B</strong></dt>
<dd>Convert files from NSLS beamline X15B. This beamline uses an ancient
data acquisition system which writes files in a cryptic binary
format. This plugin converts these data to a simple column data
file, saving only the scalars containing the XAS-relevant
measurement channels.</dd>
<dt><strong>PFBL12C</strong></dt>
<dd>Convert files from Photon Factory XAS beamlines. These files have
headers which will confuse <font size=-1 color="#8C4112">IFEFFIT</font>'s file import and store data as a
function of monochromator angle. This plugin comments the header and
converts mono angle to energy using information about the crystal
type contained in the header. The plugin name makes specific
reference to beamline 12C for historical reasons. It will actually
work on XAS data from any Photon Factory beamline.</dd>
<dt><strong>SSRLB</strong></dt>
<dd>Convert SSRL binary data file. Yes, SSRL does provide a program for
converting these binary files to column ASCII data. This plugin does
the same chore, yielding a file easily read by <font size=-1 color="#8C4112">IFEFFIT</font>.</dd>
<dt><strong>SSRLA</strong></dt>
<dd>Convert SSRL ASCII data file. Presumably, these ASCII files are the
result of the SSRL conversion program. These ASCII files are
unreadable by <font size=-1 color="#8C4112">IFEFFIT</font>. This plugin, comments out the header lines,
constructs a column label line out of the Data: section, moves the
first column (real time clock) to the third column, and swaps the
requested and acheived energy columns.</dd>
<dt><strong>SSRLmicro</strong></dt>
<dd>Sam Webb's microprobe data acquisition program writes files with
lots of columns and with a header structure that cannot be easily
used by <font size=-1 color="#8C4112">IFEFFIT</font>. This plugin massages that file format into a form
more easily ready by <font size=-1 color="#8C4112">IFEFFIT</font>, keeping only the ROI columns. (Note
that this plugin could be modified quite easily to perform a simple
ICR/OCR deadtime correction.)</dd>
<dt><strong>HXMA</strong></dt>
<dd>Files from the HXMA beamline at the Canadian Light Source are
readable by <font size=-1 color="#8C4112">IFEFFIT</font>, but the columns are labeled in a way that
<font size=-1 color="#8C4112">IFEFFIT</font> is unable to use. This plugin restructures the header for
<font size=-1 color="#8C4112">IFEFFIT</font>'s convenience and keeps only the columns containing the ion
chambers and the corrected (presumably by a simple ICR/OCR deadtime
correction) ROI signals from the multi-element detector.</dd>
<dt><strong>CMC</strong></dt>
<dd>Files from APS beamline 9BM (CMC-XOR) are single-record Spec files.
As a result, these data files contain lots of useless column (for
example, each file inexplicably saves h, k, and l values). This
plugin discard all the useless columns, keeping only those from the
ion chambers and the multi-element detector. It also discards the
problematic “logi0i1” column, which can result in <code class="docutils literal"><span class="pre">NaN</span></code> entries in the
case of zero signal on the transmission detector.</dd>
<dt><strong>X23A2MED</strong></dt>
<dd><p class="first">Data measured using the Vortex silicon drift detector at NSLS X23A2
are imported and deadtime corrected using the point-by-point
iterative algorithm developed and implemented by Joe Woicik and
Bruce Ravel and described in J. Woicik, et al.  The output data file contains columns
for each corrected detector channel as well as columns for the
various ion chambers. This is an example of a file type plugin which
uses <font size=-1 color="#8C4112">IFEFFIT</font> dirrectly.</p>
<ul class="last simple" id="bibtex-bibliography-data/special-0">
<li>J.&nbsp;C. Woicik, B.&nbsp;Ravel, D.&nbsp;A. Fischer, and W.&nbsp;J. Newburgh. Performance of a four-element Si drift detector for X-ray absorption fine-structure spectroscopy: resolution, maximum count rate, and dead-time correction with incorporation into the \textsc athena data analysis software. <em>Journal Of Synchrotron Radiation</em>, 17:409–413, 2010. <a class="reference external" href="http://dx.doi.org/10.1107/S0909049510009064">doi:10.1107/S0909049510009064</a>.</li>
</ul>
</dd>
<dt><strong>DUBBLE</strong></dt>
<dd>Files from the DUBBLE beamline (BM26) at ESRF. This plugin converts
monochromator angle into from millidegrees to energy and (as needed)
disentangles the confusing layout of data from the multi-element
detector, writing out a file that can easily be imported by Athena.</dd>
<dt><strong>Lytle</strong></dt>
<dd>Import files from the Lytle database. This plugin imports those data
that are recorded by encoder value and which have headers that start
with the word NPTS and have the mono d-spacing and steps-per-degree
in the second line. There is another common file format in the Lytle
database (the header begins with CUEDGE and does not record the mono
parameters) that is not handled by this plugin. See question 3 at
<a class="reference external" href="http://cars9.uchicago.edu/ifeffit/FAQ/Data_Handling">http://cars9.uchicago.edu/ifeffit/FAQ/Data_Handling</a>.</dd>
</dl>

<br>

<br>
<hr class="docutils" />
<p><font size=-1 color="#8C4112">DEMETER</font> is copyright © 2009-2016 Bruce Ravel – This document is
copyright © 2016 Bruce Ravel</p>
<p>This document is licensed under <a class="reference external" href="http://creativecommons.org/licenses/by-sa/3.0/">The Creative Commons Attribution-ShareAlike License</a>.</p>
<p>If <font size=-1 color="#8C4112">DEMETER</font> and this document are useful to you, please
consider <a class="reference external" href="http://creativecommons.org/support/">supporting The Creative Commons</a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/Isis-Sothis-Demeter_sm.jpg" alt="Logo"/>
            </a></p>
<h3><a href="../index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">1. Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">2. The basics of data processing</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="mue.html">2.1. μ(E) data files</a></li>
<li class="toctree-l2"><a class="reference internal" href="chi.html">2.2. χ(k) data files</a></li>
<li class="toctree-l2"><a class="reference internal" href="columns.html">2.3. Column data files</a></li>
<li class="toctree-l2"><a class="reference internal" href="athena.html">2.4. Athena project files</a></li>
<li class="toctree-l2"><a class="reference internal" href="mc.html">2.5. Multichannel data files</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">2.6. Special data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="other.html">2.7. Handling arbitrary data</a></li>
<li class="toctree-l2"><a class="reference internal" href="plot.html">2.8. Plotting and basic data processing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mue/index.html">3. Processing μ(E) data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../xanes/index.html">4. Analysis of XANES data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../highlevel/index.html">5. High level actions of the object model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../atoms.html">6. Atoms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../feff/index.html">7. Feff</a></li>
<li class="toctree-l1"><a class="reference internal" href="../paths/index.html">8. Scattering paths</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gds.html">9. Guess/Def/Set Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fit/index.html">10. Fitting EXAFS data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../perl.html">11. Using perl to structure a fit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lgcv.html">12. Local guess parameters and the characteristic value</a></li>
</ul>
<h3>Helpful Links</h3>
<p>Current version: <b>0.9.24</b></p>

<ul>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.io/demeter/">Demeter homepage</a>
  <li>&nbsp; &nbsp; <a href="https://github.com/bruceravel/demeter/">Demeter @ github</a>
  <li>&nbsp; &nbsp; <a href="https://github.com/newville/ifeffit">Ifeffit</a>
  <li>&nbsp; &nbsp; <a href="http://xraypy.github.io/xraylarch/">Larch</a>
  <li>&nbsp; &nbsp; <a href="http://xafs.org/">xafs.org</a>
</ul>
<ul>
  <li>&nbsp; &nbsp; <a href="http://cars9.uchicago.edu/mailman/listinfo/ifeffit/">Ifeffit mailing list</a>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.com/demeter/pods/bugs.pod.html">Bug reporting hints</a>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.com/demeter/pods/help.pod.html">How to ask a good question</a>
</ul>
<p>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/data/special.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="other.html" title="2.7. Handling arbitrary data"
             >next</a></li>
        <li class="right" >
          <a href="mc.html" title="2.5. Multichannel data files"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Demeter Programming Guide 0.9.24 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >2. The basics of data processing</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Bruce Ravel.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.3.
    </div>
  </body>
</html>