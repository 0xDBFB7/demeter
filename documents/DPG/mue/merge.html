<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>3.2. Merging data &mdash; Demeter Programming Guide 0.9.24 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.24',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/wheat.ico"/>
    <link rel="top" title="Demeter Programming Guide 0.9.24 documentation" href="../index.html" />
    <link rel="up" title="3. Processing μ(E) data" href="index.html" />
    <link rel="next" title="3.3. Deglitching data" href="deglitch.html" />
    <link rel="prev" title="3.1. Aligning data" href="align.html" />

    <link rel="stylesheet" type="text/css" href="../_static/demeter.css" />
    <link rel="stylesheet" type="text/css" href="../_static/keys.css" />
    <link rel="stylesheet" type="text/css" href="../_static/program.css" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="deglitch.html" title="3.3. Deglitching data"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="align.html" title="3.1. Aligning data"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Demeter Programming Guide 0.9.24 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">3. Processing μ(E) data</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="merging-data">
<h1>3.2. Merging data<a class="headerlink" href="#merging-data" title="Permalink to this headline">¶</a></h1>
<p>Merging data is one of the essential data processing steps. As with
every thing, <font size=-1 color="#8C4112">DEMETER</font> tries to make merging as easy as
possible:</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="k">my</span> <span class="nv">$merged</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">merge</span><span class="p">(</span><span class="s">&#39;e&#39;</span><span class="p">,</span> <span class="nv">@data</span><span class="p">);</span>
</pre></div>
</div>
<p>The first argument to the <code class="docutils literal"><span class="pre">merge</span></code> method specifies which spectrum is
merged: <code class="docutils literal"><span class="pre">e</span></code> means to merge μ(E), <code class="docutils literal"><span class="pre">n</span></code> means to merge normalized
μ(E), and <code class="docutils literal"><span class="pre">k</span></code> means to merge χ(k).</p>
<p>Care is taken not to double count the caller. This is a convenience
because, as shown above, you can pass an entire array which also
contains the caller.</p>
<p>The <code class="docutils literal"><span class="pre">merge</span></code> method returns a new Data object.</p>
<p>Both of the plot types below (<code class="docutils literal"><span class="pre">stddev</span></code> and <code class="docutils literal"><span class="pre">varience</span></code>) plot ignore
many setting of the Plot object in order to plot the data in the form in
which it was merged. Attempting to plot the standard deviation or
variance plots with a Data object that does not contain merged data will
return as error.</p>
<div class="section" id="plot-merged-data-with-standard-deviation">
<h2>3.2.1. Plot merged data with standard deviation<a class="headerlink" href="#plot-merged-data-with-standard-deviation" title="Permalink to this headline">¶</a></h2>
<div class="highlight-perl"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre>   <span class="c1">#!/usr/bin/perl</span>
   <span class="k">use</span> <span class="n">Demeter</span><span class="p">;</span>
   <span class="k">my</span> <span class="nv">@common</span> <span class="o">=</span> <span class="p">(</span><span class="n">energy</span> <span class="o">=&gt;</span> <span class="s">&#39;$1&#39;</span><span class="p">,</span> <span class="n">numerator</span> <span class="o">=&gt;</span> <span class="s">&#39;$2&#39;</span><span class="p">,</span> <span class="n">denominator</span> <span class="o">=&gt;</span> <span class="s">&#39;$3&#39;</span><span class="p">,</span> <span class="n">ln</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,);</span>
   <span class="k">my</span> <span class="nv">$prj</span> <span class="o">=</span> <span class="nn">Demeter::Data::</span><span class="n">Prj</span> <span class="o">-&gt;</span> <span class="k">new</span><span class="p">(</span><span class="n">file</span><span class="o">=&gt;</span><span class="s">&#39;U_DNA.prj&#39;</span><span class="p">);</span>
   <span class="k">my</span> <span class="nv">@data</span> <span class="o">=</span> <span class="p">(</span>
               <span class="nn">Demeter::</span><span class="n">Data</span> <span class="o">-&gt;</span> <span class="k">new</span><span class="p">(</span><span class="n">file</span> <span class="o">=&gt;</span> <span class="s">&#39;examples/data/fe.060&#39;</span><span class="p">,</span>
                                    <span class="n">name</span> <span class="o">=&gt;</span> <span class="s">&quot;Fe scan 1&quot;</span><span class="p">,</span>
                                    <span class="nv">@common</span><span class="p">,</span>
                                   <span class="p">),</span>
               <span class="nn">Demeter::</span><span class="n">Data</span> <span class="o">-&gt;</span> <span class="k">new</span><span class="p">(</span><span class="n">file</span> <span class="o">=&gt;</span> <span class="s">&#39;examples/data/fe.061&#39;</span><span class="p">,</span>
                                    <span class="n">name</span> <span class="o">=&gt;</span> <span class="s">&quot;Fe scan 2&quot;</span><span class="p">,</span>
                                    <span class="nv">@common</span><span class="p">,</span>
                                   <span class="p">),</span>
               <span class="nn">Demeter::</span><span class="n">Data</span> <span class="o">-&gt;</span> <span class="k">new</span><span class="p">(</span><span class="n">file</span> <span class="o">=&gt;</span> <span class="s">&#39;examples/data/fe.062&#39;</span><span class="p">,</span>
                                    <span class="n">name</span> <span class="o">=&gt;</span> <span class="s">&quot;Fe scan 3&quot;</span><span class="p">,</span>
                                    <span class="nv">@common</span><span class="p">,</span>
                                   <span class="p">),</span>
              <span class="p">);</span>
   <span class="k">my</span> <span class="nv">$merged</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="n">merge</span><span class="p">(</span><span class="s">&#39;e&#39;</span><span class="p">,</span> <span class="nv">@data</span><span class="p">);</span>
   <span class="nv">$merged</span> <span class="o">-&gt;</span> <span class="n">plot</span><span class="p">(</span><span class="s">&#39;stddev&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<div class="figure align-left" id="id2">
<span id="fig-stddev"></span><a class="reference external image-reference" href="../_images/merge_stddev.png"><img alt="../_images/merge_stddev.png" src="../_images/merge_stddev.png" /></a>
<p class="caption"><span class="caption-number">Fig. 3.1 </span><span class="caption-text">This shows the merge of μ(E) of 3 iron foil scans along with
the standard deviation array.</span></p>
</div>

<br clear="all">
<p>The standard deviation has been added to and subtracted from the
μ(E) spectrum, so the red trace is an error margin for the
μ(E) spectrum. Note that this plot type can only be plotted using
a Data object which contains the data from a merge. Trying to plot a
non-merged Data object in this way will return a warning without
plotting anything.</p>
</div>
<div class="section" id="id1">
<h2>3.2.2. Plot merged data with standard deviation<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Change line 20 in the script shown above to this:</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="nv">$merged</span> <span class="o">-&gt;</span> <span class="n">plot</span><span class="p">(</span><span class="s">&#39;variance&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="figure align-left" id="id3">
<span id="fig-variance"></span><a class="reference external image-reference" href="../_images/merge_variance.png"><img alt="../_images/merge_variance.png" src="../_images/merge_variance.png" /></a>
<p class="caption"><span class="caption-number">Fig. 3.2 </span><span class="caption-text">This shows the merge of μ(E) of 3 iron foil scans along with
the standard deviation array.</span></p>
</div>

<br clear="all">
<p>The standard deviation has been scaled to plot with the μ(E)
spectrum, with the scaling factor is given in the legend. This, then,
is a way of visualizing how the standard deviation is distributed
across the spectrum. Note that this plot type can only be plotted
using a Data object which contains the data from a merge. Trying to
plot a non-merged Data object in this way will return a warning
without plotting anything.</p>

<br>

<br>
<hr class="docutils" />
<p><font size=-1 color="#8C4112">DEMETER</font> is copyright © 2009-2016 Bruce Ravel – This document is
copyright © 2016 Bruce Ravel</p>
<p>This document is licensed under <a class="reference external" href="http://creativecommons.org/licenses/by-sa/3.0/">The Creative Commons Attribution-ShareAlike License</a>.</p>
<p>If <font size=-1 color="#8C4112">DEMETER</font> and this document are useful to you, please
consider <a class="reference external" href="http://creativecommons.org/support/">supporting The Creative Commons</a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/Isis-Sothis-Demeter_sm.jpg" alt="Logo"/>
            </a></p>
<h3><a href="../index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data/index.html">2. The basics of data processing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">3. Processing μ(E) data</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="align.html">3.1. Aligning data</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">3.2. Merging data</a></li>
<li class="toctree-l2"><a class="reference internal" href="deglitch.html">3.3. Deglitching data</a></li>
<li class="toctree-l2"><a class="reference internal" href="truncate.html">3.4. Truncating data</a></li>
<li class="toctree-l2"><a class="reference internal" href="noise.html">3.5. Adding artificial nose to data</a></li>
<li class="toctree-l2"><a class="reference internal" href="smooth.html">3.6. Smoothing data</a></li>
<li class="toctree-l2"><a class="reference internal" href="convolve.html">3.7. Convolving data</a></li>
<li class="toctree-l2"><a class="reference internal" href="deconvolve.html">3.8. Deconvolving data</a></li>
<li class="toctree-l2"><a class="reference internal" href="rebin.html">3.9. Rebinning data</a></li>
<li class="toctree-l2"><a class="reference internal" href="dispersive.html">3.10. Processing dispersive XAS data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../xanes/index.html">4. Analysis of XANES data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../highlevel/index.html">5. High level actions of the object model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../atoms.html">6. Atoms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../feff/index.html">7. Feff</a></li>
<li class="toctree-l1"><a class="reference internal" href="../paths/index.html">8. Scattering paths</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gds.html">9. Guess/Def/Set Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fit/index.html">10. Fitting EXAFS data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../perl.html">11. Using perl to structure a fit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lgcv.html">12. Local guess parameters and the characteristic value</a></li>
</ul>
<h3>Helpful Links</h3>
<p>Current version: <b>0.9.24</b></p>

<ul>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.io/demeter/">Demeter homepage</a>
  <li>&nbsp; &nbsp; <a href="https://github.com/bruceravel/demeter/">Demeter @ github</a>
  <li>&nbsp; &nbsp; <a href="https://github.com/newville/ifeffit">Ifeffit</a>
  <li>&nbsp; &nbsp; <a href="http://xraypy.github.io/xraylarch/">Larch</a>
  <li>&nbsp; &nbsp; <a href="http://xafs.org/">xafs.org</a>
</ul>
<ul>
  <li>&nbsp; &nbsp; <a href="http://cars9.uchicago.edu/mailman/listinfo/ifeffit/">Ifeffit mailing list</a>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.com/demeter/pods/bugs.pod.html">Bug reporting hints</a>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.com/demeter/pods/help.pod.html">How to ask a good question</a>
</ul>
<p>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/mue/merge.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="deglitch.html" title="3.3. Deglitching data"
             >next</a></li>
        <li class="right" >
          <a href="align.html" title="3.1. Aligning data"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Demeter Programming Guide 0.9.24 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >3. Processing μ(E) data</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Bruce Ravel.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.3.
    </div>
  </body>
</html>