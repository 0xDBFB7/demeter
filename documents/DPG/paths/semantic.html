<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>8.2. Semantic path descriptions &mdash; Demeter Programming Guide 0.9.25 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.25',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/wheat.ico"/>
    <link rel="top" title="Demeter Programming Guide 0.9.25 documentation" href="../index.html" />
    <link rel="up" title="8. Scattering paths" href="index.html" />
    <link rel="next" title="8.3. Path parameters" href="pathparams.html" />
    <link rel="prev" title="8.1. Calculating individual scattering paths" href="paths.html" />

    <link rel="stylesheet" type="text/css" href="../_static/demeter.css" />
    <link rel="stylesheet" type="text/css" href="../_static/keys.css" />
    <link rel="stylesheet" type="text/css" href="../_static/program.css" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="pathparams.html" title="8.3. Path parameters"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="paths.html" title="8.1. Calculating individual scattering paths"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Demeter Programming Guide 0.9.25 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">8. Scattering paths</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="semantic-path-descriptions">
<h1>8.2. Semantic path descriptions<a class="headerlink" href="#semantic-path-descriptions" title="Permalink to this headline">¶</a></h1>
<p><font size=-1 color="#8C4112">DEMETER</font> does away with the old-fashioned way of organizing
the paths calculated in a <font size=-1 color="#8C4112">FEFF</font> calculation.  The
“path index” is no longer explicitly used in a
<font size=-1 color="#8C4112">DEMETER</font> program. Nonetheless, to build Path objects from a
list of ScatteringPath objects, you need to know something about which
path is which. The <a class="reference external" href="../feff/intrp.tt">path interpretation</a> is one
good way of obtaining information about the list of paths, but it is
not especially useful for finding automated solutions to building
fitting models.</p>
<p>Consider a situation where a molecule is adsorbed to a surface. As an
example, consider a ruthenium complex on an aluminum oxide support. One
might run a series of DFT or molecular dynamics calculations in an
attempt to determine the position at the surface where the molecule
rests. Presumably the scattering from the atoms in the surface will be
used to identify the surface position by analysis of the EXAFS data.
Given several candidate positions, one would automate the construction
of a simple fitting model which includes scattering from surface atoms.</p>
<p>The difficulty of this approach is that the single scattering paths from
atoms in the surface might be in different positions in <font size=-1 color="#8C4112">FEFF</font>'s path list
depending on details of the structural geometry. If you want to include
a single scattering path from, to use the example with the aluminum
oxide support, an aluminum atom in the surface. Doing so is difficult to
automate as you may not know <font size=-1 color="#8C4112">FEFF</font>'s path index for that path going into
the fit.</p>
<p><font size=-1 color="#8C4112">DEMETER</font> offers a solution to this problem. You can specify a path using
a semnatic description of the path. For example, you can find the single
scattering path which scatters from aluminum and is between 3 and 4 Å
from the scatterer. The following snippet of code imports a <font size=-1 color="#8C4112">FEFF</font>
calculation from its serialization file and finds the path meeting that
description:</p>
<div class="highlight-perl"><div class="highlight"><pre><span></span><span class="k">my</span> <span class="nv">$feff</span> <span class="o">=</span> <span class="nn">Demeter::</span><span class="n">Feff</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span><span class="n">yaml</span><span class="o">=&gt;</span><span class="s">&#39;myfeff.yaml&#39;</span><span class="p">,</span> <span class="n">workspace</span><span class="o">=&gt;</span><span class="s">&#39;mycalc&#39;</span><span class="p">);</span>
<span class="k">my</span> <span class="nv">$this_sp</span> <span class="o">=</span> <span class="nv">$feff</span><span class="o">-&gt;</span><span class="n">find_path</span><span class="p">(</span><span class="ow">gt</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">,</span> <span class="ow">lt</span><span class="o">=&gt;</span><span class="mi">4</span><span class="p">,</span> <span class="n">tag</span><span class="o">=&gt;</span><span class="p">[</span><span class="s">&#39;Al&#39;</span><span class="p">]);</span>
<span class="k">my</span> <span class="nv">$path</span> <span class="o">=</span> <span class="nn">Demeter::</span><span class="n">Path</span> <span class="o">-&gt;</span> <span class="k">new</span><span class="p">(</span><span class="n">feff</span> <span class="o">=&gt;</span> <span class="nv">$feff</span><span class="p">,</span>
                                <span class="n">sp</span>   <span class="o">=&gt;</span> <span class="nv">$this_sp</span><span class="p">,</span>
                               <span class="p">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">find_path</span></code> method examines all the paths in a Feff objects path
list and compares them against the semantic descriptions given as
arguments to the method. In this case, the path that gets returned
must have a half path length greater than 3 Å and less that 4
Å. As the anonymous list given as the tag argument has only one
element, the path that returns must be a single scattering path. The
scatterer must have a site tag that equals the string “Al”.</p>
<p>If there are more than one path meeting the criteria outlined in the
argument, then the <code class="docutils literal"><span class="pre">find_path</span></code> method returns the shortest such
path.  The <code class="docutils literal"><span class="pre">find_all_paths</span></code> takes the same sort of argument list as
<code class="docutils literal"><span class="pre">find_path</span></code> and will return a list of paths meeting the criteria and
ordered by increasing half path length.</p>
<p>Here are all the criteria available to the <code class="docutils literal"><span class="pre">find_path</span></code> and
<code class="docutils literal"><span class="pre">find_all_paths</span></code> methods:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">lt</span></code></dt>
<dd>This criterion takes a number and requires that the returned path be
shorter in half path length than that number.</dd>
<dt><code class="docutils literal"><span class="pre">gt</span></code></dt>
<dd>This criterion takes a number and requires that the returned path be
longer in half path length than that number.</dd>
<dt><code class="docutils literal"><span class="pre">nleg</span></code></dt>
<dd>This criterion takes an integer and requires that the returned path
have this number of scattering legs. This criterion is redundant
when the list-valued criteria are also used.</dd>
<dt><code class="docutils literal"><span class="pre">sp</span></code></dt>
<dd>This criterion takes a ScatteringPath object and requires that the
returned path be longer in half path length than that path.</dd>
<dt><code class="docutils literal"><span class="pre">tag</span></code></dt>
<dd>This criterion takes a string or an anonymous array of strings and
requires that the returned path contain the atoms which have this
(these) tags. The tag is the optional fifth column in a <code class="file docutils literal"><span class="pre">feff.inp</span></code>
file written by Demeter's Atoms. This criterion requires that the
tags are lexically equal. See the tagmatch criterion for matching
tags in the sense of regular expressions.</dd>
<dt><code class="docutils literal"><span class="pre">tagmatch</span></code></dt>
<dd>This criterion takes a string or an anonymous array of strings and
requires that the returned path contain the atoms which have tags
matching the arguments of this criterion. The tag is the optional
fifth column in a <code class="file docutils literal"><span class="pre">feff.inp</span></code> file written by Demeter's Atoms. This
criterion requires that the tags match in the sense of regular
expressions. See the tag criterion for requiring that tags be
lexically equal.</dd>
<dt><code class="docutils literal"><span class="pre">ipot</span></code></dt>
<dd>This criterion takes an integer from 0 to 7 or an anonymous array of
such integers and requires that the returned path contain the atoms
which have ipots equal to the arguments of this criterion.</dd>
<dt><code class="docutils literal"><span class="pre">element</span></code></dt>
<dd>This criterion takes a string identifying an element (its name, its
one or two letter symbol or its Z number) or an anonymous array of
such strings and requires that the returned path contain the atoms
which have the elements specified.</dd>
</dl>
<p>This method returns 0 if a path meeting the criteria cannot be found or
if there is an error in specifying the criteria.</p>
<p>The list-valued criterion are compared in order with the scattering
atoms in a path and the match is only true if each element hits with
the corresponding scatterer in a path.  Thus, it is not necessary to
specify the nleg criterion when any of the list valued criteria are
used.</p>
<p>Here is an example of using the <code class="docutils literal"><span class="pre">find_all_paths</span></code> method to find all
single scattering paths in a <font size=-1 color="#8C4112">FEFF</font> calculcation which are
shorter than 6 Å.</p>
<div class="highlight-perl"><div class="highlight"><pre><span></span><span class="k">my</span> <span class="nv">@list</span> <span class="o">=</span> <span class="nv">$feff</span><span class="o">-&gt;</span><span class="n">find_all_paths</span><span class="p">(</span> <span class="ow">lt</span><span class="o">=&gt;</span><span class="mi">6</span><span class="p">,</span> <span class="n">nleg</span><span class="o">=&gt;</span><span class="mi">2</span> <span class="p">);</span>
</pre></div>
</div>
<p>For more details, see the Demeter::Feff::Paths documentation.</p>
<p>The <a class="reference external" href="../examples/hgdna.tt">example of Hg absorbed to DNA</a>
demonstrates extensive use of the <code class="docutils literal"><span class="pre">find_path</span></code> method. The <a class="reference external" href="../examples/agau.tt">silver/gold
alloy example</a> also makes strategic use of this
tool.</p>

<br>

<br>
<hr class="docutils" />
<p><font size=-1 color="#8C4112">DEMETER</font> is copyright © 2009-2016 Bruce Ravel – This document is
copyright © 2016 Bruce Ravel</p>
<p>This document is licensed under <a class="reference external" href="http://creativecommons.org/licenses/by-sa/3.0/">The Creative Commons Attribution-ShareAlike License</a>.</p>
<p>If <font size=-1 color="#8C4112">DEMETER</font> and this document are useful to you, please
consider <a class="reference external" href="http://creativecommons.org/support/">supporting The Creative Commons</a>.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/Isis-Sothis-Demeter_sm.jpg" alt="Logo"/>
            </a></p>
<h3><a href="../index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data/index.html">2. The basics of data processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mue/index.html">3. Processing μ(E) data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../highlevel/index.html">4. High level actions of the object model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../xanes/index.html">5. Analysis of XANES data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../atoms.html">6. Atoms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../feff/index.html">7. Feff</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">8. Scattering paths</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="paths.html">8.1. Calculating individual scattering paths</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">8.2. Semantic path descriptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="pathparams.html">8.3. Path parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="plot.html">8.4. Plotting individual paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="existing.html">8.5. Running Feff outside of Demeter</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../gds.html">9. Guess/Def/Set Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fit/index.html">10. Fitting EXAFS data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../perl.html">11. Using perl to structure a fit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lgcv.html">12. Local guess parameters and the characteristic value</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pathlike/index.html">13. Path-like objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ui.html">14. User interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../output.html">15. Output formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">16. Full examples</a></li>
</ul>
<h3>Helpful Links</h3>
<p>Current version: <b>0.9.25</b></p>

<ul>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.io/demeter/">Demeter homepage</a>
  <li>&nbsp; &nbsp; <a href="https://github.com/bruceravel/demeter/">Demeter @ github</a>
  <li>&nbsp; &nbsp; <a href="http://cars9.uchicago.edu/mailman/listinfo/ifeffit/">Ifeffit mailing list</a>
  <li>&nbsp; &nbsp; <a href="http://xraypy.github.io/xraylarch/">Larch homepage</a>
  <li>&nbsp; &nbsp; <a href="https://github.com/newville/ifeffit">Ifeffit @ github</a>
  <li>&nbsp; &nbsp; <a href="http://xafs.org/">xafs.org</a>
</ul>
<ul>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.io/demeter/documents/Athena/index.html">Athena manual</a>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.io/demeter/documents/Artemis/index.html">Artemis manual</a>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.io/demeter/documents/SinglePage/bugs.html">Bug reporting hints</a>
  <li>&nbsp; &nbsp; <a href="http://bruceravel.github.io/demeter/documents/SinglePage/help.html">How to ask a good question</a>
</ul>
<p>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/paths/semantic.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="pathparams.html" title="8.3. Path parameters"
             >next</a></li>
        <li class="right" >
          <a href="paths.html" title="8.1. Calculating individual scattering paths"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Demeter Programming Guide 0.9.25 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >8. Scattering paths</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Bruce Ravel.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.3.
    </div>
  </body>
</html>