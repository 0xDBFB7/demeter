<!DOCTYPE HTMP PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Path interpretation</title>
    <link rel="stylesheet" href=../ab.css />
    <link rel="stylesheet" href=../ppi.css />
    <meta http-equiv="Content-Type" content="text/html"; charset=iso-8859-15 />
    <meta name="robots" contents="all" />
  </head>

  <body>
    <div class=topbar>
  <div class=navbar>
  <table class=navtable>
    <tr>
      <td align=left>
        [&nbsp;<a href="../index.html">Home</a>&nbsp;] &nbsp;&nbsp;
        [&nbsp;<a href="http://cars9.uchicago.edu/iffwiki/Demeter"><span class=programlink>DEMETER</span></a>&nbsp;] &nbsp;&nbsp;
        [&nbsp;<a href="http://cars9.uchicago.edu/iffwiki/Ifeffit"><span class=programlink>IFEFFIT</span></a>&nbsp;] &nbsp;&nbsp;
        [&nbsp;<a href="http://leonardo.phys.washington.edu/feff/wiki/index.php?title=FEFF_Documentation"><span class=programlink>FEFF</span></a>&nbsp;] &nbsp;&nbsp;
        [&nbsp;<a href="http://xafs.org">xafs.org</a>&nbsp;] &nbsp;&nbsp;
	[&nbsp;<a href="../demeter.pdf">PDF&nbsp;doc</a>&nbsp;]
      </td>
      <td align=right>
        Back: <a href="../feff/pathfinder.html" class="menu" >Running the path finder</a>
        
        &nbsp;&nbsp;
        Up: <a href="../feff/index.html" class="menu" >Feff</a>      </td>
    </tr>
  </table>
  </div>
  <h1>
  Path interpretation
</h1>
</div>

<hr class=hide />


<div class=sidebar>
  <a href="../ceres.html"><img src=../../images/Isis-Sothis-Demeter_sm.jpg
    width=100% border=0 alt='[Demeter logo]'></a>
  <br />
  <a href="../index.html" class="menu" >Home</a><br />
<a href="../intro.html" class="menu" >Introduction</a><br />
<a href="../data/index.html" class="menu" >Importing data</a><br />
<a href="../mue/index.html" class="menu" >Processing mu(E) data</a><br />
<a href="../xanes/index.html" class="menu" >Analysis of XANES data</a><br />
<a href="../highlevel/index.html" class="menu" >High level actions for Demeter objects</a><br />
<a href="../atoms/index.html" class="menu" >Atoms</a><br />
<br />
<a href="../feff/index.html" class="menuselect" >Feff</a><br />
&nbsp;-&nbsp;<a href="../feff/input.html" class="menu" >Feff input</a><br />
&nbsp;-&nbsp;<a href="../feff/potph.html" class="menu" >Calculating potentials</a><br />
&nbsp;-&nbsp;<a href="../feff/pathfinder.html" class="menu" >Running the path finder</a><br />
&nbsp;-&nbsp;<a href="../feff/intrp.html" class="menuselect" >Path interpretation</a><br /><br />
<a href="../paths/index.html" class="menu" >Scattering paths</a><br />
<a href="../gds/index.html" class="menu" >Guess/Def/Set parameters</a><br />
<a href="../fit/index.html" class="menu" >Fitting EXAFS data</a><br />
<a href="../perl/index.html" class="menu" >Using perl to create a fitting model</a><br />
<a href="../lgcv.html" class="menu" >Local guess parameters and the characteristic value</a><br />
<a href="../pathlike/index.html" class="menu" >Path-like objects</a><br />
<a href="../su.html" class="menu" >Structural Units</a><br />
<a href="../ui.html" class="menu" >User interfaces</a><br />
<a href="../output.html" class="menu" >Output formats</a><br />
<a href="../examples/index.html" class="menu" >Full examples</a><br />
</div>

<p>

The hard part of using  <span class=program>FEFF</span> effectively is keeping track of all
the paths.  The main tool  <span class=program>DEMETER</span> offers for this is the path
interpretation. 
</p>


<pre class=olscript>
<ol class=perlblock>
<li><span class="comment">#!/usr/bin/perl
<li></span><span class="keyword">use</span> <span class="word">Demeter</span><span class="structure">;</span>
<li>
<li><span class="keyword">my</span> <span class="symbol">$feff</span> <span class="operator">=</span> <span class="word">Demeter::Feff</span> <span class="operator">-&gt;</span> <span class="word">new</span><span class="structure">(</span><span class="word">file</span> <span class="operator">=&gt;</span> <span class="double">&quot;feff/feff.inp&quot;</span><span class="structure">);</span>
<li><span class="symbol">$feff</span> <span class="operator">-&gt;</span> <span class="word">set</span><span class="structure">(</span><span class="word">workspace</span> <span class="operator">=&gt;</span> <span class="double">&quot;feff/&quot;</span><span class="operator">,</span> <span class="word">screen</span> <span class="operator">=&gt;</span> <span class="number">0</span><span class="operator">,</span><span class="structure">);</span>
<li><span class="symbol">$feff</span> <span class="operator">-&gt;</span> <span class="word">potph</span>
<li><span class="symbol">$feff</span> <span class="operator">-&gt;</span> <span class="word">pathfinder</span><span class="structure">;</span>
<li><span class="word">print</span> <span class="symbol">$feff</span> <span class="operator">-&gt;</span> <span class="word">intrp</span><span class="structure">;</span>
</ol>
</pre>

<p>

or, using the serialization file introduced in the last section,
</p>


<pre class=olscript>
<ol class=perlblock>
<li><span class="comment">#!/usr/bin/perl
<li></span><span class="keyword">use</span> <span class="word">Demeter</span><span class="structure">;</span>
<li>
<li><span class="keyword">my</span> <span class="symbol">$feff</span> <span class="operator">=</span> <span class="word">Demeter::Feff</span> <span class="operator">-&gt;</span> <span class="word">new</span><span class="structure">(</span><span class="word">yaml</span> <span class="operator">=&gt;</span> <span class="double">&quot;feff/feff.yaml&quot;</span><span class="structure">);</span>
<li><span class="word">print</span> <span class="symbol">$feff</span> <span class="operator">-&gt;</span> <span class="word">intrp</span><span class="structure">;</span>
</ol>
</pre>

<p>

Here is what gets printed out by the line with the
<tt>intrp</tt> method:
</p>


<pre>
# Hg at site 15 in thymidine            
# This paths.dat file was written by Demeter 0.3.0
# The central atom is denoted by this token: <+>  
# Cluster size = 4.50000 Angstroms, containing 21 atoms
# 23 paths were found                                  
# Forward scattering cutoff 25.00                      
# Distance fuzz = 0.0300 Angstroms                     
# Angle fuzz = 3.0000 degrees                          
# Suppressing eta: yes                                 
# -------------------------------------------------------------------------------
#     degen   Reff       scattering path                       I legs   type
 0001   1    2.040  ----  <+> N16    <+>                       2  2 single scattering
 0002   2    2.923  ----  <+> C      <+>                       2  2 single scattering
 0003   2    3.036  ----  <+> O      <+>                       2  2 single scattering
 0004   4    3.171  ----  <+> C      N16    <+>                1  3 obtuse triangle
 0005   2    3.418  ----  <+> N16    C      N16    <+>         0  4 dog-leg
 0006   4    3.591  ----  <+> C      O      <+>                0  3 other double scattering
 0007   4    3.676  ----  <+> O      N16    <+>                0  3 other double scattering
 0008   1    4.080  ----  <+> N16    <+>    N16    <+>         1  4 rattle
 0009   2    4.146  ----  <+> C      O      C      <+>         0  4 dog-leg
 0010   2    4.159  ----  <+> C      C      <+>                1  3 acute triangle
 0011   1    4.191  ----  <+> N13    <+>                       2  2 single scattering
 0012   2    4.244  ----  <+> N13    C      <+>                1  3 obtuse triangle
 0013   2    4.258  ----  <+> O      C      O      <+>         0  4 dog-leg
 0014   1    4.263  ----  <+> C      <+>                       2  2 single scattering
 0015   2    4.267  ----  <+> N13    N16    <+>                1  3 obtuse triangle
 0016   2    4.301  ----  <+> C      N16    C      <+>         0  4 dog-leg
 0017   1    4.297  ----  <+> C      N13    C      <+>         0  4 dog-leg
 0018   2    4.317  ----  <+> N16    O      N16    <+>         0  4 dog-leg
 0019   2    4.314  ----  <+> C      C      <+>                1  3 obtuse triangle
 0020   2    4.342  ----  <+> N16    C      <+>                1  3 obtuse triangle
 0021   1    4.343  ----  <+> N16    N13    N16    <+>         0  4 dog-leg
 0022   1    4.364  ----  <+> C      C      C      <+>         0  4 dog-leg
 0023   1    4.420  ----  <+> N16    C      N16    <+>         0  4 dog-leg
</pre>

<p>

This should be familiar to the  <span class=program>ARTEMIS</span> user.  The paths are
presented in order of increasing half-path-length and each line
provides an overview of the geometry of the path, starting with the
degeneracy, the half-path-length, and a textual description of the
atoms in the path.
</p>

<p>
The line labeled <em>I</em> is the 
&ldquo;importance&rdquo; of the path.  This is an
integer -- 0, 1, or 2 -- which  <span class=program>DEMETER</span> assigns based on some
heuristics for the likelihood that  the path will contribute
significantly  to the fit.  The high importance paths with value 2 are
the single scattering and colinear multiple scattering paths.  The mid
importance paths tend to be short triangles.
</p>

<p>
The last column is a description of the shape of the path.  The header
contains some statistics about the cluster and the values of some of
the relevant configuration parameters.
</p>

<p>
As you will see in the next chapter, there is a way of obtaining a
single lines from the path interpretation.
</p>


<a name="interpretatonoutputtargets.">

<h3>  Interpretaton output targets.</h3>
</a>

<p>

The <tt>intrp</tt> method can take an optional
argument which is used to format the path interpretation.  The
argument can be either a string or 
<a href="http://perldoc.perl.org/perlref.html">an anonymous hash</a>.
The string can be either &ldquo;latex&rdquo; or
&ldquo;css&rdquo;.  With those, the path interpretation
will be mark-up such that it can be inserted into a latex document
using a tabular environment or into an html document using CSS and 
span tags to format the text.
This formatting works by inserting text at the beginning and ending of
each line appropriate to the header or to the importance of the path.
</p>

<p>
The anonymous hash option allows you to specify a different set of
starting and ending tags for the lines in the interpretation.  It
looks like this:
</p>


<ol class=perlsample>
<br />
&nbsp;&nbsp;<span class="keyword">my</span> <span class="symbol">$formatting</span> <span class="operator">=</span> <span class="structure">{</span><span class="single">'comment'</span> <span class="operator">=&gt;</span> <span class="symbol">$comment_start_tag</span><span class="operator">,</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'close'</span>&nbsp;&nbsp;&nbsp;<span class="operator">=&gt;</span> <span class="symbol">$closing_tag</span><span class="operator">,</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'1'</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="operator">=&gt;</span> <span class="symbol">$mid_start_tag</span><span class="operator">,</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'2'</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="operator">=&gt;</span> <span class="symbol">$high_start_tag</span><span class="operator">,</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'0'</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="operator">=&gt;</span> <span class="symbol">$low_start_tag</span><span class="operator">,</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">};</span><br />
&nbsp;&nbsp;<span class="symbol">$feff</span> <span class="operator">-&gt;</span> <span class="word">intrp</span><span class="structure">(</span><span class="symbol">$formatting</span><span class="structure">);</span>
</ol>

<p>

The command line <tt>intrp</tt> program that comes
with  <span class=program>DEMETER</span> colorizes the text on the screen by assigning ANSI
color control sequences as the values of the anonymous hash.
</p>

<br />
<hr class=hide />

<div class=bottombar>
  <div class=navbar>
  <table class=navtable>
    <tr>
      <td align=left>
        [&nbsp;<a href="../index.html">Home</a>&nbsp;] &nbsp;&nbsp;
        [&nbsp;<a href="http://cars9.uchicago.edu/iffwiki/Demeter"><span class=programlink>DEMETER</span></a>&nbsp;] &nbsp;&nbsp;
        [&nbsp;<a href="http://cars9.uchicago.edu/iffwiki/Ifeffit"><span class=programlink>IFEFFIT</span></a>&nbsp;] &nbsp;&nbsp;
        [&nbsp;<a href="http://leonardo.phys.washington.edu/feff/wiki/index.php?title=FEFF_Documentation"><span class=programlink>FEFF</span></a>&nbsp;] &nbsp;&nbsp;
        [&nbsp;<a href="http://xafs.org">xafs.org</a>&nbsp;] &nbsp;&nbsp;
	[&nbsp;<a href="../demeter.pdf">PDF&nbsp;doc</a>&nbsp;]
      </td>
      <td align=right>
        Back: <a href="../feff/pathfinder.html" class="menu" >Running the path finder</a>
        
        &nbsp;&nbsp;
        Up: <a href="../feff/index.html" class="menu" >Feff</a>      </td>
    </tr>
  </table>
  </div>
  <div class=copyright>
   <span class=program>DEMETER</span> is copyright &copy; 2009-2011 Bruce Ravel
  <br />
  This document is copyright &copy; 2011 Bruce Ravel
  <br />
  email: (bravel |A|T| bnl |D|O|T| gov)
  <br />
  
  <a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="../../images/somerights20.png" width="88" height="31" alt="" border="0" /></a> &nbsp;&nbsp;&nbsp;
  <br />
  This document is licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/">
  The Creative Commons Attribution-ShareAlike License</a>.
  <br />
  If  <span class=program>DEMETER</span> and this document are useful to you, please consider
  <a href="http://creativecommons.org/support/">supporting The Creative Commons</a>.
</div>
</div>
  </body>
</html>