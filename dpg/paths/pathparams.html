<!DOCTYPE HTMP PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Path parameters</title>
    <link rel="stylesheet" href=../dpg.css />
    <link rel="stylesheet" href=../ppi.css />
    <meta http-equiv="Content-Type" content="text/html"; charset=iso-8859-15 />
    <meta name="robots" contents="all" />
  </head>

  <body>
    <div class=topbar>
  <div class=navbar>
  <a class=navhead href="../index.html">The Demeter Programmer' Guide</a>
  <table class=navtable>
    <tr>
      <td align=left>
        &laquo;<a class=navtable href="http://bruceravel.github.com/demeter/"><span class=programlink>DEMETER</span></a>&raquo; &nbsp;
        &laquo;<a class=navtable href="http://cars9.uchicago.edu/iffwiki/Ifeffit"><span class=programlink>IFEFFIT</span></a>&raquo; &nbsp;
        <!-- [&nbsp;<a class=navtable href="http://leonardo.phys.washington.edu/feff/wiki/index.php?title=FEFF_Documentation"><span class=programlink>FEFF</span></a>&nbsp;] &nbsp; -->
        &laquo;<a class=navtable href="http://xafs.org">xafs.org</a>&raquo; &nbsp;
	<!-- [&nbsp;<a class=navtable href="../demeter.pdf">PDF&nbsp;doc</a>&nbsp;] -->
      </td>
      <td align=right>
        Back: <a class=navtable href="../paths/semantic.html" class="menu">Semantic path descriptions</a> &nbsp;&nbsp;
        &nbsp;&nbsp;
        Up: <a class=navtable href="../paths/index.html" class="menu">Scattering paths</a> &nbsp;&nbsp;
        Next: <a class=navtable href="../paths/plot.html" class="menu">Plotting individual paths</a>      </td>
    </tr>
  </table>
  </div>
</div>

<div class=sidebar>
  <a href="../ceres.html"><img src=../../images/Isis-Sothis-Demeter_sm.jpg
    width=90% border=0 alt='[Demeter logo]'></a>
  <br />
  <a href="../index.html"  class="menu">Home</a><br />
<a href="../intro.html"  class="menu">Introduction</a><br />
<a href="../data/index.html"  class="menu">Importing data</a><br />
<a href="../mue/index.html"  class="menu">Processing mu(E) data</a><br />
<a href="../xanes/index.html"  class="menu">Analysis of XANES data</a><br />
<a href="../highlevel/index.html"  class="menu">High level actions for Demeter objects</a><br />
<a href="../atoms/index.html"  class="menu">Atoms</a><br />
<a href="../feff/index.html"  class="menu">Feff</a><br />
<a href="../paths/index.html"  class="menuselect">Scattering paths</a><br />
&nbsp;&#8618;&nbsp;<a href="../paths/paths.html"  class="menu">Calculating individual paths</a><br />
&nbsp;&#8618;&nbsp;<a href="../paths/semantic.html"  class="menu">Semantic path descriptions</a><br />
&nbsp;&#8618;&nbsp;<span style="font-style: italic;">Setting path parameters</span><br />
&nbsp;&#8618;&nbsp;<a href="../paths/plot.html"  class="menu">Plotting individual paths</a><br />
&nbsp;&#8618;&nbsp;<a href="../paths/existing.html"  class="menu">Using an existing Feff calculation</a><br /><a href="../gds/index.html"  class="menu">Guess/Def/Set parameters</a><br />
<a href="../fit/index.html"  class="menu">Fitting EXAFS data</a><br />
<a href="../perl/index.html"  class="menu">Using perl to create a fitting model</a><br />
<a href="../lgcv.html"  class="menu">Local guess parameters and the characteristic value</a><br />
<a href="../pathlike/index.html"  class="menu">Path-like objects</a><br />
<a href="../su.html"  class="menu">Structural Units</a><br />
<a href="../ui.html"  class="menu">User interfaces</a><br />
<a href="../output.html"  class="menu">Output formats</a><br />
<a href="../examples/index.html"  class="menu">Full examples</a><br />
</div>

<div class=contentarea>


<h1>
  Path parameters
</h1>

<p>

Once the ScatteringPath object is imported, the next step to setting
up a Path object for use in a fit is to set the path parameters.  The
available path parameters are
</p>


<dl>
  
<dt>
  label
</dt>
<dd>
A text string describing the path.
  <br />
  <br />
</dd>
<dt>
  degen
</dt>
<dd>
The path degeneracy.  This typically is set the degeneracy of the
ScatteringPath object when the
<tt>sp</tt> attribute is set, but can be modified
by the user as part o fthe fitting model.
  <br />
  <br />
</dd>
<dt>
  s02
</dt>
<dd>
Nominally, this is the amplitude reduction factor, but can be
parameterized to include any amplitude effects in the fitting model.
  <br />
  <br />
</dd>
<dt>
  e0
</dt>
<dd>
The energy shift, which changes the zero of k.
  <br />
  <br />
</dd>
<dt>
  delr
</dt>
<dd>
A change in the path length.
  <br />
  <br />
</dd>
<dt>
  sigma2
</dt>
<dd>
The mean square disorder parameters, &sigma;&sup2;.
  <br />
  <br />
</dd>
<dt>
  ei
</dt>
<dd>
An adjustment to the &ldquo;simaginary energy&rdquo;,
which has the effect of adjusting the broadening due to core-hole
lifetime, instrumental resolution, etc.  This has usings of eV.
  <br />
  <br />
</dd>
<dt>
  third
</dt>
<dd>
The third cumulant of the partial pair distribution.
  <br />
  <br />
</dd>
<dt>
  fourth
</dt>
<dd>
The fourth cumulant of the partial pair distribution.
  <br />
  <br />
</dd>
<dt>
  dphase
</dt>
<dd>
A constant offset to the scattering phase shift.  Note that this
should only be used for fits to &chi;(k) data derived from a DAFS or
reflectivity-XAFS measurement.  For normal XAFS, this path parameter
has no physical intepretation.
  <br />
  <br />
</dd>
</dl>

<p>

Except for <tt>label</tt> which takes a descriptive
string and <tt>degen</tt> which takes a number, all
the path parameter attributes take text strings which are for
interpretion as math expressions by <span class=program>IFEFFIT</span>.
</p>

<p>
The accessor methods for each of these path parameters is label in the
list above.  For example:
</p>


<ol class=perlsample>
<br />
&nbsp;&nbsp;<span class="comment">## get path parameter math expression:<br />
&nbsp;&nbsp;</span><span class="word">printf</span> <span class="double">&quot;deltaR=%s and sigma2=%s\n&quot;</span><span class="operator">,</span> <span class="symbol">$path</span><span class="operator">-&gt;</span><span class="word">delr</span><span class="operator">,</span> <span class="symbol">$path</span><span class="operator">-&gt;</span><span class="word">sigma2</span><span class="structure">;</span><br />
&nbsp;&nbsp;<span class="comment">## set a path parameter:<br />
&nbsp;&nbsp;</span><span class="symbol">$path</span><span class="operator">-&gt;</span><span class="word">s02</span><span class="structure">(</span><span class="double">&quot;(1-x) * amp&quot;</span><span class="structure">);</span>
</ol>

<p>

For the path parameter attributes that take math expression text
strings, there is another set of attributes that have the same names
but with <tt>_value</tt> appended to the end.
Whenever a Path object is plotted, used in a fit, or other wise
evaluated in <span class=program>IFEFFIT</span>, the evaluation of the math expression is
stored in the <tt>_value</tt> attribute.  Although
you can set one of the <tt>_value</tt> attributes,
that will usually have no effect as the value will be overwritten the
next time <span class=program>DEMETER</span> uses the path.  However, the
<tt>_value</tt> attributes are very useful for
obtaining the evaluations of the math expressions:
</p>


<ol class=perlsample>
<br />
&nbsp;&nbsp;<span class="comment">## get path parameter math expression:<br />
&nbsp;&nbsp;</span><span class="word">printf</span> <span class="double">&quot;deltaR evaluated to =%.5d\n&quot;</span><span class="operator">,</span> <span class="symbol">$path</span><span class="operator">-&gt;</span><span class="word">delr_value</span><span class="structure">;</span>
</ol>

<p>

In fact, this is done repeatedly during the construction of 
<a href="../fit/after.html">the logfile</a>.
</p>


<hr class=hide />
<a name="othermethods">

<h2>  Other methods</h2>
</a>


<hr class=hide />
<a name="thermethod">

<h3>  The R method</h3>
</a>

<p>

The <tt>R</tt> method is used to return the fitted
half path length, that is the sum of R<sub>eff</sub> and 
<tt>delr</tt>.
</p>


<ol class=perlsample>
<br />
&nbsp;&nbsp;<span class="word">printf</span> <span class="double">&quot;half path length is %.5d\n&quot;</span><span class="operator">,</span> <span class="symbol">$path</span><span class="operator">-&gt;</span><span class="word">R</span><span class="structure">;</span>
</ol>


<hr class=hide />
<a name="theparagraphmethod">

<h3>  The paragraph method</h3>
</a>

<p>

This method returns a multiline text string reporting on the
evaluation of the Path's math expressions.  This text looks very much
like the text that <span class=program>IFEFFIT</span> returns when you use <span class=program>IFEFFIT</span>'s 
<tt>show @group</tt> command.
</p>

<ol class=perlsample>
<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">print</span> <span class="symbol">$path_object</span> <span class="operator">-&gt;</span> <span class="word">paragraph</span><span class="structure">;</span>
</ol>



<hr class=hide />
<a name="themake_namemethod">

<h3>  The make_name method</h3>
</a>

<p>

This method is used to construct a descriptive label for the path and
is called when the <span class=file>feffNNNN.dat</span> file is
imported.  Since that usually happens behind the scenes, it is very
rarely necessry to call this method.  However, it is important to
understand how this method works as it can be used to configure how
the Path object gets labeled.  This is determined using the
<span class=pref>&diams;Pathfinder&nbsp;&rarr;&nbsp;name</span>
configuration parameter.  The default value of this parameter is 
<tt>%P</tt>, which means that the default
label is the the interpretation list of the associated ScatteringPath
object with the absorber tokens removed from the ends.
</p>


<ul>
  
<li><p>
<tt>%i</tt>: Replaced by the path index used by 
<span class=program>IFEFFIT</span> for this path.  Note that this may not be constant
throughout a session.
</p></li>
<li><p>
<tt>%I</tt>: Like the <tt>%i</tt>
tag, but zero padded to be 4 characters wide.
</p></li>
<li><p>
<tt>%p</tt>: Replaced with the return value of the
ScatteringPath <tt>intrplist</tt> method.
</p></li>
<li><p>
<tt>%P</tt>: Like the <tt>%p</tt>
but with the absorber tokens removed from both ends.
</p></li>
<li><p>
<tt>%r</tt>: The R<sub>eff</sub> of the path.  In the
case of a fuzzily degenerate path, the average R<sub>eff</sub> value of the
fuzzily degenerate paths is reported.
</p></li>
<li><p>
<tt>%n</tt>: The number of legs of the path.
</p></li>
<li><p>
<tt>%d</tt>: The (fuzzy) degeneracy of the Path.
</p></li>
<li><p>
<tt>%t</tt>: The description of the scattering
geometry as determined by <span class=program>DEMETER</span>'s path finder.
</p></li>
<li><p>
<tt>%m</tt>: The importance of this Path as
determined by <span class=program>DEMETER</span>'s path finder.
</p></li>
<li><p>
<tt>%g</tt>: The group name used in <span class=program>IFEFFIT</span>
to hold the arrays of this path.
</p></li>
<li><p>
<tt>%f</tt>: The name of the associated Feff object.
</p></li>
<li><p>
<tt>%%</tt>: A literal percent sign.
</p></li>
</ul>

<p>

This line resets the default Path label to a string that includes the
half path length and the path degeneracy
</p>


<ol class=perlsample>
<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="symbol">$path_object</span> <span class="operator">-&gt;</span> <span class="word">co</span> <span class="operator">-&gt;</span> <span class="word">set_default</span><span class="structure">(</span><span class="double">&quot;pathfinder&quot;</span><span class="operator">,</span> <span class="double">&quot;label&quot;</span><span class="operator">,</span> <span class="single">'%r (%d)'</span><span class="structure">;</span>
</ol>

<hr class=hide />
<a name="uncertaintiesinpathparameters">

<h2>  Uncertainties in path parameters</h2>
</a>

<p class=todo>
<img class=tinyfloatleft border=0 src="../../images/todo.png" alt="To do!">Propagation of uncertainties into path parameter math expressions is a
missing feature of <span class=program>DEMETER</span>.
</p>

</div>

<br />
<hr class=hide />
<hr class=bottomdivider />

<div class=bottombar>
  <div class=copyright>
  <table>
    <tr>
      <td colspan=2>
        <span class=program>DEMETER</span> is copyright &copy; 2009-2012 Bruce Ravel
        &mdash;
        This document is copyright &copy; 2012 Bruce Ravel
        <br />
      </td>
    </tr>
    <tr valign=middle>
      <td> 
           <a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="../../images/somerights20.png" width="88" height="31" alt="" border="0" /></a> &nbsp;&nbsp;&nbsp;
      </td>
      <td>
  	This document is licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/">
  	The Creative Commons Attribution-ShareAlike License</a>.
  	<br />
  	If <span class=program>DEMETER</span> and this document are useful to you, please consider
  	<a href="http://creativecommons.org/support/">supporting The Creative Commons</a>.
      </td>
    </tr>
  </table>
</div>
</div>
  </body>
</html>