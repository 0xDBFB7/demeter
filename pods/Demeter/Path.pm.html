<!DOCTYPE html>
<html lang="en" xml:lang="en">
<head>
<title>Demeter::Path &mdash; Demeter</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><link rel="stylesheet" href="../podstyle.css" type="text/css" />
</head>
<body><div class="box">
  <h1 class="t1">Demeter</h1>
  <table>
    <tr>
      <td class="label">Description</td>
      <td class="cell">Perl tools for X-ray Absorption Spectroscopy</td>
    </tr>
  </table>
</div>
<div class="path">
  <a href="../index.html">Demeter</a> &gt; Perl Modules &gt;
  Demeter::Path
</div>
<div>
<a href="../src/Demeter/Path.pm">Source</a>
</div>

<div class="pod">


<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#VERSION">VERSION</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#ATTRIBUTES">ATTRIBUTES</a>
    <ul>
      <li><a href="#General-attributes">General attributes</a></li>
      <li><a href="#Path-parameters">Path parameters</a></li>
      <li><a href="#Feff-interpretation-attributes">Feff interpretation attributes</a></li>
    </ul>
  </li>
  <li><a href="#METHODS">METHODS</a>
    <ul>
      <li><a href="#I-O-methods">I/O methods</a></li>
      <li><a href="#Convenience-methods">Convenience methods</a></li>
      <li><a href="#Ifeffit-Larch-interaction-methods">Ifeffit/Larch interaction methods</a></li>
      <li><a href="#Information-reporting-methods">Information reporting methods</a></li>
    </ul>
  </li>
  <li><a href="#DIAGNOSTICS">DIAGNOSTICS</a></li>
  <li><a href="#SERIALIZATION-AND-DESERIALIZATION">SERIALIZATION AND DESERIALIZATION</a></li>
  <li><a href="#CONFIGURATION-AND-ENVIRONMENT">CONFIGURATION AND ENVIRONMENT</a></li>
  <li><a href="#DEPENDENCIES">DEPENDENCIES</a></li>
  <li><a href="#BUGS-AND-LIMITATIONS">BUGS AND LIMITATIONS</a></li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
  <li><a href="#LICENCE-AND-COPYRIGHT">LICENCE AND COPYRIGHT</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>Demeter - Single and multiple scattering paths for EXAFS fitting</p>

<h1 id="VERSION">VERSION</h1>

<p>This documentation refers to Demeter version 0.9.26.</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code>  $path_object -&gt; new();
  $path_object -&gt; set(data     =&gt; $dobject,
                      folder   =&gt; &#39;example/cu/&#39;,
                      file     =&gt; &quot;feff0001.dat&quot;,
                      name     =&gt; &quot;path 1&quot;,
                      s02      =&gt; &#39;amp&#39;,
                      e0       =&gt; &#39;enot&#39;,
                      delr     =&gt; &#39;alpha*reff&#39;,
                      sigma2   =&gt; &#39;debye(temp, theta) + sigmm&#39;,
                     );</code></pre>

<p>or</p>

<pre><code>  $path_object -&gt; new();
  $path_object -&gt; set(data     =&gt; $dobject,
                      sp       =&gt; $scattering_path_object
                      name     =&gt; &quot;path 1&quot;,
                      s02      =&gt; &#39;amp&#39;,
                      e0       =&gt; &#39;enot&#39;,
                      delr     =&gt; &#39;alpha*reff&#39;,
                      sigma2   =&gt; &#39;debye(temp, theta) + sigmm&#39;,
                     );</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>This subclass of the Demeter class is for holding information pertaining to theoretical paths from Feff for use in a fit.</p>

<h1 id="ATTRIBUTES">ATTRIBUTES</h1>

<p>The following are the attributes of the Path object. Attempting to access an attribute not on this list will throw and exception.</p>

<p>The type of argument expected in given in parentheses. Several of the attributes take an anonymous array as the value. In each case, the zeroth element of the annonymous array is the math expressionfor the path and the first element is its evaluation. See the discussion below in <a href="#METHODS">&quot;METHODS&quot;</a> for a description of how these attributes interacts with the accessor methods. See also the description of the <code>evaluate</code> method for how the second element of the anonymous array gets set.</p>

<p>The defaults for all path parameter math expressions is 0 except for <code>s02</code>, which is 1. The <code>*_value</code> path parameter attributes contain the evaluation of the path parameter after the fit is made or the path is otherwise evaluated.</p>

<p>For this Path object to be included in a fit, it is necessary that it be gathered into a Fit object. See <a href="Fit.pm.html">Demeter::Fit</a> for details.</p>

<h2 id="General-attributes">General attributes</h2>

<dl>

<dt id="group-string"><code>group</code> (string)</dt>
<dd>

<p>This is the Ifeffit or Larch group name used for this path. That is, its arrays will be called <i>group</i>.k, <i>group</i>.chi, and so on. It is best if this is a reasonably short word and it <b>must</b> follow the conventions of a valid group name in Ifeffit or Larch. By default, this is a random, five-letter string.</p>

</dd>
<dt id="name-string"><code>name</code> (string)</dt>
<dd>

<p>This is a text string used to describe this object in a user interface. While the <code>group</code> attribute should be short, this can be more verbose. But it should be a single line, unlike the <code>title</code> attibute.</p>

</dd>
<dt id="parent-Feff-object"><code>parent</code> (Feff object)</dt>
<dd>

<p>This is the reference to the Feff object that this Path is a part of. <code>feff</code> is an alias for <code>parent</code>.</p>

</dd>
<dt id="data-Data-object"><code>data</code> (Data object)</dt>
<dd>

<p>This is the reference to the Data object that this path is associated with. There exists a default Data object so that you can successfully Fourier transform and plot Path objects which are not associated with a Data object, as might be the case for a sum of paths.</p>

</dd>
<dt id="sp-ScatteringPath-object"><code>sp</code> (ScatteringPath object)</dt>
<dd>

<p>This is the reference to the ScatteringPath object that is used to generate the <i>feffNNNN.dat</i> file. Once the sp attribute is set, the file and folder attributes will be overwritten based on the settings and actions of the Feff and ScatteringPath objects. To set a specific <i>feffNNNN.dat</i> file, you must also set the sp attribute to an empty string.</p>

</dd>
<dt id="folder-string"><code>folder</code> (string)</dt>
<dd>

<p>This is a string that takes the fully qualified path (in the file system sense) to the <code>`feffNNNN.dat&#39;</code> file associated with this Path object.</p>

<p>If the <code>SP</code> attribute is set, then this attribute will be set automatically and changing it via the Path object&#39;s <code>set</code> method will be forbidden.</p>

</dd>
<dt id="file-filename"><code>file</code> (filename)</dt>
<dd>

<p>This is the name of the <i>feffNNNN.dat</i> file associated with this Path object.</p>

<p>If the <code>sp</code> attribute is set, then this attribute will be set automatically.</p>

</dd>
<dt id="Index-integer"><code>Index</code> (integer)</dt>
<dd>

<p>This is the path index as required in the definition of an Ifeffit Path. It is rarely necessary to set this by hand. Indexing is typically handled by Demeter. Demeter organization of the fit makes use of lists of Path objects, so you are encouraged to think that way rather than to fret about the path indeces.</p>

</dd>
<dt id="include-boolean"><code>include</code> (boolean)</dt>
<dd>

<p>When this is true, this Path will be included in the next fit.</p>

</dd>
<dt id="plot_after_fit-boolean"><code>plot_after_fit</code> (boolean)</dt>
<dd>

<p>This is a flag for use by a user interface to indicate that after a fit is finished, this Path should be plotted.</p>

</dd>
<dt id="default_path-boolean"><code>default_path</code> (boolean)</dt>
<dd>

<p>This path will be set to the default path after the fit for the purpose of evaluating <code>def</code>, <code>after</code>, and other parameters. This is only relevant if any <code>def</code>, <code>after</code> or other parameters depend explicitly on path-specific quantites such as <code>reff</code> or the evaluation of the Debye or Eins functions.</p>

</dd>
<dt id="pc-boolean"><code>pc</code> (boolean)</dt>
<dd>

<p>This is a flag indicating that the phase of this path should be used to perform phase corrected plots.</p>

</dd>
<dt id="save_mag-boolean"><code>save_mag</code> (boolean)</dt>
<dd>

<p>When true, this tells Ifeffit to save an array containing the magnitude of chi(k). This is used in ranking paths -- see <a href="ScatteringPath/Rank.pm.html">Demeter::ScatteringPath::Rank</a>.</p>

</dd>
</dl>

<h2 id="Path-parameters">Path parameters</h2>

<p>For each of these (except <code>n</code> and <code>id</code> which do not take math expressions and the array path parameters which do not evaluate to scalars), the first item listed is the attribute which takes the math expression. The second item listed is the evaluation of the math expression after the fit is prefromed. The evaluation cannot be set by hand. Instead you must change the values of GDS objects and re-evaluate the fit using either of the <code>fit</code> or <code>sum</code> methods.</p>

<dl>

<dt id="n-number"><code>n</code> (number)</dt>
<dd>

<p>This is the path degeneracy in the definition of an Ifeffit or Larch path. This is a number, not a math expression. Use the <code>s02</code> attribute to parameterize the amplitude of the path.</p>

</dd>
<dt id="s02-string"><code>s02</code> (string)</dt>
<dd>

</dd>
<dt id="s02_value-number"><code>s02_value</code> (number)</dt>
<dd>

<p>This is the amplitude term for the path.</p>

</dd>
<dt id="e0-string"><code>e0</code> (string)</dt>
<dd>

</dd>
<dt id="e0_value-number"><code>e0_value</code> (number)</dt>
<dd>

<p>This is the energy shift term for the path.</p>

</dd>
<dt id="delr-string"><code>delr</code> (string)</dt>
<dd>

</dd>
<dt id="delr_value-number"><code>delr_value</code> (number)</dt>
<dd>

<p>This is the path length correction term for the path.</p>

</dd>
<dt id="sigma2-string"><code>sigma2</code> (string)</dt>
<dd>

</dd>
<dt id="sigma2_value-number"><code>sigma2_value</code> (number)</dt>
<dd>

<p>This is the mean square displacement shift term for the path.</p>

</dd>
<dt id="ei-string"><code>ei</code> (string)</dt>
<dd>

</dd>
<dt id="ei_value-number"><code>ei_value</code> (number)</dt>
<dd>

<p>This is the imaginary energy correction term for the path.</p>

</dd>
<dt id="third-string"><code>third</code> (string)</dt>
<dd>

</dd>
<dt id="third_value-number"><code>third_value</code> (number)</dt>
<dd>

<p>This is the third cumulant term for the path.</p>

</dd>
<dt id="fourth-string"><code>fourth</code> (string)</dt>
<dd>

</dd>
<dt id="fourth_value-number"><code>fourth_value</code> (number)</dt>
<dd>

<p>This is the fourth cumulant term for the path.</p>

</dd>
<dt id="dphase-string"><code>dphase</code> (string)</dt>
<dd>

</dd>
<dt id="dphase_value-number"><code>dphase_value</code> (number)</dt>
<dd>

<p>This is the constant phase shift term for the path.</p>

</dd>
<dt id="id-string"><code>id</code> (string)</dt>
<dd>

<p>This is Ifeffit&#39;s identification string for the path.</p>

</dd>
<dt id="k_array-string"><code>k_array</code> (string)</dt>
<dd>

<p>This takes the math expression for the infrequently used <code>k_array</code> path parameter. You really need to know what you are doing to use the array valued path parameters!</p>

</dd>
<dt id="amp_array-string"><code>amp_array</code> (string)</dt>
<dd>

<p>This takes the math expression for the infrequently used <code>amp_array</code> path parameter. You really need to know what you are doing to use the array valued path parameters!</p>

</dd>
<dt id="phase_array-string"><code>phase_array</code> (string)</dt>
<dd>

<p>This takes the math expression for the infrequently used <code>phase_array</code> path parameter. You really need to know what you are doing to use the array valued path parameters!</p>

</dd>
</dl>

<h2 id="Feff-interpretation-attributes">Feff interpretation attributes</h2>

<p>Where possible, these attributes will be taken from the ScatteringPath object associated with the Path.</p>

<dl>

<dt id="degen-number"><code>degen</code> (number)</dt>
<dd>

<p>This is the degeneracy in the <i>feffNNNN.dat</i> file associated with this Path object.</p>

</dd>
<dt id="nleg-integer"><code>nleg</code> (integer)</dt>
<dd>

<p>This is the number of legs in the <i>feffNNNN.dat</i> file associated with this Path object.</p>

</dd>
<dt id="reff-number"><code>reff</code> (number)</dt>
<dd>

<p>This is the effective path length in the <i>feffNNNN.dat</i> file associated with this Path object.</p>

</dd>
<dt id="zcwif-number"><code>zcwif</code> (number)</dt>
<dd>

<p>This is the amplitude (i.e. &quot;Zabinsky curved wave importance factor&quot;) for the <i>feffNNNN.dat</i> file associated with this Path object.</p>

<p>Note that this is always 0 for paths that come from ScatteringPath objects, since the ScatteringPath objct does not, at this time, have a way of computing the ZCWIF.</p>

</dd>
<dt id="intrpline-string"><code>intrpline</code> (string)</dt>
<dd>

<p>This is a line of text relating to this path from the interpretation the Feff calculation.</p>

</dd>
<dt id="geometry-multiline-string"><code>geometry</code> (multiline string)</dt>
<dd>

<p>This is a textual description of the scattering geometry associated with this path.</p>

</dd>
<dt id="is_col-boolean"><code>is_col</code> (boolean)</dt>
<dd>

<p>This is true when the path associated with this object is a colinear or nearly colinear multiple scattering path.</p>

</dd>
<dt id="is_ss-boolean"><code>is_ss</code> (boolean)</dt>
<dd>

<p>This is true when the path associated with this object is a single scattering path.</p>

</dd>
</dl>

<h1 id="METHODS">METHODS</h1>

<p>The Path object inherits creation (<code>new</code> and <code>Clone</code>) and accessor methods (<code>set</code>, <code>get</code>) from the parent class described in the <a href="../Demeter.pm.html">Demeter</a> documentation.</p>

<p>Additionally the Path object provides these methods:</p>

<h2 id="I-O-methods">I/O methods</h2>

<dl>

<dt id="save"><code>save</code></dt>
<dd>

<p>This method returns the Ifeffit or Larch commands necessary to write column data files based on the Path object. See <code>Demeter::Data::IO</code> for details. Only the <code>chi</code>, <code>r</code>, and <code>q</code> options are available for writing Path column data files.</p>

</dd>
</dl>

<h2 id="Convenience-methods">Convenience methods</h2>

<dl>

<dt id="data"><code>data</code></dt>
<dd>

<p>This method returns the reference to the Data object that this Path is associated with. This method is meant to be used with the Data object&#39;s <code>data</code> method. Path and Data objects can be put into a loop and the correct Data object can be identified for each kind of object.</p>

<pre><code>  foreach my $obj (@data_objects, @paths_objects) {
     my $d = $obj-&gt;data;
     ## do something with $d
  };</code></pre>

<p>Note that this works because Data objects have a <code>data</code> method which self-identifies.</p>

</dd>
<dt id="value"><code>value</code></dt>
<dd>

<p>This method returns the evaluated value of a path parameter after a fit is made or a path is otherwise evaluated.</p>

<pre><code>   my $val = $path_object-&gt;value(&quot;sigma2&quot;);</code></pre>

</dd>
<dt id="rm"><code>rm</code></dt>
<dd>

<p>Delete the <i>feffNNNN.dat</i> file associated with this Path.</p>

<pre><code>  $path -&gt; rm;</code></pre>

</dd>
</dl>

<h2 id="Ifeffit-Larch-interaction-methods">Ifeffit/Larch interaction methods</h2>

<dl>

<dt id="read_data"><code>read_data</code></dt>
<dd>

<p>This is completely different from the <code>read_data</code> method called on a Data object. Or, it&#39;s exactly the same, depending on your perspective. It is not normally necessary to call read_data on a <i>feffNNNN.dat</i> file in the course of data analysis. That file is imported into Ifeffit or Larch as a part of the <code>write_path</code> method.</p>

<p>When <code>read_data</code> is called on a Path object, the Ifeffit/Larch command for reading the <i>feffNNNN.dat</i> file as a column data file is returned. This is useful if you ever need to examine the raw columns of the <i>feffNNNN.dat</i> file.</p>

<pre><code>  $command = $path_object -&gt; read_data;</code></pre>

</dd>
<dt id="write_path"><code>write_path</code></dt>
<dd>

<p>This method returns the Ifeffit or Larch commands to import and define a Feff path. It takes a boolean argument which tells the method whether to also generate the Ifeffit or Larch command for converting the defined path into arrays for plotting or other manipulations. That argument is set true as part of the <code>display</code> method, but false when the fit is defined.</p>

<pre><code>  $command = $path_object -&gt; write_path($do_ff2chi);</code></pre>

</dd>
</dl>

<h2 id="Information-reporting-methods">Information reporting methods</h2>

<p>These methods are useful for generating log files and other reports.</p>

<dl>

<dt id="paragraph"><code>paragraph</code></dt>
<dd>

<p>This method returns a multiline text string reporting on the evaluation of the Path&#39;s math expressions. This text looks very much like the text that Ifeffit returns when you use Ifeffit&#39;s <code>show @group</code> command.</p>

<pre><code>  print $path_object -&gt; paragraph;</code></pre>

</dd>
<dt id="row_main"><code>row_main</code></dt>
<dd>

<p>This method returns a newline-terminated line of text containing the values of several path parameters in a format suitable for making a table of fitting results. The path parameters included in this line are <code>n</code>, <code>s02</code>, <code>e0</code>, <code>sigma2</code>, <code>delr</code>, <code>reff</code>, and the sum of <code>delr</code> and <code>reff</code>.</p>

<p>The optional argument specifies the width of the first column, which contains the path labels.</p>

<pre><code>  print $path[0] -&gt; row_main($width);</code></pre>

<p>With this optional argument, you can scan the path labels before creating the table and pre-size the first column, leading to a much more attractive table. The default width is 10 characters. The <code>row_main_label</code>, <code>row_second</code>, and <code>row_second_label</code> methods also take this same optional argument.</p>

</dd>
<dt id="row_main_label"><code>row_main_label</code></dt>
<dd>

<p>This method returns a newline-terminated line of text suitable for the header of the table made by repeated calls to the <code>row_main</code> method. Something like this will make a nice table</p>

<pre><code>   print $path[0] -&gt; row_main_label;
   print $path[0] -&gt; row_main;
   print $path[1] -&gt; row_main;
   print $path[2] -&gt; row_main;</code></pre>

</dd>
<dt id="row_second"><code>row_second</code></dt>
<dd>

<p>This method returns a newline-terminated line of text containing the values of several path parameters in a format suitable for making a table of fitting results. The path parameters included in this line are <code>ei</code>, <code>dphase</code>, <code>third</code>, <code>fourth</code>.</p>

</dd>
<dt id="row_second_label"><code>row_second_label</code></dt>
<dd>

<p>This method returns a newline-terminated line of text suitable for the header of the table made by repeated calls to the <code>row_second</code> method. Something like this will make a nice table</p>

<pre><code>   print $path[0] -&gt; row_second_label;
   print $path[0] -&gt; row_second;
   print $path[1] -&gt; row_second;
   print $path[2] -&gt; row_second;</code></pre>

</dd>
<dt id="R"><code>R</code></dt>
<dd>

<p>This method returns the sum of the <code>reff</code> attribute and the evaluation of the <code>delr</code> path parameter. This:</p>

<pre><code>  print $path_object -&gt; R, $/;</code></pre>

<p>is equivalent to (and fewer keystrokes than):</p>

<pre><code>  ($reff, $delr) = $path_object-&gt;get(qw(reff delr_value));
  $R = $reff + $delr;
  print $R, $/;</code></pre>

</dd>
<dt id="longest_leg"><code>longest_leg</code></dt>
<dd>

<p>This returns the length in Angstrom of the longest leg of a path.</p>

<pre><code>  print $path_object -&gt; longest_leg, $/;</code></pre>

<p>This is determined by searching the <code>rleg</code> attribute of the associated ScatteringPath object and returning the longest value.</p>

</dd>
</dl>

<h1 id="DIAGNOSTICS">DIAGNOSTICS</h1>

<dl>

<dt id="Demeter::Path:-group-is-not-a-valid-group-name"><code>Demeter::Path: &quot;group&quot; is not a valid group name</code></dt>
<dd>

<p>(F) You have used a group name that does not follow Ifeffit&#39;s or Larch&#39;s rules for group names. The group name must start with a letter. After that only letters, numbers, &amp;, ?, _, and : are acceptable characters. The group name must be no longer than 64 characters.</p>

</dd>
<dt id="Demeter::Path:-the-sp-attribute-must-be-ScatteringPath-object"><code>Demeter::Path: the sp attribute must be ScatteringPath object</code></dt>
<dd>

<p>(F) You have set the <code>sp</code> attribute to something other than a ScatteringPath object.</p>

</dd>
</dl>

<h1 id="SERIALIZATION-AND-DESERIALIZATION">SERIALIZATION AND DESERIALIZATION</h1>

<p>See the discussion of serialization and deserialization in <code>Demeter::Fit</code>.</p>

<h1 id="CONFIGURATION-AND-ENVIRONMENT">CONFIGURATION AND ENVIRONMENT</h1>

<p>See <a href="Config.pm.html">Demeter::Config</a> for a description of the configuration system.</p>

<h1 id="DEPENDENCIES">DEPENDENCIES</h1>

<p>Demeter&#39;s dependencies are in the <i>Build.PL</i> file.</p>

<h1 id="BUGS-AND-LIMITATIONS">BUGS AND LIMITATIONS</h1>

<ul>

<li><p>Automated indexing currently only works when doing a fit. If you want to plot paths before doing a fit, you will need to assign indeces by hand.</p>

</li>
</ul>

<p>Please report problems to the Ifeffit Mailing List (<a href="http://cars9.uchicago.edu/mailman/listinfo/ifeffit/">http://cars9.uchicago.edu/mailman/listinfo/ifeffit/</a>)</p>

<p>Patches are welcome.</p>

<h1 id="AUTHOR">AUTHOR</h1>

<p>Bruce Ravel, <a href="http://bruceravel.github.io/home">http://bruceravel.github.io/home</a></p>

<p><a href="http://bruceravel.github.io/demeter/">http://bruceravel.github.io/demeter/</a></p>

<h1 id="LICENCE-AND-COPYRIGHT">LICENCE AND COPYRIGHT</h1>

<p>Copyright (c) 2006-2017 Bruce Ravel (<a href="http://bruceravel.github.io/home">http://bruceravel.github.io/home</a>). All rights reserved.</p>

<p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself. See <a href="http://metacpan.org/module/perlgpl">perlgpl</a>.</p>

<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>

</div><div class="footer">generated by <a href="http://metacpan.org/module/Pod::ProjectDocs">Pod::ProjectDocs</a></div></body></html>

