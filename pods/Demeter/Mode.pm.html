<!DOCTYPE html>
<html lang="en" xml:lang="en">
<head>
<title>Demeter::Mode &mdash; Demeter</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><link rel="stylesheet" href="../podstyle.css" type="text/css" />
</head>
<body><div class="box">
  <h1 class="t1">Demeter</h1>
  <table>
    <tr>
      <td class="label">Description</td>
      <td class="cell">Perl tools for X-ray Absorption Spectroscopy</td>
    </tr>
  </table>
</div>
<div class="path">
  <a href="../index.html">Demeter</a> &gt; Perl Modules &gt;
  Demeter::Mode
</div>
<div>

<a href="../src/Demeter/Mode.pm">Source</a>

</div>

<div class="pod">


<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#VERSION">VERSION</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#ATTRIBUTES">ATTRIBUTES</a>
    <ul>
      <li><a href="#Disposal-modes">Disposal modes</a></li>
      <li><a href="#Template-objects">Template objects</a></li>
      <li><a href="#Template-sets">Template sets</a></li>
      <li><a href="#Object-collections">Object collections</a></li>
      <li><a href="#Other-attributes">Other attributes</a></li>
    </ul>
  </li>
  <li><a href="#SENTINEL-FUNCTIONALITY">SENTINEL FUNCTIONALITY</a>
    <ul>
      <li><a href="#Sentinel-methods">Sentinel methods</a></li>
    </ul>
  </li>
  <li><a href="#DIAGNOSTICS">DIAGNOSTICS</a></li>
  <li><a href="#SERIALIZATION-AND-DESERIALIZATION">SERIALIZATION AND DESERIALIZATION</a></li>
  <li><a href="#CONFIGURATION-AND-ENVIRONMENT">CONFIGURATION AND ENVIRONMENT</a></li>
  <li><a href="#DEPENDENCIES">DEPENDENCIES</a></li>
  <li><a href="#BUGS-AND-LIMITATIONS">BUGS AND LIMITATIONS</a></li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
  <li><a href="#LICENCE-AND-COPYRIGHT">LICENCE AND COPYRIGHT</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>Demeter::Mode - Demeter&#39;s sentinel system</p>

<h1 id="VERSION">VERSION</h1>

<p>This documentation refers to Demeter version 0.9.26.</p>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>This special object is used to store global attributes of an instance of Demeter in a way that makes those attributes available to any Demeter object.</p>

<p>Access to this object is via the <code>get_mode</code> and <code>set_mode</code> methods of the Demeter base class. The convenience methods <code>co</code> and <code>po</code> of the Demeter base class are used to gain access to the Config and Plot objects. Any of these methods can be called by any Demeter object:</p>

<pre><code>  $to_screen = $data_object     -&gt; get_mode(&#39;screen&#39;);
  $to_screen = $gds_object      -&gt; get_mode(&#39;screen&#39;);
  $to_screen = $path_object     -&gt; get_mode(&#39;screen&#39;);
  $to_screen = $scattering_path -&gt; get_mode(&#39;screen&#39;);
  $to_screen = $prj_object      -&gt; get_mode(&#39;screen&#39;);
    ## and so on ...</code></pre>

<p>This object also monitors the creation and destruction of Demeter objects (Atoms, Data, Data::Prj, Data::JSON, Data::MultiChannel, Data::BulkMerge, Feff, Feff::External, Fit, GDS, Path, Plot, Plot::Indicator, ScatteringPath, SSPath, VPath, etc.) and provides methods which give a way for one object to affect any other objects created during the instance of Demeter. For example, when the kweight value of the Plot object is changed, it is necessary to signal all Data objects that they will need to update their forward Fourier transforms. This object is the glue that allows things like that to happen.</p>

<h1 id="ATTRIBUTES">ATTRIBUTES</h1>

<h2 id="Disposal-modes">Disposal modes</h2>

<dl>

<dt id="backend"><code>backend</code></dt>
<dd>

<p>Dispose commands to Larch or Ifeffit, as appropriate, when true.</p>

</dd>
<dt id="screen"><code>screen</code></dt>
<dd>

<p>Dispose commands to STDOUT when true.</p>

</dd>
<dt id="plotscreen"><code>plotscreen</code></dt>
<dd>

<p>Dispose plotting commands to STDOUT when true.</p>

</dd>
<dt id="repscreen"><code>repscreen</code></dt>
<dd>

<p>Dispose reprocessed commands to STDOUT when true.</p>

</dd>
<dt id="file"><code>file</code></dt>
<dd>

<p>Dispose commands to a file when a filename is given.</p>

</dd>
<dt id="plotfile"><code>plotfile</code></dt>
<dd>

<p>Dispose plotting commands to a file when a filename is given.</p>

</dd>
<dt id="repfile"><code>repfile</code></dt>
<dd>

<p>Dispose reprocessed commands to a file when a filename is given.</p>

</dd>
<dt id="buffer"><code>buffer</code></dt>
<dd>

<p>Dispose commands to a string or array when given a reference to a string or array.</p>

</dd>
<dt id="plotbuffer"><code>plotbuffer</code></dt>
<dd>

<p>Optionally dispose of plotting commands to a difference string or array reference.</p>

</dd>
<dt id="callback"><code>callback</code></dt>
<dd>

<p>Dispose commands by sending them as the argument to a user-supplied code rerference.</p>

</dd>
<dt id="plotcallback"><code>plotcallback</code></dt>
<dd>

<p>Optionally dispose of plotting commands to a difference code reference.</p>

</dd>
<dt id="feedback"><code>feedback</code></dt>
<dd>

<p>A code ref for disposing of feedback from Ifeffit or Larch.</p>

</dd>
</dl>

<h2 id="Template-objects">Template objects</h2>

<dl>

<dt id="config"><code>config</code></dt>
<dd>

<p>A reference to the singleton Config object. <code>$C</code> is the special template variable.</p>

</dd>
<dt id="plot"><code>plot</code></dt>
<dd>

<p>A reference to the current Plot object. <code>$P</code> is the special template variable.</p>

</dd>
<dt id="fit"><code>fit</code></dt>
<dd>

<p>A reference to the current Fit object. <code>$F</code> is the special template variable.</p>

</dd>
<dt id="standard"><code>standard</code></dt>
<dd>

<p>A reference to the current Data object used as a data processing standard. <code>$DS</code> is the special template variable.</p>

</dd>
<dt id="theory"><code>theory</code></dt>
<dd>

<p>A reference to the current Feff object. <code>$T</code> is the special template variable.</p>

</dd>
<dt id="path"><code>path</code></dt>
<dd>

<p>A reference to the current Path object. <code>$PT</code> is the special template variable.</p>

</dd>
</dl>

<h2 id="Template-sets">Template sets</h2>

<dl>

<dt id="template_process"><code>template_process</code></dt>
<dd>

<p>The template set to use for processing data.</p>

</dd>
<dt id="template_fit"><code>template_fit</code></dt>
<dd>

<p>The template set to use for fitting data.</p>

</dd>
<dt id="template_analysis"><code>template_analysis</code></dt>
<dd>

<p>The template set to use for analyzing mu(E) data.</p>

</dd>
<dt id="template_plot"><code>template_plot</code></dt>
<dd>

<p>The template set to use for plotting data.</p>

</dd>
<dt id="template_feff"><code>template_feff</code></dt>
<dd>

<p>The template set to use for writing <i>feff.inp</i> files.</p>

</dd>
<dt id="template_test"><code>template_test</code></dt>
<dd>

<p>A special template set used for testing Demeter.</p>

</dd>
</dl>

<h2 id="Object-collections">Object collections</h2>

<dl>

<dt id="Atoms"><code>Atoms</code></dt>
<dd>

<p>A list of all Atoms objects created during this instance of Demeter.</p>

</dd>
<dt id="Data"><code>Data</code></dt>
<dd>

<p>A list of all Data objects created during this instance of Demeter.</p>

</dd>
<dt id="Feff"><code>Feff</code></dt>
<dd>

<p>A list of all Feff objects created during this instance of Demeter.</p>

</dd>
<dt id="External"><code>External</code></dt>
<dd>

<p>A list of all Feff::External objects created during this instance of Demeter.</p>

</dd>
<dt id="Fit"><code>Fit</code></dt>
<dd>

<p>A list of all Fit objects created during this instance of Demeter.</p>

</dd>
<dt id="GDS"><code>GDS</code></dt>
<dd>

<p>A list of all GDS objects created during this instance of Demeter.</p>

</dd>
<dt id="Path"><code>Path</code></dt>
<dd>

<p>A list of all Path objects created during this instance of Demeter.</p>

</dd>
<dt id="Plot"><code>Plot</code></dt>
<dd>

<p>A list of all Plot objects created during this instance of Demeter.</p>

</dd>
<dt id="ScatteringPath"><code>ScatteringPath</code></dt>
<dd>

<p>A list of all ScatteringPath objects created during this instance of Demeter.</p>

</dd>
<dt id="VPath"><code>VPath</code></dt>
<dd>

<p>A list of all VPath objects created during this instance of Demeter.</p>

</dd>
<dt id="SSPath"><code>SSPath</code></dt>
<dd>

<p>A list of all SSPath objects created during this instance of Demeter.</p>

</dd>
<dt id="Prj"><code>Prj</code></dt>
<dd>

<p>A list of all Data::Prj objects created during this instance of Demeter.</p>

</dd>
<dt id="JSON"><code>JSON</code></dt>
<dd>

<p>A list of all Data::JSON objects created during this instance of Demeter.</p>

</dd>
</dl>

<h2 id="Other-attributes">Other attributes</h2>

<dl>

<dt id="iwd"><code>iwd</code></dt>
<dd>

<p>The initial working directory when Demeter starts.</p>

</dd>
<dt id="cwd"><code>cwd</code></dt>
<dd>

<p>Demeter&#39;s current working directory.</p>

</dd>
<dt id="echo">echo</dt>
<dd>

<p>???</p>

</dd>
<dt id="datadefault"><code>datadefault</code></dt>
<dd>

<p>This is a Data object used as a fallback. For instance, one might want to process and plot Path objects without having imported a Data object. This global attribute will be used in that case to properly process and plot the Path.</p>

</dd>
<dt id="feffdefault"><code>feffdefault</code></dt>
<dd>

<p>This is a Feff object used as a fallback in some Path-like objects.</p>

</dd>
<dt id="external_plot_object"><code>external_plot_object</code></dt>
<dd>

<p>For plotting backends that have an objective interface, this global attribute carried the refernece to that object. For example, in the gnuplot backend, this contains a reference to the <a href="http://metacpan.org/module/Graphics::GnuplotIF">Graphics::GnuplotIF</a> object.</p>

</dd>
<dt id="ui"><code>ui</code></dt>
<dd>

<p>This is a string identifying the user interface backend.</p>

<p>When set to <code>screen</code>, it tells triggers the import of curses-based methods in <a href="UI/Screen/Interview.pm.html">Demeter::UI::Screen::Interview</a> and <a href="UI/Screen/Progress.pm.html">Demeter::UI::Screen::Progress</a>. Other options used at this time are <code>wx</code> and <code>web</code>.</p>

<p>This is normally set at import, as in</p>

<pre><code>  use Demeter qw(:ui=screen);</code></pre>

<p>The default is either the value of <code>$ENV{DEMETER_MODE}</code> or <code>none</code>. Setting <code>$ENV{DEMETER_MODE}</code> is done when the mode setting must be specified <i>very</i> early in startup. This is done, for example, in WebAtoms to set the ui to <code>web</code>.</p>

</dd>
<dt id="silently_ignore_unplottable"><code>silently_ignore_unplottable</code></dt>
<dd>

<p>When true, this averts croaking in certain situations where an attempt is made to plot an object in a way that it cannot be plotted (for example, attempting to plot in energy a Data object of datatype chi). This is useful in the context of a GUI, but is stringly discouraged in a command line script.</p>

</dd>
</dl>

<h1 id="SENTINEL-FUNCTIONALITY">SENTINEL FUNCTIONALITY</h1>

<p>It should rarely be necessary that a user script needs to access this part of this object. Mostly the sentinel functionality is handled behind the scenes, during object creation or destruction or at the end of a script. The details are documented here for those times when one needs to see under the hood.</p>

<p>Each Demeter object (Atoms, Data, Data::Prj, Data::MultiChannel, Data::BulkMerge, Feff, Feff::External, Fit, GDS, Path, Plot, Plot::Indicator, ScatteringPath, SSPath, VPath, etc.) (Data::Prj is refered to just as Prj, other Data::* classes are the same) has each of the following three function associated with it.</p>

<p>All of my examples use the Data object.</p>

<dl>

<dt id="Object"><i>Object</i></dt>
<dd>

<p>This is the accessor for the attribute which holds the list of all Data objects created during this instance of Demeter.</p>

<pre><code>  my @list = @{ $object-&gt;mo-&gt;Data };</code></pre>

</dd>
<dt id="push_Object"><code>push_</code><i>Object</i></dt>
<dd>

<p>This is the method used to append an object to the list;</p>

<pre><code>  $data_object-&gt;push_Data($data_object);</code></pre>

<p>This happens automatically when a Data object is created.</p>

</dd>
<dt id="clear_Object"><code>clear_</code><i>Object</i></dt>
<dd>

<p>This method is used to clear the contents of the list.</p>

<pre><code>  $data_object-&gt;clear_Data;</code></pre>

<p>This is not used for anything at this time, but it seemed useful.</p>

</dd>
</dl>

<h2 id="Sentinel-methods">Sentinel methods</h2>

<dl>

<dt id="fetch"><code>fetch</code></dt>
<dd>

<p>This method returns an object reference given its group name.</p>

<pre><code>  $object = $demeter_object-&gt;mo-&gt;fetch(&quot;ScatteringPath&quot;, $group);</code></pre>

<p>In this example, the ScatteringPath object whose group name is $group will be returned. The first argument is one of the Demeter object types. This method was written to facilitate drag and drop in the Wx version of Artemis. Wx&#39;s drag and drop capability does not easily do DND on blessed references. It was much easier to do DND on an array of group names, which are simple strings. I then needed this method to convert the list of group names back into a list of object references.</p>

</dd>
<dt id="reset_path_index"><code>reset_path_index</code></dt>
<dd>

<p>This resets the path counter to 1. This is used when closing one project and starting a new one so that path indexing can start at 1 in the new fit. See <code>close_project</code> in <a href="UI/Artemis/Project.pm.html">Demeter::UI::Artemis::Project</a>.</p>

</dd>
</dl>

<h1 id="DIAGNOSTICS">DIAGNOSTICS</h1>

<p>Moose type constraints are used on several of the GDS object attributes. Error messages appropriate to the type constrain will be generated.</p>

<h1 id="SERIALIZATION-AND-DESERIALIZATION">SERIALIZATION AND DESERIALIZATION</h1>

<p>See the discussion of serialization and deserialization in <code>Demeter::Fit</code>.</p>

<h1 id="CONFIGURATION-AND-ENVIRONMENT">CONFIGURATION AND ENVIRONMENT</h1>

<p>See <a href="Config.pm.html">Demeter::Config</a> for a description of the configuration system.</p>

<h1 id="DEPENDENCIES">DEPENDENCIES</h1>

<p>Demeter&#39;s dependencies are in the <i>Build.PL</i> file.</p>

<h1 id="BUGS-AND-LIMITATIONS">BUGS AND LIMITATIONS</h1>

<ul>

<li><p>Errors should be propagated into def parameters</p>

</li>
</ul>

<p>Please report problems to the Ifeffit Mailing List (<a href="http://cars9.uchicago.edu/mailman/listinfo/ifeffit/">http://cars9.uchicago.edu/mailman/listinfo/ifeffit/</a>)</p>

<p>Patches are welcome.</p>

<h1 id="AUTHOR">AUTHOR</h1>

<p>Bruce Ravel, <a href="http://bruceravel.github.io/home">http://bruceravel.github.io/home</a></p>

<p><a href="http://bruceravel.github.io/demeter/">http://bruceravel.github.io/demeter/</a></p>

<h1 id="LICENCE-AND-COPYRIGHT">LICENCE AND COPYRIGHT</h1>

<p>Copyright (c) 2006-2018 Bruce Ravel (<a href="http://bruceravel.github.io/home">http://bruceravel.github.io/home</a>). All rights reserved.</p>

<p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself. See <a href="http://metacpan.org/module/perlgpl">perlgpl</a>.</p>

<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>

</div><div class="footer">generated by <a href="http://metacpan.org/module/Pod::ProjectDocs">Pod::ProjectDocs</a></div></body></html>

