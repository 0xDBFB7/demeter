<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Demeter::Data::BulkMerge</title>
<link rel="stylesheet" type="text/css" href="../../podstyle.css" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <script type="text/javascript">

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;

    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  </script></head>
<body>
<div class="box">
  <h1 class="t1">Demeter</h1>
  <table>
    <tr>
      <td class="label">Description</td>
      <td class="cell">Perl tools for X-ray Absorption Spectroscopy</td>
    </tr>
  </table>
</div>
<div class="path">
  <a href="../../index.html">Demeter</a> &gt; Perl Modules &gt;
  Demeter-Data-BulkMerge
</div>
<div>
<a href="../../src/Demeter/Data/BulkMerge.pm">Source</a>
</div>


<div class="pod">
<!-- INDEX START -->
<h3 id="TOP">Index</h3>
<ul>
	<li><a href="#NAME">NAME</a></li>
	<li><a href="#VERSION">VERSION</a></li>
	<li><a href="#DESCRIPTION">DESCRIPTION</a></li>
	<li><a href="#ATTRIBUTES">ATTRIBUTES</a></li>
	<li><a href="#METHODS">METHODS</a></li>
	<li><a href="#CONFIGURATION">CONFIGURATION</a></li>
	<li><a href="#DEPENDENCIES">DEPENDENCIES</a></li>
	<li><a href="#BUGS_AND_LIMITATIONS">BUGS AND LIMITATIONS</a></li>
	<li><a href="#AUTHOR">AUTHOR</a></li>
	<li><a href="#LICENCE_AND_COPYRIGHT">LICENCE AND COPYRIGHT</a></li>
</ul>
<hr />
<!-- INDEX END -->

<h1 id="NAME">NAME <a href="#TOP" class="toplink"><img alt="^" src="../../up.gif" /></a></h1>

<p>Demeter::Data::BulkMerge - Efficiantly merge many files into a single spectrum</p>

<h1 id="VERSION">VERSION <a href="#TOP" class="toplink"><img alt="^" src="../../up.gif" /></a></h1>

<p>This documentation refers to Demeter version 0.9.22.</p>

<h1 id="DESCRIPTION">DESCRIPTION <a href="#TOP" class="toplink"><img alt="^" src="../../up.gif" /></a></h1>

<p>This object provides an efficient way to merge a large number of files
into a single spectrum.  The assumption is that the user is not
interested in having each individual file processed.  This would be
the case for measuring many repititions for the sake of improving the
statistical quality of the data.</p>

<pre>  my $data = Demeter::Data-&gt;new(file=&gt;$file, ...);
  my $bulk = Demeter::Data::BulkMerge-&gt;new(master =&gt; $data,
                                           data =&gt; \@list_of_files);
  my $merged = $bulk-&gt;merge;
  $_-&gt;plot('E') foreach ($data, $merged);

</pre><p>The trick is that each file is only imported to the point of having
arrays for energy and xmu.  Each file in the list is imported to the
same group.  The merge is computed by accumulation and divided by the
total numberof scans.</p>

<p>This requires that one data file be considered carefully.  This is the
<code>master</code>.  All other data are interpolated to the energy grid of the
<code>master</code>.</p>

<p>Care is taken not to include files which are less than 95%
(configurable with the <code>margin</code> attribute) of the size of the master
data file.</p>

<p>Note that preprocessing the data takes time.  A run with the <code>plugin</code>
and <code>align</code> attributes set takes about twice as long as a straight
merge of the raw data.</p>

<h1 id="ATTRIBUTES">ATTRIBUTES <a href="#TOP" class="toplink"><img alt="^" src="../../up.gif" /></a></h1>

<dl>
	<dt><code>master</code> [Demeter::Data object]</dt>
		<dd><p>This contains the <a href="../Data.pm.html">Demeter::Data</a> object for the processed data group
to which all subsequent data files are merged.  This acts as the
interpolation standard and as the alignment standard (if the <code>align</code>
attribute is true).  The merged data group will inherit attributes
from this group.  So, if the master has sensible parameters for
normalization and background removal, the merged group will have the
same sensible parameters.</p></dd>
	<dt><code>data</code> [list of strings]</dt>
		<dd><p>This is a list of fully resolved paths to the data files to be merged.
These can be relative or absolute paths, but they <strong>must</strong> resolve
correctly to actual files.  Files that don't exist or aren't readable
will be silently ignored.</p></dd>
	<dt><code>align</code> [boolean]</dt>
		<dd><p>When true, this says to align each file in the <code>data</code> list to the
<code>master</code>.</p></dd>
	<dt><code>smooth</code> [integer]</dt>
		<dd><p>When non-zero, the alignment will be done using the smoothed
derivative spectrum.  The value of this parameter indicated the number
of smoothings.</p></dd>
	<dt><code>plugin</code> [string]</dt>
		<dd><p>The name of the plugin to use to interpret the data.  For example, to
use the <a href="https://metacpan.org/pod/Demeter%3A%3AData%3A%3AX23A2MED">Demeter::Data::X23A2MED</a> plugin, this attribute would be set
to <code>X23A2MED</code>.</p></dd>
	<dt><code>margin</code> [number between 0 and 1]</dt>
		<dd><p>This number defines the margin in filesize outside of which a data
file is excluded from the merge.  The default is 0.997, thus any file
in the <code>data</code> list which is smaller than 99.7% the size of the
<code>master</code> file will be excluded.</p></dd>
	<dt><code>subsample</code>  [array of integers]</dt>
		<dd><p>This is used to specify sub-samplings of the data ensemble, presumably
to test convergence to the mean.  If this is set to <code>[4, 16, 64]</code>
then Data groups will be saved which sum 4, 16, and 64 of the files
included in the merge.  The sub-sampled Data groups are saved to the
<code>sequence</code> attribute.</p></dd>
	<dt><code>sequence</code>  [array of Data objects]</dt>
		<dd><p>Data objects from a sub-sampling sequence.</p></dd>
</dl>
<h1 id="METHODS">METHODS <a href="#TOP" class="toplink"><img alt="^" src="../../up.gif" /></a></h1>

<dl>
	<dt><code>merge</code></dt>
		<dd><p>Performs the merge using some special optimizations that minimize the
interaction with the data processing backend (Ifeffit/Larch).  This
returns a Data object containing the merged spectrum, divided by the
number of spectra included in the merge.</p></dd>
</dl>
<h1 id="CONFIGURATION">CONFIGURATION <a href="#TOP" class="toplink"><img alt="^" src="../../up.gif" /></a></h1>

<p>There are no configuration options for this class.</p>

<p>See <a href="../Config.pm.html">Demeter::Config</a> for a description of Demeter's
configuration system.</p>

<h1 id="DEPENDENCIES">DEPENDENCIES <a href="#TOP" class="toplink"><img alt="^" src="../../up.gif" /></a></h1>

<p>Demeter's dependencies are in the <cite>Build.PL</cite> file.</p>

<h1 id="BUGS_AND_LIMITATIONS">BUGS AND LIMITATIONS <a href="#TOP" class="toplink"><img alt="^" src="../../up.gif" /></a></h1>

<ul>
	<li>A file that exists and is readable, but is not data will make for a
confusing error</li>
	<li>Standard deviation not computed</li>
</ul>

<p>Please report problems to the Ifeffit Mailing List
(<a href="http://cars9.uchicago.edu/mailman/listinfo/ifeffit/">http://cars9.uchicago.edu/mailman/listinfo/ifeffit/</a>)</p>

<p>Patches are welcome.</p>

<h1 id="AUTHOR">AUTHOR <a href="#TOP" class="toplink"><img alt="^" src="../../up.gif" /></a></h1>

<p>Bruce Ravel, <a href="http://bruceravel.github.io/home">http://bruceravel.github.io/home</a></p>

<p><a href="http://bruceravel.github.io/demeter/">http://bruceravel.github.io/demeter/</a></p>

<h1 id="LICENCE_AND_COPYRIGHT">LICENCE AND COPYRIGHT <a href="#TOP" class="toplink"><img alt="^" src="../../up.gif" /></a></h1>

<p>Copyright (c) 2006-2015 Bruce Ravel (<a href="http://bruceravel.github.io/home">http://bruceravel.github.io/home</a>). All rights reserved.</p>

<p>This module is free software; you can redistribute it and/or
modify it under the same terms as Perl itself. See <a href="https://metacpan.org/pod/perlgpl">perlgpl</a>.</p>

<p>This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>


</div><div class="footer">generated by <a href="https://metacpan.org/pod/Pod%3A%3AProjectDocs">Pod::ProjectDocs</a></div></body>
</html>
