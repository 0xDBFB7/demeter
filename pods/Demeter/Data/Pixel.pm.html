<!DOCTYPE html>
<html lang="en" xml:lang="en">
<head>
<title>Demeter::Data::Pixel &mdash; Demeter</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><link rel="stylesheet" href="../../podstyle.css" type="text/css" />
</head>
<body><div class="box">
  <h1 class="t1">Demeter</h1>
  <table>
    <tr>
      <td class="label">Description</td>
      <td class="cell">Perl tools for X-ray Absorption Spectroscopy</td>
    </tr>
  </table>
</div>
<div class="path">
  <a href="../../index.html">Demeter</a> &gt; Perl Modules &gt;
  Demeter::Data::Pixel
</div>
<div>
<a href="../../src/Demeter/Data/Pixel.pm">Source</a>
</div>

<div class="pod">


<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#VERSION">VERSION</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#ATTRIBUTES">ATTRIBUTES</a></li>
  <li><a href="#METHODS">METHODS</a></li>
  <li><a href="#SERIALIZATION-AND-DESERIALIZATION">SERIALIZATION AND DESERIALIZATION</a></li>
  <li><a href="#CONFIGURATION-AND-ENVIRONMENT">CONFIGURATION AND ENVIRONMENT</a></li>
  <li><a href="#DEPENDENCIES">DEPENDENCIES</a></li>
  <li><a href="#BUGS-AND-LIMITATIONS">BUGS AND LIMITATIONS</a></li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
  <li><a href="#LICENCE-AND-COPYRIGHT">LICENCE AND COPYRIGHT</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>Demeter::Data::Pixel - Handle dispersive XAS data</p>

<h1 id="VERSION">VERSION</h1>

<p>This documentation refers to Demeter version 0.9.26.</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code>   use Demeter;

   my $stan = Demeter::Data-&gt;new(file=&gt;&#39;ESRF_ID24/cus2/cufoil_rt.txt&#39;, bkg_nor2=&gt;1000);
   $stan-&gt;set_mode(screen=&gt;0);

   my $data = Demeter::Data::Pixel-&gt;new(file=&gt;&#39;ESRF_ID24/cus2/cu_08&#39;, bkg_nor2=&gt;1000);

   $data-&gt;standard($stan);
   $data-&gt;guess;
   $data-&gt;pixel;

   my $cus2 = Demeter::Data::Pixel-&gt;new(file=&gt;$file, name=&gt;basename($file));
   $dispersive_data = $data-&gt;apply($cus2);</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>The standard way of implementing a dispersive XAS measurement is to measure a known sample such as a foil in the same dispersive geometry as the real experiment. The function for converting from pixel position to energy is determined by comparing the dispersively measured sample to a conventionally measurement on the same sample. This determines as set of conversion parameters that can then be used on each scan in the subsequent measurement.</p>

<p>In the synopsis above, the conventional scan on a Cu foil is imported as a normal Data object. The foil measured dispersively is then imported as a Data::Pixel object. The conventional scan is established as the standard and the conversion parameters are determined by fitting a quadratic function relating pixels to energy.</p>

<pre><code>  energy = A + B*pixel + C*pixel^2</code></pre>

<p>In fact, a slightly more complex function is used as the fitting function in an attempt to to give some weight to the high energy data where the variations in the data and thus the sensitivity to the fit is somewhat less than near the edge where the data is changing quickly.</p>

<p>Once the parameters for the conversion are known, they can be applied to the real data. Each dispersive scan is imported as a Data::Pixel object and a normal Data object is generated from that.</p>

<h1 id="ATTRIBUTES">ATTRIBUTES</h1>

<p>This is inherited from the Data object, so all of the Data attributes are inherited. Additionally, there are these attributes:</p>

<dl>

<dt id="standard"><code>standard</code></dt>
<dd>

<p>This takes the refernece to the Data object containing the conventionally measured standard.</p>

</dd>
<dt id="offset"><code>offset</code></dt>
<dd>

<p>The value of the offset conversion parameter, <code>A</code> in the formula above.</p>

</dd>
<dt id="linear"><code>linear</code></dt>
<dd>

<p>The value of the linear conversion parameter, <code>B</code> in the formula above.</p>

</dd>
<dt id="quadratic"><code>quadratic</code></dt>
<dd>

<p>The value of the quadratic conversion parameter, <code>C</code> in the formula above.</p>

</dd>
</dl>

<h1 id="METHODS">METHODS</h1>

<dl>

<dt id="guess"><code>guess</code></dt>
<dd>

<p>Make an initial guesss for the conversion parameters. This is done by finding e0 values for the conventional and dispersive standard data (normally a foil or some such) using the fraction-of-an-edge step method described in <a href="E0.pm.html">Demeter::Data::E0</a>. The e0 position is found for fractions of 0.1 and 0.9 in each measurement and offset and linear terms are determined from those values. The initial quadratic value is 0. This fills the <code>offset</code>, <code>linear</code>, and <code>quadratic</code> attributes.</p>

</dd>
<dt id="pixel"><code>pixel</code></dt>
<dd>

<p>Perform the fit between the flattened, normalized conventionald and dispersive standards to determine values for the conversion parameters. This fills the <code>offset</code>, <code>linear</code>, and <code>quadratic</code> attributes.</p>

</dd>
<dt id="apply"><code>apply</code></dt>
<dd>

<p>This method applies the <code>offset</code>, <code>linear</code>, and <code>quadratic</code> attributes to convert a pixel data groups, returning a normal Data object.</p>

</dd>
<dt id="report"><code>report</code></dt>
<dd>

<p>This generates a bit of text documenting the values of the conversion parameters.</p>

</dd>
</dl>

<h1 id="SERIALIZATION-AND-DESERIALIZATION">SERIALIZATION AND DESERIALIZATION</h1>

<p>Good question ...</p>

<h1 id="CONFIGURATION-AND-ENVIRONMENT">CONFIGURATION AND ENVIRONMENT</h1>

<p>See <a href="../Config.pm.html">Demeter::Config</a> for a description of the configuration system. See the lcf configuration group for the relevant parameters.</p>

<h1 id="DEPENDENCIES">DEPENDENCIES</h1>

<p>Demeter&#39;s dependencies are in the <i>Build.PL</i> file.</p>

<h1 id="BUGS-AND-LIMITATIONS">BUGS AND LIMITATIONS</h1>

<ul>

<li><p>The fitting algorithm is not so robust.</p>

</li>
</ul>

<h1 id="AUTHOR">AUTHOR</h1>

<p>Bruce Ravel, <a href="http://bruceravel.github.io/home">http://bruceravel.github.io/home</a></p>

<p><a href="http://bruceravel.github.io/demeter/">http://bruceravel.github.io/demeter/</a></p>

<h1 id="LICENCE-AND-COPYRIGHT">LICENCE AND COPYRIGHT</h1>

<p>Copyright (c) 2006-2017 Bruce Ravel (<a href="http://bruceravel.github.io/home">http://bruceravel.github.io/home</a>). All rights reserved.</p>

<p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself. See <a href="http://metacpan.org/module/perlgpl">perlgpl</a>.</p>

<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>

</div><div class="footer">generated by <a href="http://metacpan.org/module/Pod::ProjectDocs">Pod::ProjectDocs</a></div></body></html>

