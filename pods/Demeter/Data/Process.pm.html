<!DOCTYPE html>
<html lang="en" xml:lang="en">
<head>
<title>Demeter::Data::Process &mdash; Demeter</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><link rel="stylesheet" href="../../podstyle.css" type="text/css" />
</head>
<body><div class="box">
  <h1 class="t1">Demeter</h1>
  <table>
    <tr>
      <td class="label">Description</td>
      <td class="cell">Perl tools for X-ray Absorption Spectroscopy</td>
    </tr>
  </table>
</div>
<div class="path">
  <a href="../../index.html">Demeter</a> &gt; Perl Modules &gt;
  Demeter::Data::Process
</div>
<div>
<a href="../../src/Demeter/Data/Process.pm">Source</a>
</div>

<div class="pod">


<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#VERSION">VERSION</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#METHODS">METHODS</a></li>
  <li><a href="#CONFIGURATION">CONFIGURATION</a></li>
  <li><a href="#DEPENDENCIES">DEPENDENCIES</a></li>
  <li><a href="#BUGS-AND-LIMITATIONS">BUGS AND LIMITATIONS</a></li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
  <li><a href="#LICENCE-AND-COPYRIGHT">LICENCE AND COPYRIGHT</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>Demeter::Data::Process - Processing XAS data</p>

<h1 id="VERSION">VERSION</h1>

<p>This documentation refers to Demeter version 0.9.26.</p>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>This subclass of <a href="../Data.pm.html">Demeter::Data</a> contains methods for calibrating mu(E) data and adjusting e0.</p>

<h1 id="METHODS">METHODS</h1>

<p>Note that these data processing methods are not reversable (without reimporting the data). Many of the examples suggest the use of the <code>clone</code> method for easy comparison between the processed and original data. In those cases cloning is a good idea because the methods <b>will</b> alter the arrays in the data processing backend (Ifeffit/Larch).</p>

<dl>

<dt id="rebin"><code>rebin</code></dt>
<dd>

<p>This method rebins EXAFS data onto a standard EXAFS grid defined by parameters that can be passed to the method via an anonymous hash. It returns the reference to the new object and creates an appropriate set of arrays. The new object is a clone of the original object.</p>

<pre><code>  $rebinned_group = $data -&gt; rebin(pre=&gt;-35, xanes=&gt;0.3);
  $rebinned_group -&gt; plot(&#39;E&#39;);</code></pre>

<p>The parameter hash can contain zero or more of these parameters:</p>

<dl>

<dt id="group"><i>group</i></dt>
<dd>

<p>The group name of the newly created group containing the rebinned data. The default is to generate a unique group name.</p>

</dd>
<dt id="emin"><i>emin</i></dt>
<dd>

<p>The boundary between the pre-edge and XANES regions, expressed in relative energy. The default is -30 eV.</p>

</dd>
<dt id="emin1"><i>emin</i></dt>
<dd>

<p>The boundary between the XANES and EXAFS regions, expressed in relative energy. The default is 50 eV.</p>

</dd>
<dt id="pre"><i>pre</i></dt>
<dd>

<p>The grid size in energy of the rebinned pre-edge region. The default is 10 eV.</p>

</dd>
<dt id="xanes"><i>xanes</i></dt>
<dd>

<p>The grid size in energy of the rebinned XANES region. The default is 0.5 eV.</p>

</dd>
<dt id="exafs"><i>exafs</i></dt>
<dd>

<p>The grid size in wavenumber of the rebinned EXAFS region. The default is 0.07 inverse Angstrom.</p>

</dd>
</dl>

<p>See <a href="../Config.pm.html">Demeter::Config</a> and the rebin configuration group for details about configuring the defaults.</p>

</dd>
<dt id="merge"><code>merge</code></dt>
<dd>

<p>This method merges a list of data groups. The merge can be done in mu(E), norm(E), or chi(k). A list of Data objects will be interpolated onto the energy (or k) grid of <code>$data</code> and merged along with <code>$data</code>.</p>

<pre><code>  $merged_group = $data-&gt;merge(&#39;e&#39;, @groups);</code></pre>

<p>The first argument is <code>e</code>, <code>n</code>, or <code>k</code>. The remaining arguments are Data objects to be included in the merge.</p>

</dd>
<dt id="Truncate"><code>Truncate</code></dt>
<dd>

<p>Truncate data before or after a given value. This discards the truncated points from the arrays in the data processing backend (Ifeffit/Larch).</p>

<pre><code>  $data -&gt; Truncate(&quot;after&quot;, 7700);</code></pre>

<p>The truncation is exclusive -- that is the value closest in energy or k to the supplied value remains in the array.</p>

<p>This is capitalized to avoid confusion with the perl built-in.</p>

</dd>
<dt id="deglitch"><code>deglitch</code></dt>
<dd>

<p>Remove a single data points -- glitches -- from the data. This only works on mu(E) data and a check is made that the supplied values are within the data range.</p>

<pre><code>  $data -&gt; deglitch(17385.686);</code></pre>

<p>or</p>

<pre><code>  $data -&gt; deglitch(@spurious_points);</code></pre>

<p>In each case, the points closest in energy to the supplied values are removed. Glitches are simply removed from the data -- no interpolation between surrounding values is made.</p>

<p>There is no method explicitly intended to find a glitchy point. That is left as a chore for the user interface.</p>

<p>Due to a quirk in Ifeffit (or perhaps in my understanding of Ifeffit) attempting to deglitch any of the last two points of data will result in both points being removed. The same is true of the first two points. This is a bug, but not, I don&#39;t think, a horrible one.</p>

</dd>
<dt id="smooth"><code>smooth</code></dt>
<dd>

<p>Perform three-point smoothing on the mu(E) or chi(k) data, as appropriate. The argument tells Demeter how many times to reapply the smoothing.</p>

<pre><code>  $copy = $data -&gt; Clone;
  $copy -&gt; smooth(5);</code></pre>

</dd>
<dt id="convolve"><code>convolve</code></dt>
<dd>

<p>Perform a Gaussian or Lorentzian convolution on the data. Becuase this has a number of possible arguments, named arguments in an anonymous hash are used. The width is sigma as defined in the data processing backend (Ifeffit/Larch) and is a possitive number. A negative number will be interpretted as zero. The type is either &quot;Gaussian&quot; or &quot;Lorentzian&quot;. The type is either &quot;xmu&quot; or &quot;chi&quot; -- that is convolute mu(E) or chi(k) data.</p>

<pre><code>  $copy = $data -&gt; Clone;
  $copy -&gt; convolve(width=&gt;2, type=&gt;&#39;gaussian&#39;, which=&gt;&#39;xmu&#39;);</code></pre>

</dd>
<dt id="noise"><code>noise</code></dt>
<dd>

<p>Add noise to a mu(E) or chi(k) spectrum.</p>

<pre><code>  $copy = $data -&gt; Clone;
  $copy -&gt; noise(noise=&gt;0.02, which=&gt;&#39;xmu&#39;);</code></pre>

<p>The amount of noise is intepretted differently for mu(E) data as for chi(k). For chi(k) data, the supplied noise used as the RMS value of the noise to be applied to the un-weighted chi(k) data. Consequently, you probably want to use a small value -- probably something on the order of 0.001.</p>

<p>For mu(E) data, the noise is interpretted as a fraction of the edge step. Thus the noise level for a given value scales with the size of the edge step. A value of 0.02, as in the example above, is 2% of the edge step.</p>

</dd>
</dl>

<h1 id="CONFIGURATION">CONFIGURATION</h1>

<p>See <a href="../Config.pm.html">Demeter::Config</a> for a description of the configuration system.</p>

<h1 id="DEPENDENCIES">DEPENDENCIES</h1>

<p>Demeter&#39;s dependencies are in the <i>Build.PL</i> file.</p>

<h1 id="BUGS-AND-LIMITATIONS">BUGS AND LIMITATIONS</h1>

<ul>

<li><p>The merge method does not yet return the varience array.</p>

</li>
<li><p>Adding noise to chi(k) is not working correctly. (But adding noise to mu(E) does.)</p>

</li>
</ul>

<p>Please report problems to the Ifeffit Mailing List (<a href="http://cars9.uchicago.edu/mailman/listinfo/ifeffit/">http://cars9.uchicago.edu/mailman/listinfo/ifeffit/</a>)</p>

<p>Patches are welcome.</p>

<h1 id="AUTHOR">AUTHOR</h1>

<p>Bruce Ravel, <a href="http://bruceravel.github.io/home">http://bruceravel.github.io/home</a></p>

<p><a href="http://bruceravel.github.io/demeter/">http://bruceravel.github.io/demeter/</a></p>

<h1 id="LICENCE-AND-COPYRIGHT">LICENCE AND COPYRIGHT</h1>

<p>Copyright (c) 2006-2017 Bruce Ravel (<a href="http://bruceravel.github.io/home">http://bruceravel.github.io/home</a>). All rights reserved.</p>

<p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself. See <a href="http://metacpan.org/module/perlgpl">perlgpl</a>.</p>

<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>

</div><div class="footer">generated by <a href="http://metacpan.org/module/Pod::ProjectDocs">Pod::ProjectDocs</a></div></body></html>

