<!DOCTYPE html>
<html lang="en" xml:lang="en">
<head>
<title>Demeter::Plot::SingleFile &mdash; Demeter</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><link rel="stylesheet" href="../../podstyle.css" type="text/css" />
</head>
<body><div class="box">
  <h1 class="t1">Demeter</h1>
  <table>
    <tr>
      <td class="label">Description</td>
      <td class="cell">Perl tools for X-ray Absorption Spectroscopy</td>
    </tr>
  </table>
</div>
<div class="path">
  <a href="../../index.html">Demeter</a> &gt; Perl Modules &gt;
  Demeter::Plot::SingleFile
</div>
<div>
<a href="../../src/Demeter/Plot/SingleFile.pm">Source</a>
</div>

<div class="pod">


<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#VERSION">VERSION</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#BUGS-AND-LIMITATIONS">BUGS AND LIMITATIONS</a></li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
  <li><a href="#LICENCE-AND-COPYRIGHT">LICENCE AND COPYRIGHT</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>Demeter::Plot::SingleFile - Sending a plot to a single file</p>

<h1 id="VERSION">VERSION</h1>

<p>This documentation refers to Demeter version 0.9.26.</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<p>This is used to send a plot to a single file for easy import into an external plotting program.</p>

<pre><code>  #!/usr/bin/perl
  use Demeter qw(:ui=screen);

  my $file = &#39;examples/data/fe.060&#39;;
  my $data = Demeter::Data-&gt;new(file=&gt;$file,);
  $data -&gt; set(fft_kmax    =&gt; 3,    fft_kmin  =&gt; 14,
               bkg_spl2    =&gt; 18,
               bkg_nor2    =&gt; 1800,
               energy      =&gt; &#39;$1&#39;,
               numerator   =&gt; &#39;$2&#39;,
               denominator =&gt; &#39;$3&#39;,
               ln          =&gt; 1,
              );

  ## set up the plot to output file
  $data-&gt;plot_with(&#39;singlefile&#39;);  # 1

  ## prep for the singlefile plot
  $data-&gt;po-&gt;prep(file=&gt;&quot;foo.dat&quot;, standard=&gt;$data, space=&gt;&#39;k&#39;);

  ## prep is the same as doing the following
  #$data-&gt;standard;                 # 2
  #$data-&gt;po-&gt;space(&#39;k&#39;);           # 3
  #$data-&gt;po-&gt;file(&quot;foo.dat&quot;);      # 4
  #$data-&gt;po-&gt;start_plot;

  ## make a sequence of plots
  $data-&gt;po-&gt;set(kweight =&gt; 1, kmax =&gt; 17, space =&gt; &#39;k&#39;);
  $data-&gt;set(plot_multiplier =&gt; 5,   &#39;y_offset&#39;=&gt;14, name=&gt;&#39;kw=1, scaled by 5&#39;);
  $data-&gt;plot;

  $data-&gt;po-&gt;kweight(2);
  $data-&gt;set(plot_multiplier =&gt; 1,   &#39;y_offset&#39;=&gt;7,  name=&gt;&#39;kw=2, unscaled&#39;);
  $data-&gt;plot;

  $data-&gt;po-&gt;kweight(3);
  $data-&gt;set(plot_multiplier =&gt; 0.2, &#39;y_offset&#39;=&gt;0,  name=&gt;&#39;kw=3, scaled by 0.2&#39;);
  $data-&gt;plot;

  ## the finish method of the Demeter::Plot::SingleFile actually writes out the file
  $data-&gt;po-&gt;finish;               # 5</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>This plotting backend does not work quite as transparently as the other plotting backends. In order to get the figure you actually want written correctly to an output file, a bit more care is required than for this than for other plotting backends. The following steps (marked by their numbers in the example above) must be taken when using this plotting backend:</p>

<ol>

<li><p>You must use the <code>plot_with</code> method to change to this plotting backend. You <b>may not</b> use the <code>:plotwith=</code> pragma at the top of your script to generate a column data file -- you must explicitly switch to this backend in the run-time part of your script. If you try to use the pragma, your script will fail with a confusing and misleading error message.</p>

<p>Note that the <code>start_plot</code> method gets called automatically when you change plotting backends.</p>

</li>
<li><p>You <b>must</b> set a data standard. This is required to correctly set the column containing the x-axis and is particularly important in energy plots where some data might need to be interpolated onto the correct grid.</p>

</li>
<li><p>It is a good idea to explicitly declare the plotting space before calling <code>start_plot</code>. This is particularly true for kq plots, for which you should set the space to <code>q</code>.</p>

</li>
<li><p>You <b>must</b> set the <code>file</code> attribute to the name of the target output file which will contain the data required to replicate the plot in another program. You should set this before starting to actually generate the plot.</p>

</li>
<li><p>2-4.</p>

<p>Alternately, you can use the <code>prep</code> method of the SingleFile object to do steps 2 through 4 in one swoop.</p>

</li>
<li><p>Calling the <code>finish</code> method of the SingleFile backend is what actually writes the output file to disk.</p>

</li>
</ol>

<p>In a GUI, of course, all these steps will be handled behind the scenes.</p>

<h1 id="BUGS-AND-LIMITATIONS">BUGS AND LIMITATIONS</h1>

<ul>

<li><p>markers and indicators</p>

</li>
<li><p>quadplot -- need to write out an 8 column file (e mu k chik r chir q chiq)</p>

</li>
<li><p>stddev and variance, filter, f1f2</p>

</li>
</ul>

<p>Please report problems to the Ifeffit Mailing List (<a href="http://cars9.uchicago.edu/mailman/listinfo/ifeffit/">http://cars9.uchicago.edu/mailman/listinfo/ifeffit/</a>)</p>

<p>Patches are welcome.</p>

<h1 id="AUTHOR">AUTHOR</h1>

<p>Bruce Ravel, <a href="http://bruceravel.github.io/home">http://bruceravel.github.io/home</a></p>

<p><a href="http://bruceravel.github.io/demeter/">http://bruceravel.github.io/demeter/</a></p>

<h1 id="LICENCE-AND-COPYRIGHT">LICENCE AND COPYRIGHT</h1>

<p>Copyright (c) 2006-2017 Bruce Ravel (<a href="http://bruceravel.github.io/home">http://bruceravel.github.io/home</a>). All rights reserved.</p>

<p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself. See <a href="http://metacpan.org/module/perlgpl">perlgpl</a>.</p>

<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>

</div><div class="footer">generated by <a href="http://metacpan.org/module/Pod::ProjectDocs">Pod::ProjectDocs</a></div></body></html>

