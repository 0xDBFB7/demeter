<!DOCTYPE html>
<html lang="en" xml:lang="en">
<head>
<title>Demeter::Feff::Histogram &mdash; Demeter</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><link rel="stylesheet" href="../../podstyle.css" type="text/css" />
</head>
<body><div class="box">
  <h1 class="t1">Demeter</h1>
  <table>
    <tr>
      <td class="label">Description</td>
      <td class="cell">Perl tools for X-ray Absorption Spectroscopy</td>
    </tr>
  </table>
</div>
<div class="path">
  <a href="../../index.html">Demeter</a> &gt; Perl Modules &gt;
  Demeter::Feff::Histogram
</div>
<div>
<a href="../../src/Demeter/Feff/Histogram.pm">Source</a>
</div>

<div class="pod">


<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#VERSION">VERSION</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#METHODS">METHODS</a>
    <ul>
      <li><a href="#Histogram-from-a-file">Histogram from a file</a></li>
      <li><a href="#Histogram-from-a-Gamm-like-distribution">Histogram from a Gamm-like distribution</a></li>
    </ul>
  </li>
  <li><a href="#CONFIGURATION-AND-ENVIRONMENT">CONFIGURATION AND ENVIRONMENT</a></li>
  <li><a href="#DEPENDENCIES">DEPENDENCIES</a></li>
  <li><a href="#BUGS-AND-LIMITATIONS">BUGS AND LIMITATIONS</a></li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
  <li><a href="#LICENCE-AND-COPYRIGHT">LICENCE AND COPYRIGHT</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>Demeter::Feff::Histogram - Arbitrary distribution functions</p>

<h1 id="VERSION">VERSION</h1>

<p>This documentation refers to Demeter version 0.9.26.</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code>  my $feff = Demeter::Feff-&gt;new(yaml=&gt;&#39;some_feff.yaml&#39;);
  my @list_of_paths = @{ $feff-&gt;pathlist };
  my $firstshell = $list_of_paths[0];
  my ($rx, $ry) = $firstshell-&gt;histogram_from_file(&#39;RDFDAT20K&#39;, 1, 2, 2.5, 3.0);
  my @common = (s02 =&gt; &#39;amp&#39;, sigma2 =&gt; &#39;sigsqr&#39;, e0 =&gt; &#39;enot&#39;, data=&gt;$data);
  my @paths = $firstshell -&gt; make_histogram($rx, $ry, \@common);</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>This role of the ScatteringPath object provides tools for generating and parameterizing arbitrary distribution functions.</p>

<h1 id="METHODS">METHODS</h1>

<h2 id="Histogram-from-a-file">Histogram from a file</h2>

<dl>

<dt id="histogram_from_file"><code>histogram_from_file</code></dt>
<dd>

<p>Read data from a text file to define the distribution function. Returns array references containing the x- and y-axis data.</p>

<pre><code>  ($ref_r, $ref_y) = histogram_from_file($filename, $xcol, $ycol, $rmin, $rmax);</code></pre>

<p>The arguments are the filename, the column numbers (counting from 1) containing the R-grid and the amplitudes of the distributions, and the minimum and maximum r-values to read from the file.</p>

</dd>
<dt id="make_histogram"><code>make_histogram</code></dt>
<dd>

<p>Given the array references from <code>histogram_from_file</code> or <code>histogram_gamma</code>, return a reference to a list of SSPath objects defining the histogram.</p>

<pre><code>  $ref_paths = $firstshell -&gt; make_histogram($rx, $ry, $scale, \@common);</code></pre>

<p>The caller is the ScatteringPath object used as the Feff calculation for each bin in the histogram. The first two arguments are the array references. <code>@rx</code> must be a referecne to an array of numbers -- the x-axis values. <code>@ry</code> may be a reference to an array of numbers or strings. If numbers, they are taken as the bin poulations. If strings, they are taken to be math expressions for computing the bin populations.</p>

<p>The third argument is the name of a parameter that will be used as an isotropic scaling factor for the dletaR parameter. The remaining arguments will be passed to each resulting Path object.</p>

</dd>
</dl>

<h2 id="Histogram-from-a-Gamm-like-distribution">Histogram from a Gamm-like distribution</h2>

<dl>

<dt id="histogram_gamma"><code>histogram_gamma</code></dt>
<dd>

<p>Define a gamma-like dsitribution function.</p>

<pre><code>  my ($rx, $ry, $rz) = $fspath -&gt; sp -&gt; histogram_gamma(1.8, 3.0, 0.03);</code></pre>

<p>The return values are array references. The first is to the grid in R space defined by the parameters of the method. The second is a list of text strings which will be to define the <code>s02</code> parameters of each bin. The third is a list of GDS objects conatining additional def and guess parameters required as part of the fitting model.</p>

</dd>
<dt id="make_gamma_histogram"><code>make_gamma_histogram</code></dt>
<dd>

<p>Generate Path and GDS objects required to do the gamma-like fit using a histogram. The first three arguments of the method are the return values of <code>histogram_gamma</code>, the last is an array reference which will be passed as the attributes of each Path object generated.</p>

<pre><code>  my ($paths, $gamma_gds) = $fspath -&gt; sp -&gt; make_gamma_histogram($rx, $ry, $rz, $common);</code></pre>

<p>To finish off the fit, you would do something like this:</p>

<pre><code>  my $e0  = Demeter::GDS-&gt;new(gds=&gt;&#39;guess&#39;, name=&gt;&#39;enot&#39;,   mathexp=&gt;0);
  my $fit = Demeter::Fit-&gt;new(gds=&gt;[$e0, @$gamma_gds], data=&gt;[$data], paths=&gt;$paths);
  $fit-&gt;fit;</code></pre>

</dd>
</dl>

<h1 id="CONFIGURATION-AND-ENVIRONMENT">CONFIGURATION AND ENVIRONMENT</h1>

<p>See <a href="../Config.pm.html">Demeter::Config</a> for a description of the configuration system. The plot and ornaments configuration groups control the attributes of the Plot object.</p>

<h1 id="DEPENDENCIES">DEPENDENCIES</h1>

<h1 id="BUGS-AND-LIMITATIONS">BUGS AND LIMITATIONS</h1>

<ul>

<li><p><code>make_histogram</code> only makes sense right now using a single scattering path as the basis. Need to throw an error if the ScatteringPath is not a ss path.</p>

</li>
<li><p>Fits using the Gamma-like distribution are not very stable...</p>

</li>
<li><p>Need to implement user-defined distribution, although I don&#39;t have a clear idea how to do so...</p>

</li>
</ul>

<h1 id="AUTHOR">AUTHOR</h1>

<p>Bruce Ravel, <a href="http://bruceravel.github.io/home">http://bruceravel.github.io/home</a></p>

<p><a href="http://bruceravel.github.io/demeter/">http://bruceravel.github.io/demeter/</a></p>

<h1 id="LICENCE-AND-COPYRIGHT">LICENCE AND COPYRIGHT</h1>

<p>Copyright (c) 2006-2017 Bruce Ravel (<a href="http://bruceravel.github.io/home">http://bruceravel.github.io/home</a>). All rights reserved.</p>

<p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself. See <a href="http://metacpan.org/module/perlgpl">perlgpl</a>.</p>

<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>

</div><div class="footer">generated by <a href="http://metacpan.org/module/Pod::ProjectDocs">Pod::ProjectDocs</a></div></body></html>

