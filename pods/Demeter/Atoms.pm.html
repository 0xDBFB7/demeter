<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Demeter::Atoms</title>
<link rel="stylesheet" type="text/css" href="../podstyle.css" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <script type="text/javascript">

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;

    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  </script></head>
<body>
<div class="box">
  <h1 class="t1">Demeter</h1>
  <table>
    <tr>
      <td class="label">Description</td>
      <td class="cell">Perl tools for X-ray Absorption Spectroscopy</td>
    </tr>
  </table>
</div>
<div class="path">
  <a href="../index.html">Demeter</a> &gt; Perl Modules &gt;
  Demeter-Atoms
</div>
<div>
<a href="../src/Demeter/Atoms.pm">Source</a>
</div>


<div class="pod">
<!-- INDEX START -->
<h3 id="TOP">Index</h3>
<ul>
	<li><a href="#NAME">NAME</a></li>
	<li><a href="#VERSION">VERSION</a></li>
	<li><a href="#SYNOPSIS">SYNOPSIS</a></li>
	<li><a href="#DESCRIPTION">DESCRIPTION</a></li>
	<li><a href="#ATTRIBUTES">ATTRIBUTES</a><br />
<ul>
	<li><a href="#Input_parameters">Input parameters</a></li>
	<li><a href="#Progress_flags">Progress flags</a></li>
	<li><a href="#Crystallography">Crystallography</a></li>
</ul>
</li>
	<li><a href="#METHODS">METHODS</a><br />
<ul>
	<li><a href="#Accessor_methods">Accessor methods</a></li>
	<li><a href="#Main_methods">Main methods</a></li>
	<li><a href="#Methods_for_doing_absorption_calcula">Methods for doing absorption calculations</a></li>
</ul>
</li>
	<li><a href="#TEMPLATES">TEMPLATES</a></li>
	<li><a href="#DIAGNOSTICS">DIAGNOSTICS</a></li>
	<li><a href="#SERIALIZATION_AND_DESERIALIZATION">SERIALIZATION AND DESERIALIZATION</a></li>
	<li><a href="#CONFIGURATION_AND_ENVIRONMENT">CONFIGURATION AND ENVIRONMENT</a></li>
	<li><a href="#DEPENDENCIES">DEPENDENCIES</a></li>
	<li><a href="#BUGS_AND_LIMITATIONS">BUGS AND LIMITATIONS</a></li>
	<li><a href="#AUTHOR">AUTHOR</a></li>
	<li><a href="#LICENCE_AND_COPYRIGHT">LICENCE AND COPYRIGHT</a></li>
</ul>
<hr />
<!-- INDEX END -->

<h1 id="NAME">NAME <a href="#TOP" class="toplink"><img alt="^" src="../up.gif" /></a></h1>

<p>Demeter::Atoms - Convert crystallographic data to atomic lists</p>

<h1 id="VERSION">VERSION <a href="#TOP" class="toplink"><img alt="^" src="../up.gif" /></a></h1>

<p>This documentation refers to Demeter version 0.9.13.</p>

<h1 id="SYNOPSIS">SYNOPSIS <a href="#TOP" class="toplink"><img alt="^" src="../up.gif" /></a></h1>

<p>These lines behave much like any other version of Atoms:</p>

<pre>  use Demeter;
  my $atoms = Demeter::Atoms -&gt; new()
    -&gt; read_inp($ARGV[0]||&quot;atoms.inp&quot;)
      -&gt; Write('feff6');

</pre><h1 id="DESCRIPTION">DESCRIPTION <a href="#TOP" class="toplink"><img alt="^" src="../up.gif" /></a></h1>

<p>This module implements Atoms in the Demeter system.  The purpose of
Atoms is to convert crystallographic data into a list of atomic
coordinates of the sort used by Feff as input data.  This greatly
simplifies the chore of making Feff input files for crystalline
materials.</p>

<h1 id="ATTRIBUTES">ATTRIBUTES <a href="#TOP" class="toplink"><img alt="^" src="../up.gif" /></a></h1>

<p>The following are the attributes of the Data object.  Attempting to
access an attribute not on this list will throw an exception.</p>

<p>The type of argument expected in given in parentheses. i.e. number,
integer, string, and so on.  The default value, if one exists, is
given in square brackets.</p>

<h2 id="Input_parameters">Input parameters</h2>

<dl>
	<dt><code>space</code> (string)</dt>
		<dd><p>The space group ofthe crystal.  This can be in any form recognized by
<a href="../Xray/Crystal/Cell.pm.html">Xray::Crystal::Cell</a>, including Hermann-Maguin, Schoenflies, number,
or one of a few nicknames.</p></dd>
	<dt><code>a</code>	(real)</dt>
		<dd><p>The length of the A lattice constant in Angstroms.</p></dd>
	<dt><code>b</code>	(real)</dt>
		<dd><p>The length of the B lattice constant in Angstroms.</p></dd>
	<dt><code>c</code>	(real)</dt>
		<dd><p>The length of the C lattice constant in Angstroms.</p></dd>
	<dt><code>alpha</code> (real)</dt>
		<dd><p>The angle between B and C, in degrees.</p></dd>
	<dt><code>beta</code> (real)</dt>
		<dd><p>The angle between A and C, in degrees.</p></dd>
	<dt><code>gamma</code> (real)</dt>
		<dd><p>The angle between A and B, in degrees.</p></dd>
	<dt><code>rmax</code> (real)</dt>
		<dd><p>The extent of the cluster generated from the input crystal data.</p></dd>
	<dt><code>rpath</code> (real)</dt>
		<dd><p>The value used for the RMAX keyword in the <cite>feff.inp</cite> file.  This is
the length of the longest path to be calculated by the pathfinder.  A
value much larger than about 6 will bog down Demeter's pathfinder in
its current form.</p></dd>
	<dt><code>edge</code> (string) [k or l3 depending on Z-number]</dt>
		<dd><p>The edge of the absorber.</p></dd>
	<dt><code>core</code> (string) [first sitin the list]</dt>
		<dd><p>The identifier of the absorber.  This should be one of the site tags.</p></dd>
	<dt><code>shift</code> (vector) [0,0,0]</dt>
		<dd><p>The value of the shift vector, should one be necessary.</p></dd>
	<dt><code>file</code> (filename)</dt>
		<dd><p>The name of an atoms input file.</p></dd>
	<dt><code>cif</code> (filename)</dt>
		<dd><p>The name of a CIF file.</p></dd>
	<dt><code>record</code> (string) [0]</dt>
		<dd><p>The record to import from a multi-record CIF file.  The default is to
read the first record.  Note that this is zero-based while you user
interface probably should be one-based.</p></dd>
	<dt><code>titles</code> (array of strings)</dt>
		<dd><p>An array of strings containing the title lines read from the input
data.</p></dd>
	<dt><code>template</code> (output template) [feff6]</dt>
		<dd><p>The output template.</p></dd>
	<dt><code>ipot_style</code> (string) [elements]</dt>
		<dd><p>The style for generating the potentials list in a Feff input file.
The choices are sites, elements, and tags.</p></dd>
</dl>
<h2 id="Progress_flags">Progress flags</h2>

<dl>
	<dt><code>is_imported</code> (boolean) [false]</dt>
		<dd><p>This is set to true when data is imported from a file.</p></dd>
	<dt><code>is_populated</code> (boolean) [false]</dt>
		<dd><p>This is set to true when the cell is populated.</p></dd>
	<dt><code>is_expanded</code> (boolean) [false]</dt>
		<dd><p>This is set to true when the populated cell is expanded into a cluster.</p></dd>
	<dt><code>is_ipots_set</code> (boolean) [false]</dt>
		<dd><p>This is set to true when the unique potentials are assigned.</p></dd>
	<dt><code>partial_occupancy</code></dt>
		<dd><p>This is set to true if the input crystal data includes sites with
partial occupancy.</p></dd>
</dl>
<h2 id="Crystallography">Crystallography</h2>

<dl>
	<dt><code>sites</code> (list of Site objects)</dt>
		<dd><p>This is a reference to the array of Site objects in the cluster.</p></dd>
	<dt><code>cell</code> (reference to Cell object)</dt>
		<dd><p>This is a reference to the Cell object associated with this Atoms
object.</p></dd>
	<dt><code>cluster</code> (list)</dt>
		<dd><p>This is a list containing the expanded cluster.  Need to describe each
list entry.</p></dd>
</dl>
<h1 id="METHODS">METHODS <a href="#TOP" class="toplink"><img alt="^" src="../up.gif" /></a></h1>

<p>Various methods for populating the cell, explanding the cluster, and
other chores are not documented here.  These things will happen as
needed when any of the output generating methods are called.</p>

<h2 id="Accessor_methods">Accessor methods</h2>

<dl>
	<dt><code>set</code></dt>
		<dd><p>Set attributes.  This takes a single argument which is a reference to
a hash of attribute values.  The keys of that hash are any of the
valid object attributes listed above.</p></dd>
<dd><pre>  $atoms -&gt; set(a =&gt; 3.81, rmax =&gt; 6);

</pre></dd>	<dt><code>get</code></dt>
		<dd><p>Retrieve attribute values.  This works in scalar and list context.</p></dd>
<dd><pre>  $a = $atoms -&gt; get(&quot;a&quot;);
  @cell_constants = $atoms -&gt; get(qw(a b c alpha beta gamma));

</pre></dd></dl>
<h2 id="Main_methods">Main methods</h2>

<dl>
	<dt><code>read_inp</code></dt>
		<dd><p>Import crystal data from an Atoms input file.</p></dd>
<dd><pre>  $atoms -&gt; read_inp(&quot;atoms.inp&quot;);

</pre></dd>	<dt><code>read_cif</code></dt>
		<dd><p>Import crystal data from a CIF file.</p></dd>
<dd><pre>  $atoms -&gt; read_cif(&quot;your_data.cif&quot;);

</pre></dd>		<dd><p>See <a href="Atoms/Cif.pm.html">Demeter::Atoms::Cif</a> for more details.</p></dd>
	<dt><code>atoms_file</code></dt>
		<dd><p>Generate text suitable for an atoms input file.</p></dd>
<dd><pre>  print $atoms -&gt; atoms_file;

</pre></dd>	<dt><code>Write</code></dt>
		<dd><p>Write out an output file using a specified output template.</p></dd>
<dd><pre>  print $atoms-&gt;Write($template);

</pre></dd>		<dd><p>Several types are already defined, see <a href="#TEMPLATES">TEMPLATES</a>.</p></dd>
</dl>
<h2 id="Methods_for_doing_absorption_calcula">Methods for doing absorption calculations</h2>

<dl>
	<dt><code>xsec</code></dt>
		<dd><p>Return the length in microns of the sample required for a total
absorption length of 1.</p></dd>
	<dt><code>deltamu</code></dt>
		<dd><p>Return the length in microns of the sample required for an edge step
of 1.</p></dd>
	<dt><code>density</code></dt>
		<dd><p>Return the density as a unitless specific gravity.  The density os
computed from the unit cell volume and the mass of the contents of the
cell.</p></dd>
	<dt><code>mcmaster</code></dt>
		<dd><p>Return an approximation of the effect of unit normalization on the
sigma^2 values measured in an EXAFS analysis.</p></dd>
	<dt><code>i0</code></dt>
		<dd><p>Return an approximation of the effect of the energy response of the I0
detector on the sigma^2 values in a fluorescence EXAFS measurement.</p></dd>
	<dt><code>selfsig</code></dt>
		<dd><p>Return an approximation of the effect of self-absorption on the
sigma^2 values in a fluorescence EXAFS measurement.</p></dd>
	<dt><code>selfamp</code></dt>
		<dd><p>Return an approximation of the effect of self-absorption on the
amplitude in a fluorescence EXAFS measurement.</p></dd>
	<dt><code>netsig</code></dt>
		<dd><p>Return the sum of the three sigma^2 corrections.</p></dd>
</dl>
<h1 id="TEMPLATES">TEMPLATES <a href="#TOP" class="toplink"><img alt="^" src="../up.gif" /></a></h1>

<p>Atoms templates use the syntax of <a href="http://search.cpan.org/perldoc?Text%3A%3ATemplate">Text::Template</a>.  This is a simple
templating language which has snippets of perl code interspersed among
plain text.</p>

<ul>
	<li><strong>atoms</strong>: An input file for atoms.  Calling the <code>Write</code> method with
<code>atoms</code> as the argument is identical to calling the <code>atoms_file</code>
method.</li>
	<li><strong>p1</strong>: The entrie contents of the fully decorated unit cell, written
as an input file for atoms using the <code>P1</code> space group.</li>
	<li><strong>feff6</strong>: An input file for feff6.</li>
	<li><strong>feff7</strong>: An input file for feff7.</li>
	<li><strong>feff8</strong>: An input file for feff8.</li>
	<li><strong>absorption</strong>: Text with the results of various caluclations using
tables of xray absorption coefficients.</li>
	<li><strong>spacegroup</strong>: A brief description of the space group, including
alternate symbols and a list of equivalent positions.</li>
</ul>

<p>New output types can be defined by writing new template files.  Any
template files found on your system can be used as the argument to the
<code>Write</code> method.</p>







<h1 id="DIAGNOSTICS">DIAGNOSTICS <a href="#TOP" class="toplink"><img alt="^" src="../up.gif" /></a></h1>

<dl>
	<dt><code>Atoms: \&quot;$file\&quot; does not exist&quot;</code></dt>
		<dd><p>Your atoms input file or CIF file could not be found.</p></dd>
	<dt><code>Atoms: \&quot;$file\&quot; could not be read&quot;</code></dt>
		<dd><p>Your atoms input file or CIF file could not be read,probably due to a
permissions problem.</p></dd>
	<dt><code>Unknown Atoms template file -- type $file: $tmpl&quot;</code></dt>
		<dd><p>The template file specified in the call to the <code>Write</code> method could
not located.</p></dd>
	<dt><code>&quot;$key&quot; is not a valid Demeter::Atoms parameter</code></dt>
		<dd><p>You have attempted to set an unrecognized  keyword.</p></dd>
	<dt><code>You have $i unique potentials, but Feff only allows 7.</code></dt>
		<dd><p>Your choice of ipot style has resulted in more than 7 unique
potentials being defined.  Feff will refuse to run with that many.</p></dd>
	<dt><code>&quot;$key&quot; is a deprecated Atoms keyword ($file line $.)</code></dt>
		<dd><p>While reading an Atoms input file, you have come across a keyword that
was recognized in an earlier version of Atoms, but which is no longer
supported.  It's value was ignored.</p></dd>
	<dt><code>&quot;$key&quot; is not an Atoms keyword ($file line $.)</code></dt>
		<dd><p>While reading an Atoms input file, you have come across a keyword that
is not an Atoms keyword.  It's value was ignored.</p></dd>
</dl>
<h1 id="SERIALIZATION_AND_DESERIALIZATION">SERIALIZATION AND DESERIALIZATION <a href="#TOP" class="toplink"><img alt="^" src="../up.gif" /></a></h1>

<p>The atoms input file is used for serialization of input data.  Output
data should be associated with a Feff object and serialization of the
output should be handled as a Feff object.</p>

<h1 id="CONFIGURATION_AND_ENVIRONMENT">CONFIGURATION AND ENVIRONMENT <a href="#TOP" class="toplink"><img alt="^" src="../up.gif" /></a></h1>

<p>See <a href="Config.pm.html">Demeter::Config</a> for a description of the configuration system.
Atoms uses the <code>atoms</code> configuration group.</p>

<h1 id="DEPENDENCIES">DEPENDENCIES <a href="#TOP" class="toplink"><img alt="^" src="../up.gif" /></a></h1>

<p>The dependencies of the Demeter system are in the
<cite>Bundle/DemeterBundle.pm</cite> file.</p>

<h1 id="BUGS_AND_LIMITATIONS">BUGS AND LIMITATIONS <a href="#TOP" class="toplink"><img alt="^" src="../up.gif" /></a></h1>

<ul>
	<li>Need to implement a feff.inp parser for OpenBabel to enable a much
broader range of output formats.</li>
	<li>Neutral (parallelipiped) cluster?</li>
	<li>Need overfull, p1_cartesian, gnxas outout.</li>
	<li>Location in user space for user-defined templates.</li>
	<li>Need more testing of spacegroups and database.</li>
</ul>

<p>Please report problems to Bruce Ravel (bravel AT bnl DOT gov)</p>

<p>Patches are welcome.</p>

<h1 id="AUTHOR">AUTHOR <a href="#TOP" class="toplink"><img alt="^" src="../up.gif" /></a></h1>

<p>Bruce Ravel (bravel AT bnl DOT gov)</p>

<p><a href="http://cars9.uchicago.edu/~ravel/software/exafs/">http://cars9.uchicago.edu/~ravel/software/exafs/</a></p>




<h1 id="LICENCE_AND_COPYRIGHT">LICENCE AND COPYRIGHT <a href="#TOP" class="toplink"><img alt="^" src="../up.gif" /></a></h1>

<p>Copyright (c) 2006-2012 Bruce Ravel (bravel AT bnl DOT gov). All
rights reserved.</p>

<p>This module is free software; you can redistribute it and/or
modify it under the same terms as Perl itself. See <a href="http://search.cpan.org/perldoc?perlgpl">perlgpl</a>.</p>

<p>This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>


</div><div class="footer">generated by <a href="http://search.cpan.org/perldoc?Pod%3A%3AProjectDocs">Pod::ProjectDocs</a></div></body>
</html>
