<!DOCTYPE html>
<html lang="en" xml:lang="en">
<head>
<title>STAR::DataBlock &mdash; Demeter</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><link rel="stylesheet" href="../podstyle.css" type="text/css" />
</head>
<body><div class="box">
  <h1 class="t1">Demeter</h1>
  <table>
    <tr>
      <td class="label">Description</td>
      <td class="cell">Perl tools for X-ray Absorption Spectroscopy</td>
    </tr>
  </table>
</div>
<div class="path">
  <a href="../index.html">Demeter</a> &gt; Perl Modules &gt;
  STAR::DataBlock
</div>
<div>

<a href="../src/STAR/DataBlock.pm">Source</a>

</div>

<div class="pod">


<ul id="index">
  <li><a href="#NAME">NAME</a>
    <ul>
      <li><a href="#Version">Version</a></li>
    </ul>
  </li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#CONSTRUCTOR">CONSTRUCTOR</a>
    <ul>
      <li><a href="#new">new</a></li>
    </ul>
  </li>
  <li><a href="#OBJECT-METHODS">OBJECT METHODS</a>
    <ul>
      <li><a href="#store">store</a></li>
      <li><a href="#get_item_data">get_item_data</a></li>
      <li><a href="#get_keys">get_keys</a></li>
      <li><a href="#get_items">get_items</a></li>
      <li><a href="#get_categories">get_categories</a></li>
      <li><a href="#insert_category">insert_category</a></li>
      <li><a href="#insert_item">insert_item</a></li>
      <li><a href="#set_item_data">set_item_data</a></li>
      <li><a href="#Object-attributes">Object attributes</a></li>
      <li><a href="#file_name">file_name</a></li>
      <li><a href="#title">title</a></li>
      <li><a href="#type">type</a></li>
      <li><a href="#starting_line">starting_line</a></li>
      <li><a href="#ending_line">ending_line</a></li>
      <li><a href="#get_attributes">get_attributes</a></li>
    </ul>
  </li>
  <li><a href="#COMMENTS">COMMENTS</a></li>
  <li><a href="#AUTHOR">AUTHOR</a>
    <ul>
      <li><a href="#Acknowledgments">Acknowledgments</a></li>
    </ul>
  </li>
  <li><a href="#COPYRIGHT">COPYRIGHT</a></li>
  <li><a href="#SEE-ALSO">SEE ALSO</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>STAR::DataBlock - Perl extension for handling DataBlock objects created by STAR::Parser.</p>

<h2 id="Version">Version</h2>

<p>This documentation refers to version 0.58 of this module.</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code>  use STAR::DataBlock;
  
  $data_obj = STAR::DataBlock-&gt;new(-file=&gt;$ARGV[0]);  #retrieves stored file
  
  $attributes = $data_obj-&gt;get_attributes;
  print $attributes;

  @items = $data_obj-&gt;get_items;

  foreach $item ( @items ) {
      @item_data = $data_obj-&gt;get_item_data( -item=&gt;$item );
      $count{ $_ } = $#item_data + 1;

      # do something else (hopefully more useful) with @item_data...
  }</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>This package contains class and object methods for dealing with DataBlock objects created by STAR::Parser. They include methods for such tasks as reading objects from disk, querying their data structures or writing DataBlock objects as STAR compliant files.</p>

<p>All methods support a &quot;named parameters&quot; style for passing arguments. If only one argument is mandatory, then it may be passed in either a &quot;named parameters&quot; or &quot;unnamed parameters&quot; style, for example:</p>

<pre><code>       $data_obj-&gt;get_item_data( -file=&gt;$file, -save=&gt;&#39;-&#39; );
   or: $data_obj-&gt;get_item_data( -file=&gt;$file ); 
   or: $data_obj-&gt;get_item_data( $file );  

       # all of the above are the same, since -save=&gt;&#39;-&#39; is the default
       # and therefore only one parameter needs to be specified 
       # in &quot;named&quot; or &quot;unnamed&quot; parameter style</code></pre>

<p>Some methods may be invoked with on <code>$options</code> string. Currently, only one option is supported:</p>

<pre><code>  l  writes program activity log to STDERR</code></pre>

<p>Future versions may support additional options.</p>

<h1 id="CONSTRUCTOR">CONSTRUCTOR</h1>

<h2 id="new">new</h2>

<pre><code>  Usage:  $data_obj = STAR::DataBlock-&gt;new();                #creates new object

          $data_obj = STAR::DataBlock-&gt;new( -file=&gt;$file );  #retrieves previously
     OR:  $data_obj = STAR::DataBlock-&gt;new( $file );         #stored object</code></pre>

<p>Overloaded constructor. Called as a no-arg constructor internally by STAR::Parser. May be called with a <code>$file</code> argument to retrieve an object previously stored with store (see below).</p>

<h1 id="OBJECT-METHODS">OBJECT METHODS</h1>

<h2 id="store">store</h2>

<pre><code>  Usage:  $data_obj-&gt;store($file);</code></pre>

<p>Saves a DataBlock object to disk. This method is in Storable.</p>

<h2 id="get_item_data">get_item_data</h2>

<pre><code>  Usage: @item_data = $data_obj-&gt;get_item_data(-item=&gt;$item[,
                                               -save=&gt;$save_block]);

  Example:
  --------
  my @names=$data_obj-&gt;
            get_item_data(-item=&gt;&quot;_citation_author.name&quot;);
  print $names[0],&quot;\n&quot;;  #prints first citation author name</code></pre>

<p>This object method returns all the data for a specified item. If the <code>-save</code> parameter is omitted, it is assumed that the item is not in a save block (i.e. <code>$save=&#39;-&#39;</code>). This is always the case in data files, since they do not contain save blocks. However, this class is sub-classed by STAR::Dictionary, where items may be in save blocks. The data is returned as an array, which holds one or more scalars.</p>

<h2 id="get_keys">get_keys</h2>

<pre><code>  Usage: $keys = $data_obj-&gt;get_keys;</code></pre>

<p>Returns a string with a hierarchically formatted list of hash keys (data blocks, save blocks, categories, and items) found in the data structure of the DataBlock object.</p>

<h2 id="get_items">get_items</h2>

<pre><code>  Usage: @items = $data_obj-&gt;get_items;</code></pre>

<p>Returns an array with all the items present in the DataBlock.</p>

<h2 id="get_categories">get_categories</h2>

<pre><code>  Usage: @categories = $data_obj-&gt;get_categories;</code></pre>

<p>Returns an array with all the categories present in the DataBlock.</p>

<h2 id="insert_category">insert_category</h2>

<pre><code>  Usage: $data_obj-&gt;insert_category( -cat=&gt;$cat[,
                                     -save=&gt;$save] );</code></pre>

<p>Inserts the category <code>$cat</code> into the data structure. The default save block (if none is specified) is <code>&#39;-&#39;</code>.</p>

<h2 id="insert_item">insert_item</h2>

<pre><code>  Usage: $data_obj-&gt;insert_item( -item=&gt;$item[,
                                 -save=&gt;$save]  );</code></pre>

<p>Inserts the item <code>$item</code> into the data structure. The default save block (if none is specified) is <code>&#39;-&#39;</code>.</p>

<h2 id="set_item_data">set_item_data</h2>

<pre><code>  Usage: $data_obj-&gt;set_item_data( -item=&gt;$item, 
                                   -dataref=&gt;$dataref[,
                                   -save=&gt;$save] );</code></pre>

<p>Sets the data of the item <code>$item</code> to the array of data referenced by <code>$dataref</code>. If the <code>-save</code> parameter is omitted, the save block defaults to <code>&#39;-&#39;</code>. This is always correct for data blocks. In a dictionary (which inherits from DataBlock), the save block <code>&#39;-&#39;</code> contains information pertaining to the dictionary itself.</p>

<h2 id="Object-attributes">Object attributes</h2>

<p>The following five methods set or retrieve attributes of a DataBlock object. In the set mode (with argument), these methods are called internally to set the attributes of a DataBlock object. In the retrieve mode (without arguments) these methods may also be called by a user to retrieve object attributes (see the above examples).</p>

<h2 id="file_name">file_name</h2>

<pre><code>  Usage:  $data_obj-&gt;file_name($name);   #set mode
          $name = $data_obj-&gt;file_name;  #get mode</code></pre>

<p>Name of the file in which the DataBlock object was found</p>

<h2 id="title">title</h2>

<pre><code>  Usage:  $data_obj-&gt;title($title);      #set mode
          $title = $data_obj-&gt;title;     #get mode</code></pre>

<p>Title of the DataBlock object</p>

<h2 id="type">type</h2>

<pre><code>  Usage:  $data_obj-&gt;type($type);        #set mode
          $type = $data_obj-&gt;type;       #get mode</code></pre>

<p>Type of data contained (always &#39;data&#39; for a DataBlock object, but &#39;dictionary&#39; for an object in the sub class STAR::Dictionary)</p>

<h2 id="starting_line">starting_line</h2>

<pre><code>  Usage:  $data_obj-&gt;starting_line($startln);    #set mode
          $startln = $data_obj-&gt;starting_line;   #get mode</code></pre>

<p>Line number where data block started in the file</p>

<h2 id="ending_line">ending_line</h2>

<pre><code>  Usage:  $data_obj-&gt;ending_line($endln);        #set mode
          $endln = $data_obj-&gt;ending_line;       #get mode</code></pre>

<p>Line number where data block ended in the file</p>

<h2 id="get_attributes">get_attributes</h2>

<pre><code>  Usage: $info = $data_obj-&gt;get_attributes;</code></pre>

<p>Returns a string containing a descriptive list of attributes of the DataBlock object. Two examples of output:</p>

<pre><code>  RCSB011457
  File: native/1fbm.cif   Lines: 1 to 5294

  cif_mm.dic (dictionary)
  File: dictionary/mmcif_dict.txt   Lines: 89 to 38008</code></pre>

<h1 id="COMMENTS">COMMENTS</h1>

<p>This module provides no error checking of files or objects, either against the dictionary, or otherwise. Dictionary information is not currently used in the parsing of files by STAR::Parser. So, for example, information about parent-child relationships between items is not present in a DataBlock object. Functionality related to these issues is being provided in additional modules, such as STAR::Checker, and STAR::Filter.</p>

<h1 id="AUTHOR">AUTHOR</h1>

<p>Wolfgang Bluhm, mail@wbluhm.com</p>

<h2 id="Acknowledgments">Acknowledgments</h2>

<p>Thanks to Phil Bourne, Helge Weissig, Anne Kuller, Doug Greer, Michele Bluhm, and others for support, help, and comments.</p>

<h1 id="COPYRIGHT">COPYRIGHT</h1>

<p>A full copyright statement is provided with the distribution Copyright (c) 2000 University of California, San Diego</p>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<p>STAR::Parser, STAR::Dictionary.</p>

</div><div class="footer">generated by <a href="http://metacpan.org/module/Pod::ProjectDocs">Pod::ProjectDocs</a></div></body></html>

